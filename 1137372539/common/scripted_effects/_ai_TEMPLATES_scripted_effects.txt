######################## Template Reinforcement Priority. These need to be the same values as defined in common/ai_templates/ files
######################## EVERY ROLE NEEDS TO HAVE A UNIQUE NUMBER
@GARRISON_PRIO = 0
@LIGHT_INFANTRY_PRIO = 1
@INFANTRY_PRIO = 2 
@CAVALRY_PRIO = 3
@ASSAULT_INFANTRY_PRIO = 4
@HEAVY_INFANTRY_PRIO = 5
@MOTORIZED_PRIO = 6
@MOUNTAINEERS_PRIO = 7
@LIGHT_ARMOR_ALT_PRIO = 8
@LIGHT_ARMOR_PRIO = 9
@MEDIUM_ARMOR_ALT_PRIO = 10
@MEDIUM_ARMOR_PRIO = 11
@HEAVY_ARMOR_ALT_PRIO = 12
@HEAVY_ARMOR_PRIO = 13
@MARINES_PRIO = 14
@MILITIA_PRIO = 15

#template icons

@C_GARRISON = 81
@C_LIGHT_INFANTRY = 370
@C_INFANTRY = 114
@C_ASSAULT_INFANTRY = 402
@C_CAVALRY = 209
@C_HEAVY_INFANTRY = 354
@C_MOTORIZED = 162
@C_MOUNTAINEER = 762
@C_LIGHT_ARMOR_ALT = 242
@C_LIGHT_ARMOR = 242
@C_MEDIUM_ARMOR_ALT = 258
@C_MEDIUM_ARMOR = 258
@C_HEAVY_ARMOR_ALT = 274
@C_HEAVY_ARMOR = 274
@C_MARINES = 970

ai_infantry_templates/example = {
	ai_infantry_templates = yes #needs to be at start and at the end
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = { #these triggers makes ai increase research scores for the techs needed to unlock the unit. they should always be checked if ai doesnt start with the unit unlocked
					ai_has_anti_air = yes 
					ai_has_signal_company = yes
					ai_has_anti_tank_brigade = yes
				}
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 1 }
			
		
		# these optional arrays will make the ai add the units to the template once their techs to unlock them have been researched
		# it is important that the template below does not actually start with these units
		
		add_to_temp_array = { either_support = token:anti_air } #once ai researches anti air tech it will automatically add it to this template
		add_to_temp_array = { either_support = token:signal_company }
		add_to_temp_array = { either_regiment = token:anti_tank_brigade }
		add_to_temp_array = { either_regiment_x = 3 } #the x coordinate for the regiment unit, support units will always be placed on x=0
		
		division_template = {
			name = "Infantry Division"	#all templates should use the role specific name, NO nation specific names
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				#anti_tank_brigade = { x = 3 y = 3 } #added via either_regiment
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				#anti_air = { x = 0 y = 2 } #added via either_support, make sure there is space in the x=0 for support!!
				#signal_company = { x = 0 y = 3 } #added via either_support
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 } #one-time effects should check for the ai_template_skip var to be 0
			}
			every_country_division = {
				limit = {
					OR = {
						division_has_battalion_in_template = cavalry
						division_has_battalion_in_template = infantry
					}
				}
				change_division_template = {
					division_template = "Infantry Division" 
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				template_is_complete = yes #this checks that all either_support or either_regiment steps from previous template have been completed
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		# etc etc
	}
	
	ai_infantry_templates = yes #needs to be at start and at the end
	
	
	#############################
	
	# once the templates are written in this folder and the country is in ai_update_country_logic you can go ingame, access the ai templates UI (cogwheel under deployment tab as AI) and press "print" to print the ai template definition for ai_templates/ folder in logs/game.txt
}
ai_allowed_template_units = {
	add_to_temp_array = { supports = token:DIV_HQ }
	add_to_temp_array = { supports = token:DIV_HQ_car }
	add_to_temp_array = { supports = token:DIV_HQ_mech }
	add_to_temp_array = { supports = token:DIV_HQ_arm }
	add_to_temp_array = { supports = token:DIV_HQ_airborne }
	add_to_temp_array = { supports = token:engineer  }
	add_to_temp_array = { supports = token:engineer_mot  }
	add_to_temp_array = { supports = token:engineer_mech  }
	add_to_temp_array = { supports = token:engineer_arm  }
	add_to_temp_array = { supports = token:combat_engineer  }
	add_to_temp_array = { supports = token:combat_engineer_mot  }
	add_to_temp_array = { supports = token:combat_engineer_mech  }
	add_to_temp_array = { supports = token:combat_engineer_arm  }
	add_to_temp_array = { supports = token:airborne_engineer }
	add_to_temp_array = { supports = token:logistics_company }
	add_to_temp_array = { supports = token:logistics_company_car }
	add_to_temp_array = { supports = token:logistics_company_mot  }
	add_to_temp_array = { supports = token:logistics_company_mech }
	add_to_temp_array = { supports = token:field_hospital  }
	add_to_temp_array = { supports = token:field_hospital_cav  }
	add_to_temp_array = { supports = token:recon  }
	add_to_temp_array = { supports = token:recon_cav  }
	add_to_temp_array = { supports = token:recon_mot }
	add_to_temp_array = { supports = token:recon_mech  }
	add_to_temp_array = { supports = token:recon_ac  }
	add_to_temp_array = { supports = token:signal_company }
	add_to_temp_array = { supports = token:signal_company_mot }
	add_to_temp_array = { supports = token:artillery_heavy }
	add_to_temp_array = { supports = token:artillery_heavy_mot }
	add_to_temp_array = { supports = token:rocket_artillery }
	add_to_temp_array = { supports = token:maintenance_company }
	add_to_temp_array = { supports = token:maintenance_company_arm }
	add_to_temp_array = { supports = token:anti_tank  }
	add_to_temp_array = { supports = token:anti_air  }
	add_to_temp_array = { supports = token:anti_air_car }
	add_to_temp_array = { supports = token:anti_air_heavy }
	add_to_temp_array = { supports = token:anti_air_heavy_mot }
	add_to_temp_array = { supports = token:commando }
	add_to_temp_array = { supports = token:amph_support }
	add_to_temp_array = { supports = token:mount_support }
	add_to_temp_array = { supports = token:para_support }
	add_to_temp_array = { supports = token:jungle_support }
	add_to_temp_array = { supports = token:arctic_support }
	add_to_temp_array = { supports = token:desert_support }
	add_to_temp_array = { supports = token:military_police }
	add_to_temp_array = { supports = token:nkvd }
	add_to_temp_array = { supports = token:trm_amphibious_armor_recon }

	add_to_temp_array = { units = token:infantry }
	add_to_temp_array = { units = token:infantry_assault }
	add_to_temp_array = { units = token:light_infantry }
	add_to_temp_array = { units = token:garrison }
	add_to_temp_array = { units = token:partisan }
	add_to_temp_array = { units = token:conscripts }
	add_to_temp_array = { units = token:militia }
	add_to_temp_array = { units = token:communist_militia }
	add_to_temp_array = { units = token:irregulars_unit }
	add_to_temp_array = { units = token:luftwaffe_infantry }

	add_to_temp_array = { units = token:marine }
	add_to_temp_array = { units = token:marine_assault }
	add_to_temp_array = { units = token:gurkha }
	add_to_temp_array = { units = token:mountaineers }
	add_to_temp_array = { units = token:paratrooper }

	add_to_temp_array = { units = token:cavalry }
	add_to_temp_array = { units = token:semi_motorized }
	add_to_temp_array = { units = token:semi_motorized_assault }
	add_to_temp_array = { units = token:motorized  }
	add_to_temp_array = { units = token:motorized_assault  }
	add_to_temp_array = { units = token:motorcycle_infantry  }
	add_to_temp_array = { units = token:mechanized  }
	add_to_temp_array = { units = token:mechanized_assault  }
	add_to_temp_array = { units = token:amphibious_mechanized }
	add_to_temp_array = { units = token:armored_car }

	add_to_temp_array = { units = token:spotter_air }
	add_to_temp_array = { units = token:anti_tank_brigade }
	add_to_temp_array = { units = token:anti_tank_brigade_mot }
	add_to_temp_array = { units = token:airborne_anti_tank_brigade }
	add_to_temp_array = { units = token:anti_tank_brigade_med }
	add_to_temp_array = { units = token:anti_tank_brigade_mot_med }
	add_to_temp_array = { units = token:artillery_brigade }
	add_to_temp_array = { units = token:artillery_brigade_med }
	add_to_temp_array = { units = token:artillery_brigade_mot }
	add_to_temp_array = { units = token:artillery_brigade_mot_med }
	add_to_temp_array = { units = token:mountain_artillery_brigade }
	add_to_temp_array = { units = token:mountain_artillery_brigade_mot }
	add_to_temp_array = { units = token:airborne_artillery_brigade }
	add_to_temp_array = { units = token:rocket_artillery_brigade }
	add_to_temp_array = { units = token:motorized_rocket_brigade }
	
	add_to_temp_array = { units = token:trm_amphibious_armor }
	add_to_temp_array = { units = token:trm_cavalry_armor }
	add_to_temp_array = { units = token:trm_cavalry_cs_armor }
	add_to_temp_array = { units = token:trm_cavalry_amphibious_armor }
	add_to_temp_array = { units = token:trm_heavy_armor }
	add_to_temp_array = { units = token:trm_heavy_cs_armor }
	add_to_temp_array = { units = token:trm_heavy_amphibious_armor }
	add_to_temp_array = { units = token:trm_infantry_armor }
	add_to_temp_array = { units = token:trm_infantry_cs_armor }
	add_to_temp_array = { units = token:trm_infantry_amphibious_armor }
	add_to_temp_array = { units = token:trm_light_armor }
	add_to_temp_array = { units = token:trm_light_cs_armor }
	add_to_temp_array = { units = token:trm_light_amphibious_armor }
	add_to_temp_array = { units = token:trm_medium_advanced_armor }
	add_to_temp_array = { units = token:trm_medium_advanced_cs_armor }
	add_to_temp_array = { units = token:trm_medium_advanced_amphibious_armor }
	add_to_temp_array = { units = token:trm_medium_armor }
	add_to_temp_array = { units = token:trm_medium_cs_armor }
	add_to_temp_array = { units = token:trm_medium_amphibious_armor }
	add_to_temp_array = { units = token:trm_para_armor }
	add_to_temp_array = { units = token:trm_para_airborne_armor }
	add_to_temp_array = { units = token:trm_superheavy_armor }
	add_to_temp_array = { units = token:trm_superheavy_cs_armor }
	add_to_temp_array = { units = token:trm_tankette_armor }
	add_to_temp_array = { units = token:trm_tankette_cs_armor }
	add_to_temp_array = { units = token:trm_tankette_amphibious_armor }
	
	add_to_temp_array = { units = token:trm_heavy_assault_gun }
	add_to_temp_array = { units = token:trm_heavy_tank_destroyer }
	add_to_temp_array = { units = token:trm_heavy_sp_artillery }
	add_to_temp_array = { units = token:trm_infantry_assault_gun }
	add_to_temp_array = { units = token:trm_infantry_tank_destroyer }
	add_to_temp_array = { units = token:trm_infantry_sp_artillery }
	add_to_temp_array = { units = token:trm_light_assault_gun }
	add_to_temp_array = { units = token:trm_light_tank_destroyer }
	add_to_temp_array = { units = token:trm_light_sp_artillery }
	add_to_temp_array = { units = token:trm_medium_advanced_assault_gun }
	add_to_temp_array = { units = token:trm_medium_advanced_tank_destroyer }
	add_to_temp_array = { units = token:trm_medium_advanced_sp_artillery }
	add_to_temp_array = { units = token:trm_medium_assault_gun }
	add_to_temp_array = { units = token:trm_medium_tank_destroyer }
	add_to_temp_array = { units = token:trm_medium_sp_artillery }
	add_to_temp_array = { units = token:trm_superheavy_assault_gun }
	add_to_temp_array = { units = token:trm_superheavy_tank_destroyer }
	add_to_temp_array = { units = token:trm_superheavy_sp_artillery }
	add_to_temp_array = { units = token:trm_tankette_assault_gun }
	add_to_temp_array = { units = token:trm_tankette_tank_destroyer }
	add_to_temp_array = { units = token:trm_tankette_sp_artillery }
}
ai_allowed_template_units_type = {
	add_to_temp_array = { supports = token:DIV_HQ }
	add_to_temp_array = { supports = token:DIV_HQ_car }
	add_to_temp_array = { supports = token:DIV_HQ_mech }
	add_to_temp_array = { supports = token:DIV_HQ_arm }
	add_to_temp_array = { supports = token:DIV_HQ_airborne }
	add_to_temp_array = { supports = token:engineer  }
	add_to_temp_array = { supports = token:engineer_mot  }
	add_to_temp_array = { supports = token:engineer_mech  }
	add_to_temp_array = { supports = token:engineer_arm  }
	add_to_temp_array = { supports = token:combat_engineer  }
	add_to_temp_array = { supports = token:combat_engineer_mot  }
	add_to_temp_array = { supports = token:combat_engineer_mech  }
	add_to_temp_array = { supports = token:combat_engineer_arm  }
	add_to_temp_array = { supports = token:airborne_engineer }
	add_to_temp_array = { supports = token:logistics_company }
	add_to_temp_array = { supports = token:logistics_company_car }
	add_to_temp_array = { supports = token:logistics_company_mot  }
	add_to_temp_array = { supports = token:logistics_company_mech }
	add_to_temp_array = { supports = token:field_hospital  }
	add_to_temp_array = { supports = token:field_hospital_cav  }
	add_to_temp_array = { supports = token:recon  }
	add_to_temp_array = { supports = token:recon_cav  }
	add_to_temp_array = { supports = token:recon_mot }
	add_to_temp_array = { supports = token:recon_mech  }
	add_to_temp_array = { supports = token:recon_ac  }
	add_to_temp_array = { supports = token:signal_company }
	add_to_temp_array = { supports = token:signal_company_mot }
	add_to_temp_array = { supports = token:artillery_heavy }
	add_to_temp_array = { supports = token:artillery_heavy_mot }
	add_to_temp_array = { supports = token:rocket_artillery }
	add_to_temp_array = { supports = token:maintenance_company }
	add_to_temp_array = { supports = token:maintenance_company_arm }
	add_to_temp_array = { supports = token:anti_tank  }
	add_to_temp_array = { supports = token:anti_air  }
	add_to_temp_array = { supports = token:anti_air_car }
	add_to_temp_array = { supports = token:anti_air_heavy }
	add_to_temp_array = { supports = token:anti_air_heavy_mot }
	add_to_temp_array = { supports = token:commando }
	add_to_temp_array = { supports = token:amph_support }
	add_to_temp_array = { supports = token:mount_support }
	add_to_temp_array = { supports = token:para_support }
	add_to_temp_array = { supports = token:jungle_support }
	add_to_temp_array = { supports = token:arctic_support }
	add_to_temp_array = { supports = token:desert_support }
	add_to_temp_array = { supports = token:military_police }
	add_to_temp_array = { supports = token:nkvd }
	add_to_temp_array = { supports = token:trm_amphibious_armor_recon }
	add_to_temp_array = { supports = token:spotter_air }

	add_to_temp_array = { units_infantry = token:infantry }
	add_to_temp_array = { units_infantry = token:infantry_assault }
	add_to_temp_array = { units_infantry = token:light_infantry }
	add_to_temp_array = { units_infantry = token:garrison }
	add_to_temp_array = { units_infantry = token:partisan }
	add_to_temp_array = { units_infantry = token:conscripts }
	add_to_temp_array = { units_infantry = token:militia }
	add_to_temp_array = { units_infantry = token:communist_militia }
	add_to_temp_array = { units_infantry = token:irregulars_unit }
	add_to_temp_array = { units_infantry = token:luftwaffe_infantry }

	add_to_temp_array = { units_special = token:marine }
	add_to_temp_array = { units_special = token:marine_assault }
	add_to_temp_array = { units_special = token:gurkha }
	add_to_temp_array = { units_special = token:mountaineers }
	add_to_temp_array = { units_special = token:paratrooper }

	add_to_temp_array = { units_mobile = token:cavalry }
	add_to_temp_array = { units_mobile = token:semi_motorized }
	add_to_temp_array = { units_mobile = token:semi_motorized_assault }
	add_to_temp_array = { units_mobile = token:motorized  }
	add_to_temp_array = { units_mobile = token:motorized_assault  }
	add_to_temp_array = { units_mobile = token:motorcycle_infantry  }
	add_to_temp_array = { units_mobile = token:mechanized  }
	add_to_temp_array = { units_mobile = token:mechanized_assault  }
	add_to_temp_array = { units_mobile = token:amphibious_mechanized }
	add_to_temp_array = { units_mobile = token:armored_car }

	add_to_temp_array = { units_artillery = token:anti_tank_brigade }
	add_to_temp_array = { units_artillery = token:anti_tank_brigade_mot }
	add_to_temp_array = { units_artillery = token:airborne_anti_tank_brigade }
	add_to_temp_array = { units_artillery = token:anti_tank_brigade_med }
	add_to_temp_array = { units_artillery = token:anti_tank_brigade_mot_med }
	add_to_temp_array = { units_artillery = token:artillery_brigade }
	add_to_temp_array = { units_artillery = token:artillery_brigade_med }
	add_to_temp_array = { units_artillery = token:artillery_brigade_mot }
	add_to_temp_array = { units_artillery = token:artillery_brigade_mot_med }
	add_to_temp_array = { units_artillery = token:mountain_artillery_brigade }
	add_to_temp_array = { units_artillery = token:mountain_artillery_brigade_mot }
	add_to_temp_array = { units_artillery = token:airborne_artillery_brigade }
	add_to_temp_array = { units_artillery = token:rocket_artillery_brigade }
	add_to_temp_array = { units_artillery = token:motorized_rocket_brigade }
	
	add_to_temp_array = { units_armor = token:trm_amphibious_armor }
	add_to_temp_array = { units_armor = token:trm_cavalry_armor }
	add_to_temp_array = { units_armor = token:trm_cavalry_cs_armor }
	add_to_temp_array = { units_armor = token:trm_cavalry_amphibious_armor }
	add_to_temp_array = { units_armor = token:trm_heavy_armor }
	add_to_temp_array = { units_armor = token:trm_heavy_cs_armor }
	add_to_temp_array = { units_armor = token:trm_heavy_amphibious_armor }
	add_to_temp_array = { units_armor = token:trm_infantry_armor }
	add_to_temp_array = { units_armor = token:trm_infantry_cs_armor }
	add_to_temp_array = { units_armor = token:trm_infantry_amphibious_armor }
	add_to_temp_array = { units_armor = token:trm_light_armor }
	add_to_temp_array = { units_armor = token:trm_light_cs_armor }
	add_to_temp_array = { units_armor = token:trm_light_amphibious_armor }
	add_to_temp_array = { units_armor = token:trm_medium_advanced_armor }
	add_to_temp_array = { units_armor = token:trm_medium_advanced_cs_armor }
	add_to_temp_array = { units_armor = token:trm_medium_advanced_amphibious_armor }
	add_to_temp_array = { units_armor = token:trm_medium_armor }
	add_to_temp_array = { units_armor = token:trm_medium_cs_armor }
	add_to_temp_array = { units_armor = token:trm_medium_amphibious_armor }
	add_to_temp_array = { units_armor = token:trm_para_armor }
	add_to_temp_array = { units_armor = token:trm_para_airborne_armor }
	add_to_temp_array = { units_armor = token:trm_superheavy_armor }
	add_to_temp_array = { units_armor = token:trm_superheavy_cs_armor }
	add_to_temp_array = { units_armor = token:trm_tankette_armor }
	add_to_temp_array = { units_armor = token:trm_tankette_cs_armor }
	add_to_temp_array = { units_armor = token:trm_tankette_amphibious_armor }
	
	add_to_temp_array = { units_armor = token:trm_heavy_assault_gun }
	add_to_temp_array = { units_armor = token:trm_heavy_tank_destroyer }
	add_to_temp_array = { units_armor = token:trm_heavy_sp_artillery }
	add_to_temp_array = { units_armor = token:trm_infantry_assault_gun }
	add_to_temp_array = { units_armor = token:trm_infantry_tank_destroyer }
	add_to_temp_array = { units_armor = token:trm_infantry_sp_artillery }
	add_to_temp_array = { units_armor = token:trm_light_assault_gun }
	add_to_temp_array = { units_armor = token:trm_light_tank_destroyer }
	add_to_temp_array = { units_armor = token:trm_light_sp_artillery }
	add_to_temp_array = { units_armor = token:trm_medium_advanced_assault_gun }
	add_to_temp_array = { units_armor = token:trm_medium_advanced_tank_destroyer }
	add_to_temp_array = { units_armor = token:trm_medium_advanced_sp_artillery }
	add_to_temp_array = { units_armor = token:trm_medium_assault_gun }
	add_to_temp_array = { units_armor = token:trm_medium_tank_destroyer }
	add_to_temp_array = { units_armor = token:trm_medium_sp_artillery }
	add_to_temp_array = { units_armor = token:trm_superheavy_assault_gun }
	add_to_temp_array = { units_armor = token:trm_superheavy_tank_destroyer }
	add_to_temp_array = { units_armor = token:trm_superheavy_sp_artillery }
	add_to_temp_array = { units_armor = token:trm_tankette_assault_gun }
	add_to_temp_array = { units_armor = token:trm_tankette_tank_destroyer }
	add_to_temp_array = { units_armor = token:trm_tankette_sp_artillery }
}

ai_update_division_templates = {
	ai_update_country_logic = yes
	
	### SUPPRESSION TEMPLATE
	if = { limit = { NOT = { has_template = "Suppression Division" }  }
		division_template = {
			name = "Suppression Division"
			priority = 1
			
			regiments = {
				garrison = { x = 0 y = 0 }
			}
			
			support = {
				#military_police = { x = 0 y = 0 }
			}
		}
	}
	
	if = { limit = { check_variable = { ai_has_added_template = 1 } }
		update_all_subunits = yes
	}
	
}

	### GER ###

ai_templates_startup/GER = {
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Infanterie-Division"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Panzer-Division '1936'"
		support = { ai_light_armor = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Gebirgsjäger-Brigade"
		support = { ai_mountaineers = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Wachtruppen"
		support = { ai_garrison = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Grenzwacht art"
		support = { ai_garrison = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Grenzwacht"
		support = { ai_garrison = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Infanterie-Division" disband = yes }
	delete_unit_template_and_units = { division_template = "Panzer-Division '1936'" disband = yes }
	delete_unit_template_and_units = { division_template = "Infanterie-Division (halbmot.)" disband = yes }
	delete_unit_template_and_units = { division_template = "Gebirgsjäger-Brigade" disband = yes }
	delete_unit_template_and_units = { division_template = "Wachtruppen" disband = yes }
	delete_unit_template_and_units = { division_template = "Grenzwacht art" disband = yes }
	delete_unit_template_and_units = { division_template = "Grenzwacht" disband = yes }
}

ai_garrison_templates/GER = {
	ai_garrison_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_garrison_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_garrison_template value = 1 }
		
		#delete_unit_template_and_units = {
		#	division_template = "Wachtruppen"
		#	disband = yes
		#}
		#delete_unit_template_and_units = {
		#	division_template = "Gebirgsjäger-Brigade"
		#	disband = yes
		#}		
		
		division_template = {
			name = "Garrison Division"
			template_counter = @C_GARRISON

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }

				artillery_brigade = { x = 2 y = 0 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				
				anti_air = { x = 1 y = 0 }
				anti_tank = { x = 1 y = 1 }
			}

			priority = @GARRISON_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_garrison_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_garrison_template value = 2 }
		
		#delete_unit_template_and_units = {
		#	division_template = "Grenzwacht"
		#	disband = yes
		#}
		#delete_unit_template_and_units = {
		#	division_template = "Grenzwacht art"
		#	disband = yes
		#}		
		
		division_template = {  # +signal
			name = "Garrison Division"
			template_counter = @C_GARRISON

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }

				artillery_brigade = { x = 2 y = 0 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				signal_company = { x = 0 y = 2}
				
				anti_air = { x = 1 y = 0 }
				anti_tank = { x = 1 y = 1 }
			}

			priority = @GARRISON_PRIO
		}
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = garrison
			}
			change_division_template = {
				division_template = "Garrison Division" 
			}
		}
	}
	
	ai_garrison_templates = yes
}

ai_infantry_templates/GER = {
	ai_infantry_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade =  { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				
				logistics_company = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
				field_hospital_cav = { x = 1 y = 2 }
			}

			priority = @INFANTRY_PRIO
		}
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = cavalry
			}
			change_division_template = {
				division_template = "Infantry Division"
			}
		}
		delete_unit_template_and_units = { # AI deploys this template for whatever reason
			division_template = "Kavallerie-Brigade"
			disband = yes
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_infantry_template value = 2 }
		
		division_template = {  # +signal, +combat engineers
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade =  { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				combat_engineer = { x = 0 y = 3}
				
				logistics_company = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
				field_hospital_cav = { x = 1 y = 2 }
				signal_company = { x = 1 y = 3 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_global_flag = fall_of_france # dont upgrade AT in the middle of france invasion pls
				ai_has_anti_tank_brigade_med = yes 
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_infantry_template value = 3 }
		
		division_template = { # +med AT, -AT
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade_med =  { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				combat_engineer = { x = 0 y = 3}
				
				logistics_company = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
				field_hospital_cav = { x = 1 y = 2 }
				signal_company = { x = 1 y = 3 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	
	ai_infantry_templates = yes
}

ai_heavy_infantry_templates/GER = {
	ai_heavy_infantry_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		
		division_template = {
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry_assault = { x = 1 y = 0 }
				infantry_assault = { x = 1 y = 1 }
				infantry_assault = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				artillery_brigade_med = { x = 3 y = 3 }
				anti_tank_brigade =  { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				artillery_heavy = { x = 0 y = 2 }
				recon_cav = { x = 0 y = 3 }
				
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy = { x = 1 y = 2 }
				maintenance_company = { x = 1 y = 3 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS			
				ai_has_logistics_company_mot = yes
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_infantry_template value = 2 }
		
		division_template = {  # +signal, +combat engineers
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry_assault = { x = 1 y = 0 }
				infantry_assault = { x = 1 y = 1 }
				infantry_assault = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				artillery_brigade_med = { x = 3 y = 3 }
				anti_tank_brigade =  { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				artillery_heavy = { x = 0 y = 2 }
				recon_cav = { x = 0 y = 3 }
				combat_engineer = { x = 0 y = 4 }
				
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy = { x = 1 y = 2 }
				maintenance_company = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 2 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#has_global_flag = fall_of_france # dont upgrade AT in the middle of france invasion pls
				ai_has_anti_tank_brigade_med = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_infantry_template value = 3 }
		
		division_template = { # +med AT, -AT
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry_assault = { x = 1 y = 0 }
				infantry_assault = { x = 1 y = 1 }
				infantry_assault = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				artillery_brigade_med = { x = 3 y = 3 }
				anti_tank_brigade_med =  { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				artillery_heavy = { x = 0 y = 2 }
				recon_cav = { x = 0 y = 3 }
				combat_engineer = { x = 0 y = 4 }
				
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy = { x = 1 y = 2 }
				maintenance_company = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 3 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_country_flag = HTD_GER_trm_medium_tank_destroyer_chassis_ger_panzer3_4_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_infantry_template value = 4 }
		
		division_template = { # -1 med art, +1 med SPAG
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry_assault = { x = 1 y = 0 }
				infantry_assault = { x = 1 y = 1 }
				infantry_assault = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				trm_medium_assault_gun = { x = 3 y = 3 }
				anti_tank_brigade_med =  { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				artillery_heavy = { x = 0 y = 2 }
				recon_cav = { x = 0 y = 3 }
				combat_engineer = { x = 0 y = 4 }
				
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy = { x = 1 y = 2 }
				maintenance_company = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	
	ai_heavy_infantry_templates = yes
}

ai_light_armor_templates/GER = {
	ai_light_armor_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_light_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_armor_template value = 1 }
		
		division_template = {
			name = "Light Armor Division"
			template_counter = @C_LIGHT_ARMOR

			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_light_armor = { x = 2 y = 0 }
				trm_light_armor = { x = 2 y = 1 }
				trm_light_armor = { x = 2 y = 2 }
				trm_light_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }

			}

			priority = @LIGHT_ARMOR_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_armor_template value = 1 }
					
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS			
				ai_has_signal_company = yes
				ai_has_logistics_company_mot = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_armor_template value = 2 }
		
		division_template = {
			name = "Light Armor Division"
			template_counter = @C_LIGHT_ARMOR

			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_light_armor = { x = 2 y = 0 }
				trm_light_armor = { x = 2 y = 1 }
				trm_light_armor = { x = 2 y = 2 }
				trm_light_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				signal_company_mot = { x = 0 y = 4 }
				
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }

			}

			priority = @LIGHT_ARMOR_PRIO
		}
	}
	
	ai_light_armor_templates = yes
}

ai_light_armor_alt_templates/GER = {
	ai_light_armor_alt_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_light_armor_alt_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
				has_country_flag = HTD_GER_trm_cavalry_tank_chassis_ger_pz35_1_a 
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_armor_alt_template value = 1 }
		
		division_template = {
			name = "Light Armor Division (alt)"
			template_counter = @C_LIGHT_ARMOR_ALT

			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_cavalry_armor = { x = 2 y = 0 }
				trm_cavalry_armor = { x = 2 y = 1 }
				trm_cavalry_armor = { x = 2 y = 2 }
				trm_cavalry_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				combat_engineer_mot = { x = 0 y = 4 }
				
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }

			}

			priority = @LIGHT_ARMOR_ALT_PRIO
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			843 = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Light Armor Division (alt)\" start_experience_factor = 0.65 start_equipment_factor = 0.01"
					owner = GER
					prioritize_location = 11542 # Prague	
				}
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Light Armor Division (alt)\" start_experience_factor = 0.65 start_equipment_factor = 0.01"
					owner = GER
					prioritize_location = 11542 # Prague	
				}
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Light Armor Division (alt)\" start_experience_factor = 0.65 start_equipment_factor = 0.01"
					owner = GER
					prioritize_location = 11542 # Prague	
				}
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Light Armor Division (alt)\" start_experience_factor = 0.65 start_equipment_factor = 0.01"
					owner = GER
					prioritize_location = 11542 # Prague	
				}
			}
		}
		
	}
	ai_light_armor_alt_templates = yes
}

ai_medium_armor_templates/GER = {
	ai_medium_armor_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_medium_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
				has_country_flag = HTD_GER_trm_medium_tank_chassis_ger_panzer3_1_a
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 1 }
		
		division_template = {
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_cs_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_mot = { x = 0 y = 3 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				recon_ac = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }

			}

			priority = @MEDIUM_ARMOR_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				ai_has_mechanized = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 2 }
		
		division_template = {
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized_assault = { x = 1 y = 1 }
				mechanized_assault = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_cs_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_mot = { x = 0 y = 3 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				recon_ac = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }

			}

			priority = @MEDIUM_ARMOR_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = HTD_GER_trm_light_tank_artillery_chassis_ger_panzer2_3_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 3 }
		
		division_template = {
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized_assault = { x = 1 y = 1 }
				mechanized_assault = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }
				trm_medium_cs_armor = { x = 2 y = 4 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				trm_light_sp_artillery = { x = 3 y = 1 }
				trm_light_sp_artillery = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_mot = { x = 0 y = 3 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				recon_ac = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }

			}

			priority = @MEDIUM_ARMOR_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 3 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = HTD_GER_trm_medium_tank_chassis_ger_panzer3_5_a #1942
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 4 }
		
		division_template = {
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				mechanized = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized_assault = { x = 1 y = 1 }
				mechanized_assault = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }
				trm_medium_armor = { x = 2 y = 4 }

				trm_light_sp_artillery = { x = 3 y = 0 }
				trm_light_sp_artillery = { x = 3 y = 1 }
				trm_light_sp_artillery = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_mot = { x = 0 y = 3 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				recon_ac = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }

			}

			priority = @MEDIUM_ARMOR_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 4 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = HTD_GER_trm_medium_tank_artillery_chassis_ger_panzer34_1_a #1943
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 5 }
		
		division_template = {
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				mechanized = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized_assault = { x = 1 y = 1 }
				mechanized_assault = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }
				trm_medium_armor = { x = 2 y = 4 }

				trm_light_sp_artillery = { x = 3 y = 0 }
				trm_light_sp_artillery = { x = 3 y = 1 }
				trm_medium_sp_artillery = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_arm = { x = 0 y = 3 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				trm_light_armor_recon = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }

			}

			priority = @MEDIUM_ARMOR_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 5 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = HTD_GER_trm_medium_tank_chassis_ger_panzer4_4_b #1944
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 6 }
		
		division_template = {
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				mechanized = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized_assault = { x = 1 y = 1 }
				mechanized_assault = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }
				trm_medium_armor = { x = 2 y = 4 }

				trm_medium_sp_artillery = { x = 3 y = 0 }
				trm_medium_sp_artillery = { x = 3 y = 1 }
				trm_medium_sp_artillery = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_arm = { x = 0 y = 3 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				trm_light_armor_recon = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }

			}

			priority = @MEDIUM_ARMOR_PRIO
		}
	}
	ai_medium_armor_templates = yes
}

ai_medium_armor_alt_templates/GER = {
	ai_medium_armor_alt_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_medium_armor_alt_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = HTD_GER_trm_medium_advanced_tank_chassis_ger_panther_1_b
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_alt_template value = 1 }
		
		division_template = {
			name = "Medium Armor Division (alt)"
			template_counter = @C_MEDIUM_ARMOR_ALT

			regiments = {
				mechanized = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized_assault = { x = 1 y = 1 }
				mechanized_assault = { x = 1 y = 2 }
				
				trm_medium_advanced_armor = { x = 2 y = 0 }
				trm_medium_advanced_armor = { x = 2 y = 1 }
				trm_medium_advanced_armor = { x = 2 y = 2 }
				trm_medium_advanced_armor = { x = 2 y = 3 }
				trm_medium_advanced_armor = { x = 2 y = 4 }

				trm_light_sp_artillery = { x = 3 y = 0 }
				trm_light_sp_artillery = { x = 3 y = 1 }
				trm_medium_sp_artillery = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_arm = { x = 0 y = 3 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				trm_light_armor_recon = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }

			}

			priority = @MEDIUM_ARMOR_ALT_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_alt_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = HTD_GER_trm_medium_advanced_tank_chassis_ger_panther_2_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_alt_template value = 2 }
		
		division_template = {
			name = "Medium Armor Division (alt)"
			template_counter = @C_MEDIUM_ARMOR_ALT

			regiments = {
				mechanized = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized_assault = { x = 1 y = 1 }
				mechanized_assault = { x = 1 y = 2 }
				
				trm_medium_advanced_armor = { x = 2 y = 0 }
				trm_medium_advanced_armor = { x = 2 y = 1 }
				trm_medium_advanced_armor = { x = 2 y = 2 }
				trm_medium_advanced_armor = { x = 2 y = 3 }
				trm_medium_advanced_armor = { x = 2 y = 4 }

				trm_medium_sp_artillery = { x = 3 y = 0 }
				trm_medium_sp_artillery = { x = 3 y = 1 }
				trm_medium_sp_artillery = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_arm = { x = 0 y = 3 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				trm_light_armor_recon = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }

			}

			priority = @MEDIUM_ARMOR_ALT_PRIO
		}
	}
}
ai_heavy_armor_templates/GER = {
	ai_heavy_armor_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = HTD_GER_trm_heavy_tank_chassis_ger_tiger_1_a
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_armor_template value = 1 }
		
		division_template = {
			name = "Heavy Armor Division"
			template_counter = @C_HEAVY_ARMOR

			regiments = {
				mechanized = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized_assault = { x = 1 y = 1 }
				mechanized_assault = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }
				trm_heavy_armor = { x = 2 y = 4 }

				trm_light_sp_artillery = { x = 3 y = 0 }
				trm_light_sp_artillery = { x = 3 y = 1 }
				trm_light_sp_artillery = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_mot = { x = 0 y = 3 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				recon_ac = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }

			}

			priority = @HEAVY_ARMOR_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_armor_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				#ai_has_mechanized_recon = yes TODO
				has_country_flag = HTD_GER_trm_medium_advanced_tank_chassis_ger_panther_1_a	
				date > 1943.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_armor_template value = 2 }
		
		division_template = {
			name = "Heavy Armor Division"
			template_counter = @C_HEAVY_ARMOR

			regiments = {
				mechanized = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized_assault = { x = 1 y = 1 }
				mechanized_assault = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }
				trm_heavy_armor = { x = 2 y = 4 }

				trm_medium_sp_artillery = { x = 3 y = 0 }
				trm_medium_sp_artillery = { x = 3 y = 1 }
				trm_medium_sp_artillery = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_mot = { x = 0 y = 3 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				recon_ac = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }

			}

			priority = @HEAVY_ARMOR_PRIO
		}
	}
	ai_heavy_armor_templates = yes
}

ai_motorized_templates/GER = {
	ai_motorized_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 1 } #2
	add_to_temp_array = { num_valid_templates = 2 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = {
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				semi_motorized_assault = { x = 0 y = 0 }
				semi_motorized_assault = { x = 0 y = 1 }
				semi_motorized_assault = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				semi_motorized = { x = 2 y = 0 }
				semi_motorized = { x = 2 y = 1 }
				semi_motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }


			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				combat_engineer_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				recon_ac = { x = 1 y = 4 }
		
			}

			priority = @MOTORIZED_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				date > 1938.6.1 #TODO add proper check
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 2 }
		
		division_template = { # full motorization
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				combat_engineer_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				recon_ac = { x = 1 y = 4 }
			}

			priority = @MOTORIZED_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_anti_tank_brigade_med = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 3 }
		
		division_template = { # +med AT, -AT
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot_med = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				combat_engineer_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				recon_ac = { x = 1 y = 4 }
			}

			priority = @MOTORIZED_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 3 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				#always = no #TODO #TODO - update templates below
				#ai_can_upgrade_motorized_to_mechanized = yes
				ai_has_mechanized = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 4 }
		
		division_template = { # +2 mechanized, -2 motorized
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				mechanized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				anti_tank_brigade_mot_med = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				combat_engineer_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				recon_ac = { x = 1 y = 4 }
			}

			priority = @MOTORIZED_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 4 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				#ai_can_upgrade_motorized_to_mechanized = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 5 }
		
		division_template = { # +2 mechanized, -2 motorized
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				mechanized = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				anti_tank_brigade_mot_med = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				combat_engineer_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				recon_ac = { x = 1 y = 4 }
			}

			priority = @MOTORIZED_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 5 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				#ai_can_upgrade_motorized_to_mechanized = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 6 }
		
		division_template = { # +2 mechanized, -2 motorized
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				mechanized = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				mechanized = { x = 2 y = 0 }
				mechanized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				anti_tank_brigade_mot_med = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				combat_engineer_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				recon_ac = { x = 1 y = 4 }
			}

			priority = @MOTORIZED_PRIO
		}
	}
	
	ai_motorized_templates = yes
}

ai_mountaineer_templates/GER = {
	ai_mountaineer_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company }
		add_to_temp_array = { either_support = token:combat_engineer }
		
		division_template = {
			name = "Mountaineers Division"
			template_counter = @C_MOUNTAINEER

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }


			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				#combat_engineer = { x = 0 y = 3 }
				#signal_company = { x = 0 y = 4 }
				
				logistics_company = { x = 1 y = 0 }
				field_hospital_cav = { x = 1 y = 1 }
				mount_support = { x = 1 y = 2 }
		
			}

			priority = @MOUNTAINEERS_PRIO
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = mountaineers
				}
				change_division_template = {
					division_template = "Mountaineers Division" 
				}
			}
		}
	}
	
	ai_mountaineer_templates = yes
}

ai_marine_templates/GER = {
	ai_marine_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_marines_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				#date > 1942.1.1
				OR = { 
					owns_state = 845
					NOT = { country_exists = SOV }
					SOV = { is_subject = yes } 
				}
				ai_has_amph_mech = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_marines_template value = 1 }
		
		division_template = {
			name = "Marines Division"
			priority = @MARINES_PRIO
			
			regiments = {
				amphibious_mechanized = { x = 0 y = 0 }
				amphibious_mechanized = { x = 0 y = 1 }
				amphibious_mechanized = { x = 0 y = 2 }
				
				amphibious_mechanized = { x = 1 y = 0 }
				amphibious_mechanized = { x = 1 y = 1 }
				amphibious_mechanized = { x = 1 y = 2 }
				
				trm_medium_amphibious_armor = { x = 2 y = 0 }
				trm_light_amphibious_armor = { x = 2 y = 1 }
				
				mountain_artillery_brigade_mot = { x = 3 y = 0 }
				mountain_artillery_brigade_mot = { x = 3 y = 1 }
				
			}
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_mech = { x = 0 y = 1 }
				logistics_company_car = { x = 0 y = 2 }
				amph_support = { x = 0 y = 3 }
				
				recon_mot = { x = 1 y = 0 }
				anti_air_heavy_mot = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
				maintenance_company = { x = 1 y = 3}
			}
		}
	}
	
	ai_marine_templates = yes
}

	### ITA ###
	
ai_templates_startup/ITA = { #this effect gets run in the history file. if you put in templates with the same name as existing ones it will overwrite those
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Divisione Alpina"
		support = { ai_mountaineers = 1 }
	}

	add_units_to_division_template = {
		template_name = "Divisione di Fanteria"
		support = { ai_infantry = 1 }
	}

	add_units_to_division_template = {
		template_name = "Divisione di Fanteria Motorizzata"
		support = { ai_infantry = 1 } #ai_motorized
	}

	add_units_to_division_template = {
		template_name = "Divisione Celere"
		support = { ai_infantry = 1 } #ai_motorized
	}

	#add_units_to_division_template = {
	#	template_name = "Comando Guardia alla Frontiera"
	#	support = { ai_light_infantry = 1 }
	#}

	add_units_to_division_template = {
		template_name = "Raggruppamento Costiero"
		support = { ai_light_infantry = 1 }
	}

	add_units_to_division_template = {
		template_name = "Reggimento di Fanteria di Marina"
		support = { ai_light_infantry = 1 }
	}

	add_units_to_division_template = {
		template_name = "Divisione di CC.NN."
		support = { ai_light_infantry = 1 }
	}

	add_units_to_division_template = {
		template_name = "6ª Divisione di CC.NN. 'Tevere'"
		support = { ai_light_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "7ª Divisione di CC.NN. 'Cirene'"
		support = { ai_light_infantry = 1 }
	}

	add_units_to_division_template = {
		template_name = "Reggimento di Fanteria d'Africa"
		support = { ai_light_infantry = 1 }
	}

	add_units_to_division_template = {
		template_name = "Brigata di Fanteria Coloniale"
		support = { ai_light_infantry = 1 }
	}

	add_units_to_division_template = {
		template_name = "Brigata Motocorazzata"
		support = { ai_infantry = 1 } #ai_motorized
	}
	
	add_units_to_division_template = {
		template_name = "Comando Truppe di Zara"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Comando Zona Territoriale"
		support = { ai_light_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Divisione di Fanteria Coloniale"
		support = { ai_light_infantry = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Divisione Alpina" disband = yes }
	delete_unit_template_and_units = { division_template = "Divisione di Fanteria" disband = yes }
	delete_unit_template_and_units = { division_template = "Divisione di Fanteria di tipo Metropolitano" disband = yes }
	delete_unit_template_and_units = { division_template = "Divisione di Fanteria Motorizzata" disband = yes }
	delete_unit_template_and_units = { division_template = "Reggimento di Fanteria di Marina" disband = yes }
	delete_unit_template_and_units = { division_template = "Raggruppamento Celere" disband = yes }
	delete_unit_template_and_units = { division_template = "Divisione Celere" disband = yes }
	delete_unit_template_and_units = { division_template = "Comando Guardia alla Frontiera" disband = yes }
	delete_unit_template_and_units = { division_template = "Divisione di Fanteria d'Occupazione" disband = yes }
	delete_unit_template_and_units = { division_template = "Raggruppamento Costiero" disband = yes }
	delete_unit_template_and_units = { division_template = "Divisione Costiera" disband = yes }
	delete_unit_template_and_units = { division_template = "6ª Divisione di CC.NN. 'Tevere'" disband = yes }
	delete_unit_template_and_units = { division_template = "7ª Divisione di CC.NN. 'Cirene'" disband = yes }
	delete_unit_template_and_units = { division_template = "Reggimento di Fanteria d'Africa" disband = yes }
	delete_unit_template_and_units = { division_template = "Brigata di Fanteria Coloniale" disband = yes }
	delete_unit_template_and_units = { division_template = "Brigata Motocorazzata" disband = yes }
	delete_unit_template_and_units = { division_template = "Comando Truppe di Zara" disband = yes }
	delete_unit_template_and_units = { division_template = "Divisione di CC.NN." disband = yes }
	delete_unit_template_and_units = { division_template = "Comando Zona Territoriale" disband = yes }
	delete_unit_template_and_units = { division_template = "Divisione di Fanteria Coloniale" disband = yes }
	
	add_timed_idea = {
		idea = ai_ITA_ethiopia_war
		days = 90
	}
}

ai_infantry_templates/ITA = {
	ai_infantry_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = {
			name = "Infantry Division"
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				artillery_brigade_med = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				field_hospital_cav = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				has_war = no
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_infantry_template value = 2 }
		
		template_tag_current_role = yes
		
		division_template = {
			name = "Infantry Division"
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				artillery_brigade_med = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				field_hospital_cav = { x = 1 y = 0 }
			}
		}
		
		template_force_upgrade = yes
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_signal_company = yes
				has_war = no 
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_infantry_template value = 3 }
		
		division_template = {
			name = "Infantry Division"
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				artillery_brigade_med = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				field_hospital_cav = { x = 1 y = 0 }
				signal_company = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_anti_tank_brigade_med = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_infantry_template value = 4 }
		
		division_template = {
			name = "Infantry Division"
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				artillery_brigade_med = { x = 3 y = 3 }
				anti_tank_brigade_med = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				field_hospital_cav = { x = 1 y = 0 }
				signal_company = { x = 1 y = 1 }
			}
		}
	}
	
	ai_infantry_templates = yes
}

ai_light_infantry_templates/ITA = {
	ai_light_infantry_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_light_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_infantry_template value = 1 }
		
		division_template = {
			name = "Light Infantry Division"
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				
				light_infantry = { x = 1 y = 0 }
				
				light_infantry = { x = 2 y = 0 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				logistics_company = { x = 0 y = 2 }
				artillery_heavy = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_infantry_template value = 2 }
		
		template_tag_current_role = yes 
		
		division_template = { #+anti air, +desert support
			name = "Light Infantry Division"
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				light_infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				logistics_company = { x = 0 y = 2 }
				artillery_heavy = { x = 0 y = 3 }
				signal_company = { x = 0 y = 4 }
			}
		}
		
		template_force_upgrade = yes
	}
	
	ai_light_infantry_templates = yes
}

ai_motorized_templates/ITA = {
	ai_motorized_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = {
			name = "Motorized Division"
			priority = @MOTORIZED_PRIO
			
			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				
				semi_motorized_assault = { x = 2 y = 0 }
				semi_motorized_assault = { x = 2 y = 1 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				date > 1937.3.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 2 }
		
		division_template = { #condense to mot / motcycles
			name = "Motorized Division"
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				
				motorized_assault = { x = 1 y = 0 }
				
				motorcycle_infantry = { x = 2 y = 0 }
				motorcycle_infantry = { x = 2 y = 1 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
			}
		}
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 2 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.9 }
				has_country_flag = { flag = ai_motorized_template value = 2 days > 90 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 3 }
		
		division_template = {
			name = "Motorized Division"
			priority = @MOTORIZED_PRIO
			
			regiments = { #+1 med arty, +1 tankette armor, +1 DIV HQ Car
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				
				motorized_assault = { x = 1 y = 0 }
				
				motorcycle_infantry = { x = 2 y = 0 }
				motorcycle_infantry = { x = 2 y = 1 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				
				trm_tankette_armor = { x = 4 y = 0 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
			}
		}
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 3 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.9 }
				has_country_flag = { flag = ai_motorized_template value = 3 days > 90 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 4 }
		
		division_template = { #rest of support motorized, +1 mot
			name = "Motorized Division"
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized_assault = { x = 1 y = 1 }
				
				motorcycle_infantry = { x = 2 y = 0 }
				motorcycle_infantry = { x = 2 y = 1 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				
				trm_tankette_armor = { x = 4 y = 0 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				anti_air_car = { x = 1 y = 1 }
			}
		}
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 4 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_signal_company = yes
				check_variable = { field_strength > 0.9 }
				has_country_flag = { flag = ai_motorized_template value = 4 days > 90 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 5 }
		
		division_template = { #1 mot, +1 mot cycle, +signal
			name = "Motorized Division"
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized_assault = { x = 1 y = 1 }
				
				motorcycle_infantry = { x = 2 y = 0 }
				motorcycle_infantry = { x = 2 y = 1 }
				motorcycle_infantry = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				artillery_brigade_mot_med = { x = 3 y = 3 }
				
				trm_tankette_armor = { x = 4 y = 0 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				anti_air_car = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
			}
		}
		
	}
	ai_motorized_templates = yes
}

ai_medium_armor_templates/ITA = {
	ai_medium_armor_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_medium_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = HTD_ITA_trm_medium_tank_chassis_ita_m11_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 1 }
		
		division_template = {
			name = "Medium Armor Division"
			priority = @MEDIUM_ARMOR_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				
				logistics_company_mot = { x = 1 y = 0 }
				anti_air_car = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
			}
		}
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			set_temp_variable = { start_xp = 0.5 }
			set_temp_variable = { start_eq = 2 }
			ai_spawn_medium_armor_division = yes 
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = HTD_ITA_trm_medium_tank_artillery_chassis_ita_m15_2_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 2 }
		
		division_template = {
			name = "Medium Armor Division"
			priority = @MEDIUM_ARMOR_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }
				
				trm_medium_advanced_sp_artillery = { x = 3 y = 0 }
				trm_medium_advanced_sp_artillery = { x = 3 y = 1 }
				trm_medium_advanced_sp_artillery = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				
				logistics_company_mot = { x = 1 y = 0 }
				anti_air_car = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
			}
		}
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			set_temp_variable = { start_xp = 0.5 }
			set_temp_variable = { start_eq = 2 }
			ai_spawn_medium_armor_division = yes 
		}
	}
	
	ai_medium_armor_templates = yes
}
ai_heavy_armor_templates/ITA = {
	ai_heavy_armor_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = HTD_ITA_trm_heavy_tank_chassis_ita_p26_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_armor_template value = 1 }
		
		division_template = {
			name = "Heavy Armor Division"
			priority = @HEAVY_ARMOR_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_heavy_armor = { x = 2 y = 0 }
				trm_heavy_armor = { x = 2 y = 1 }
				trm_heavy_armor = { x = 2 y = 2 }
				trm_heavy_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				
				logistics_company_mot = { x = 1 y = 0 }
				anti_air_car = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
			}
		}
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			set_temp_variable = { start_xp = 0.5 }
			set_temp_variable = { start_eq = 2 }
			ai_spawn_heavy_armor_division = yes 
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_armor_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = HTD_ITA_trm_medium_tank_artillery_chassis_ita_m15_2_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_armor_template value = 2 }
		
		division_template = {
			name = "Heavy Armor Division"
			priority = @HEAVY_ARMOR_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_heavy_armor = { x = 2 y = 0 }
				trm_heavy_armor = { x = 2 y = 1 }
				trm_heavy_armor = { x = 2 y = 2 }
				trm_heavy_armor = { x = 2 y = 3 }
				
				trm_medium_advanced_sp_artillery = { x = 3 y = 0 }
				trm_medium_advanced_sp_artillery = { x = 3 y = 1 }
				trm_medium_advanced_sp_artillery = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				
				logistics_company_mot = { x = 1 y = 0 }
				anti_air_car = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
			}
		}
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			set_temp_variable = { start_xp = 0.5 }
			set_temp_variable = { start_eq = 2 }
			ai_spawn_medium_armor_division = yes 
		}
	}
	
	ai_heavy_armor_templates = yes
}
ai_mountaineer_templates/ITA = {
	ai_mountaineer_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				
				logistics_company = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
				mount_support = { x = 1 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_signal_company = yes
			}
		}
		
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_mountaineers_template value = 2 }
		
		division_template = { #+1 mountaineers, +2 pack arty
			name = "Mountaineers Division"
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				
				logistics_company = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
				mount_support = { x = 1 y = 2 }
			}
		}
	}
	ai_mountaineer_templates = yes
}

ai_garrison_templates/ITA = {
	ai_garrison_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_garrison_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_garrison_template value = 1 }
		
		division_template = {
			name = "Garrison Division"
			priority = @GARRISON_PRIO
			
			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				
				artillery_brigade = { x = 1 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				anti_air = { x = 0 y = 2 }
			}
		}
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_garrison_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				date > 1938.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_garrison_template value = 2 }
		
		division_template = { #+1 militia
			name = "Garrison Division"
			priority = @GARRISON_PRIO
			
			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 0 y = 3 }
				
				artillery_brigade = { x = 1 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				anti_air = { x = 0 y = 2 }
			}
		}
	}
	ai_garrison_templates = yes
}

ai_marine_templates/ITA = {
	ai_marine_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_marines_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				date > 1939.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_marines_template value = 1 }
		
		#delete_unit_template_and_units = { division_template = "Reggimento di Fanteria di Marina" disband = yes }
		
		division_template = {
			name = "Marines Division"
			priority = @MARINES_PRIO
			
			regiments = {
				marine = { x = 0 y = 0 }
				marine = { x = 0 y = 1 }
				marine = { x = 0 y = 2 }
				
				marine = { x = 1 y = 0 }
				marine = { x = 1 y = 1 }
				marine = { x = 1 y = 2 }
				
				marine = { x = 2 y = 0 }
				marine = { x = 2 y = 1 }
				marine = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
				
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				anti_air = { x = 1 y = 0 }
				amph_support = { x = 1 y = 1 }
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = marine
				}
				change_division_template = {
					division_template = "Marines Division" 
				}
			}
		}
		
		#set_temp_variable = { start_xp = 0.5 }
		#set_temp_variable = { start_eq = 0.7 }
		#ai_spawn_marines_division = yes
	}
	ai_marine_templates = yes
}

	### SOV ###

ai_templates_startup/SOV = {
	
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Strelkovaya Diviziya 1936 (Regular)"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Gornostrelkovaya Diviziya 1936"
		support = { ai_mountaineers = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Kavaleriyskaya Diviziya 1936 (Regular)"
		support = { ai_light_armor = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Polk Vnutrenney Okhrany NKVD"
		support = { ai_garrison = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Motostrelkovaya Brigada 1936"
		support = { ai_motorized = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Mekhanizirovannaya Brigada 1936 (Mixed)"
		support = { ai_infantry = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Strelkovaya Diviziya 1936 (Regular)" disband = yes }
	delete_unit_template_and_units = { division_template = "Gornostrelkovaya Diviziya 1936" disband = yes }
	delete_unit_template_and_units = { division_template = "Kavaleriyskaya Diviziya 1936 (Regular)" disband = yes }
	delete_unit_template_and_units = { division_template = "Polk Vnutrenney Okhrany NKVD" disband = yes }
	delete_unit_template_and_units = { division_template = "Motostrelkovaya Brigada 1936" disband = yes }
	delete_unit_template_and_units = { division_template = "Mekhanizirovannaya Brigada 1936 (Mixed)" disband = yes }
	
}


ai_garrison_templates/SOV = {
	ai_garrison_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_garrison_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_garrison_template value = 1 }
		
		division_template = {
			name = "Garrison Division"
			template_counter = @C_GARRISON

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				anti_tank_brigade = { x = 2 y = 0 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				
				anti_air = { x = 1 y = 0 }
				artillery_heavy = { x = 1 y = 1 }
			}

			priority = @GARRISON_PRIO
		}
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_garrison_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
				date > 1940.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_garrison_template value = 1 }
		
		division_template = { # +signal
			name = "Garrison Division"
			template_counter = @C_GARRISON

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				anti_tank_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				signal_company = { x = 0 y = 2}
				
				anti_air = { x = 1 y = 0 }
				artillery_heavy = { x = 1 y = 1 }
			}

			priority = @GARRISON_PRIO
		}
	}
	#else_if = {
	#	limit = {
	#		has_country_flag = { flag = ai_garrison_template value = 2 }
	#			
	#		if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
	#		always = no ## sanity check? potato going insane?
	#		#replaceTRM TODO
	#		#else = {
	#		#	#CONDITIONS
	#		#	has_tech = subtech_heavy_soviet_ag_1
	#		#	#always = no #for now #TODO proper trigger
	#		#}
	#	}
	#	set_temp_variable = { ai_has_added_template = 1 } 
	#	modify_country_flag = { flag = ai_garrison_template value = 1 }
	#	
	#	division_template = { # + KV-2
	#		name = "Garrison Division"
	#		template_counter = @C_GARRISON
	#
	#		regiments = {
	#			light_infantry = { x = 0 y = 0 }
	#			light_infantry = { x = 0 y = 1 }
	#			light_infantry = { x = 0 y = 2 }
	#			
	#			light_infantry = { x = 1 y = 0 }
	#			light_infantry = { x = 1 y = 1 }
	#			light_infantry = { x = 1 y = 2 }
	#			
	#			trm_heavy_assault_gun = { x = 2 y = 0 }
	#			anti_tank_brigade = { x = 2 y = 1 }
	#		}
	#		
	#		support = {
	#			DIV_HQ = { x = 0 y = 0 }
	#			engineer = { x = 0 y = 1 }
	#			signal_company = { x = 0 y = 2}
	#			
	#			anti_air = { x = 1 y = 0 }
	#			artillery_heavy = { x = 1 y = 1 }
	#		}
	#
	#		priority = @GARRISON_PRIO
	#	}
	#}
	
	ai_garrison_templates = yes
}

ai_infantry_templates/SOV = {
	ai_infantry_templates = yes

	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company }
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 0 y = 3 }

				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 1 y = 3 }

				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				anti_tank = { x = 0 y = 3 }

				anti_air = { x = 1 y = 0 }
				#signal_company = { x = 1 y = 1 } #either_support
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				template_is_complete = yes
				
				ai_has_anti_tank_brigade_med = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 0 y = 3 }

				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 1 y = 3 }

				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				anti_tank_brigade_med =  { x = 3 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }

				anti_air = { x = 1 y = 0 }
				signal_company = { x = 1 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	
	ai_infantry_templates = yes
}

ai_assault_infantry_templates/SOV = {
	ai_assault_infantry_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_assault_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				ai_has_rocket_artillery = yes
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_assault_infantry_template value = 1 }
		
		division_template = {
			name = "Assault Infantry Division"
			template_counter = @C_ASSAULT_INFANTRY

			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry_assault = { x = 1 y = 0 }
				infantry_assault = { x = 1 y = 1 }
				infantry_assault = { x = 1 y = 2 }
				
				infantry_assault = { x = 2 y = 0 }
				infantry_assault = { x = 2 y = 1 }
				infantry_assault = { x = 2 y = 2 }

				rocket_artillery_brigade = { x = 3 y = 0 }
				rocket_artillery_brigade = { x = 3 y = 1 }
				rocket_artillery_brigade = { x = 3 y = 2 }
				anti_tank_brigade_med = { x = 3 y = 3 }
				
				trm_light_armor = { x = 4 y = 0 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				combat_engineer = { x = 0 y = 1 }
				artillery_heavy = { x = 0 y = 2 }
				trm_tankette_armor_recon = { x = 0 y = 3 }
				
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air = { x = 1 y = 2 }
				signal_company = { x = 1 y = 3 }
			}

			priority = @ASSAULT_INFANTRY_PRIO
		}
	}

	ai_assault_infantry_templates = yes
}

ai_heavy_infantry_templates/SOV = {
	ai_heavy_infantry_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		
		division_template = {
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry_assault = { x = 1 y = 0 }
				infantry_assault = { x = 1 y = 1 }
				infantry_assault = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				anti_tank_brigade =  { x = 3 y = 3 }
				
				trm_light_armor = { x = 4 y = 0 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				artillery_heavy = { x = 0 y = 2 }
				trm_tankette_armor_recon = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy = { x = 1 y = 2 }
				maintenance_company = { x = 1 y = 3 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS			
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_infantry_template value = 2 }
		
		division_template = {  # +signal, +combat engineers
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry_assault = { x = 1 y = 0 }
				infantry_assault = { x = 1 y = 1 }
				infantry_assault = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				anti_tank_brigade = { x = 3 y = 3 }
				
				trm_light_armor = { x = 4 y = 0 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				artillery_heavy = { x = 0 y = 2 }
				trm_tankette_armor_recon = { x = 0 y = 3 }
				combat_engineer = { x = 0 y = 4 }
				
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy = { x = 1 y = 2 }
				maintenance_company = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 2 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_anti_tank_brigade_med = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_infantry_template value = 3 }
		
		division_template = { # +med AT, -AT
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry_assault = { x = 1 y = 0 }
				infantry_assault = { x = 1 y = 1 }
				infantry_assault = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				anti_tank_brigade_med =  { x = 3 y = 3 }
				
				trm_light_armor = { x = 4 y = 0 }
				
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				artillery_heavy = { x = 0 y = 2 }
				trm_tankette_armor_recon = { x = 0 y = 3 }
				combat_engineer = { x = 0 y = 4 }		
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy = { x = 1 y = 2 }
				maintenance_company = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	
	ai_heavy_infantry_templates = yes
}

ai_light_armor_templates/SOV = {
	ai_light_armor_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	add_to_temp_array = { num_valid_templates = 1 } #4
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_light_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_armor_template value = 1 }
		
		division_template = {
			name = "Light Armor Division"
			template_counter = @C_LIGHT_ARMOR

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				trm_light_armor = { x = 2 y = 0 }
				trm_light_armor = { x = 2 y = 1 }
				trm_cavalry_armor = { x = 2 y = 2 }
				trm_cavalry_armor = { x = 2 y = 3 }

				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				anti_tank_brigade = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				anti_air = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }	
				
				logistics_company = { x = 1 y = 0 }
				field_hospital_cav = { x = 1 y = 1 }

			}

			priority = @LIGHT_ARMOR_PRIO
		}
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_armor_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS			
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
				has_country_flag = HTD_SOV_trm_cavalry_tank_cs_chassis_sov_bt7_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_armor_template value = 2 }
		
		division_template = { # +1 cav CS armor, -1 cav armor, + mot. signal, +engineer, +combat engineer
			name = "Light Armor Division"
			template_counter = @C_LIGHT_ARMOR

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				trm_light_armor = { x = 2 y = 0 }
				trm_light_armor = { x = 2 y = 1 }
				trm_cavalry_armor = { x = 2 y = 2 }
				trm_cavalry_cs_armor = { x = 2 y = 3 }

				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				anti_tank_brigade = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				anti_air = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }	
				engineer = { x = 0 y = 3 }
				
				logistics_company = { x = 1 y = 0 }
				field_hospital_cav = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2}
				combat_engineer = { x = 1 y = 3 }

			}

			priority = @LIGHT_ARMOR_PRIO
		}
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_armor_template value = 2 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS			
				has_country_flag = HTD_SOV_trm_light_tank_destroyer_chassis_sov_komsomolets_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_armor_template value = 3 }
		
		division_template = { # partial motorization, +SPTD, -AT
			name = "Light Armor Division"
			template_counter = @C_LIGHT_ARMOR

			regiments = {
				semi_motorized_assault = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized_assault = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				trm_light_armor = { x = 2 y = 0 }
				trm_light_armor = { x = 2 y = 1 }
				trm_cavalry_armor = { x = 2 y = 2 }
				trm_cavalry_cs_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				trm_light_tank_destroyer = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				anti_air_car = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }	
				engineer_mot = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2}
				combat_engineer_mot = { x = 1 y = 3 }

			}

			priority = @LIGHT_ARMOR_PRIO
		}
		
	}
	#else_if = {
	#	limit = {
	#		has_country_flag = { flag = ai_light_armor_template value = 2 }
	#			
	#		if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
	#		always = no ## sanity check? potato going insane?
	#		#replaceTRM TODO
	#		#else = {
	#		#	#CONDITIONS			
	#		#	has_tech = subtech_heavy_soviet_ag_1
	#		#	has_tech = subtech_light_soviet_tank_td_1
	#		#}
	#	}
	#	set_temp_variable = { ai_has_added_template = 1 } 
	#	set_country_flag = { flag = ai_light_armor_template value = 3 }
	#	
	#	division_template = { # + KV-2
	#		name = "Light Armor Division"
	#		template_counter = @C_LIGHT_ARMOR
	#
	#		regiments = {
	#			cavalry = { x = 0 y = 0 }
	#			cavalry = { x = 0 y = 1 }
	#			cavalry = { x = 0 y = 2 }
	#			
	#			cavalry = { x = 1 y = 0 }
	#			cavalry = { x = 1 y = 1 }
	#			cavalry = { x = 1 y = 2 }
	#			cavalry = { x = 1 y = 3 }
	#			
	#			trm_light_armor = { x = 2 y = 0 }
	#			trm_light_armor = { x = 2 y = 1 }
	#
	#			artillery_brigade_med = { x = 3 y = 0 }
	#			artillery_brigade_med = { x = 3 y = 1 }
	#			trm_heavy_assault_gun = { x = 3 y = 2 }
	#			anti_tank_brigade_med = { x = 3 y = 3 }
	#		}
	#		
	#		support = {
	#			DIV_HQ = { x = 0 y = 0 }
	#			anti_air = { x = 0 y = 1 }
	#			recon_mot = { x = 0 y = 2 }	
	#			
	#			logistics_company = { x = 1 y = 0 }
	#			field_hospital_cav = { x = 1 y = 1 }
	#			signal_company_mot = { x = 1 y = 2}
	#
	#		}
	#
	#		priority = @LIGHT_ARMOR_PRIO
	#	}
	#}
	#else_if = {
	#	limit = {
	#		has_country_flag = { flag = ai_light_armor_template value = 3 }
	#			
	#		if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
	#		always = no ## sanity check? potato going insane?
	#		#else = {
	#		#	#CONDITIONS			
	#		#	date > 1943.1.1 # TODO better trigger
	#		#}
	#	}
	#	set_temp_variable = { ai_has_added_template = 1 } 
	#	set_country_flag = { flag = ai_light_armor_template value = 4 }
	#	
	#	division_template = { # cav -> motorized
	#		name = "Light Armor Division"
	#		template_counter = @C_LIGHT_ARMOR
	#
	#		regiments = {
	#			motorized_assault = { x = 0 y = 0 }
	#			motorized = { x = 0 y = 1 }
	#			motorized = { x = 0 y = 2 }
	#			
	#			motorized_assault = { x = 1 y = 0 }
	#			motorized = { x = 1 y = 1 }
	#			motorized = { x = 1 y = 2 }
	#			
	#			trm_light_armor = { x = 2 y = 0 }
	#			trm_light_armor = { x = 2 y = 1 }
	#			trm_light_armor = { x = 2 y = 2 }
	#
	#			artillery_brigade_mot_med = { x = 3 y = 0 }
	#			artillery_brigade_mot_med = { x = 3 y = 1 }
	#			trm_heavy_assault_gun = { x = 3 y = 2 }
	#			trm_light_tank_destroyer = { x = 3 y = 3 }
	#		}
	#		
	#		support = {
	#			DIV_HQ_car = { x = 0 y = 0 }
	#			anti_air_car = { x = 0 y = 1 }
	#			recon_mot = { x = 0 y = 2 }	
	#			engineer_mot = { x = 0 y = 3 }	
	#			
	#			logistics_company_car = { x = 1 y = 0 }
	#			field_hospital = { x = 1 y = 1 }
	#			signal_company_mot = { x = 1 y = 2 }
	#			combat_engineer_mot = { x = 1 y = 3 }
	#		}
	#
	#		priority = @LIGHT_ARMOR_PRIO
	#	}
	#}
	
	ai_light_armor_templates = yes
}

ai_medium_armor_templates/SOV = {
	ai_medium_armor_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	add_to_temp_array = { num_valid_templates = 1 } #3
	add_to_temp_array = { num_valid_templates = 2 } #4
	add_to_temp_array = { num_valid_templates = 3 } #5
	add_to_temp_array = { num_valid_templates = 3 } #6
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_medium_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 1 }
		
		division_template = {
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				semi_motorized_assault = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized_assault = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				trm_cavalry_armor = { x = 2 y = 0 }
				trm_cavalry_armor = { x = 2 y = 1 }
				trm_cavalry_armor = { x = 2 y = 2 }
				trm_cavalry_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				artillery_heavy_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }				
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				recon_ac = { x = 1 y = 3 }

			}

			priority = @MEDIUM_ARMOR_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 2 }
		
		division_template = { # +signal, +combat eng
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				semi_motorized_assault = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized_assault = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				trm_cavalry_armor = { x = 2 y = 0 }
				trm_cavalry_armor = { x = 2 y = 1 }
				trm_cavalry_armor = { x = 2 y = 2 }
				trm_cavalry_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				artillery_heavy_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				combat_engineer_mot = { x = 0 y = 4 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				recon_ac = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }

			}

			priority = @MEDIUM_ARMOR_PRIO
		}		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
					has_country_flag = HTD_SOV_trm_medium_tank_chassis_sov_t34_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_medium_armor_template value = 3 }
		
		division_template = { # +1 med armor, -1 cav armor, full motorization
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_cavalry_armor = { x = 2 y = 0 }
				trm_cavalry_armor = { x = 2 y = 1 }
				trm_cavalry_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				artillery_heavy_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				combat_engineer_mot = { x = 0 y = 4 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				recon_ac = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }

			}

			priority = @MEDIUM_ARMOR_PRIO
		}		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 3 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				date > 1941.1.1 ## TODO add better trigger
				ai_has_engineer_arm = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 4 }
		
		division_template = { # -2 cav armor, +2 med armor, _mech support
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_cavalry_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				artillery_heavy_mot = { x = 0 y = 2 }
				maintenance_company_arm = { x = 0 y = 3 }
				combat_engineer_arm = { x = 0 y = 4 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				recon_ac = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }

			}

			priority = @MEDIUM_ARMOR_PRIO
		}		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 4 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#date > 1942.6.1 ## TODO add better trigger
				ai_has_mechanized = yes
				has_country_flag = HTD_SOV_trm_medium_tank_assault_gun_chassis_sov_t34_3_a 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 5 }
		
		division_template = { # partial mechanization
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				mechanized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				trm_medium_assault_gun = { x = 3 y = 2 }
				trm_medium_tank_destroyer = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				artillery_heavy_mot = { x = 0 y = 2 }
				maintenance_company_arm = { x = 0 y = 3 }
				combat_engineer_arm = { x = 0 y = 4 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				recon_mech = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }

			}

			priority = @MEDIUM_ARMOR_PRIO
		}		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 5 }
	
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				has_country_flag = HTD_SOV_trm_medium_advanced_tank_chassis_sov_t44_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 6 }
		
		division_template = { # upgraded to med advanced armor
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR
	
			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				mechanized = { x = 0 y = 2 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				mechanized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_advanced_armor = { x = 2 y = 3 }
	
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				trm_medium_assault_gun = { x = 3 y = 2 }
				trm_medium_tank_destroyer = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				artillery_heavy_mot = { x = 0 y = 2 }
				maintenance_company_arm = { x = 0 y = 3 }
				combat_engineer_arm = { x = 0 y = 4 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				recon_mech = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }
	
			}
	
			priority = @MEDIUM_ARMOR_PRIO
		}		
	}

	ai_medium_armor_templates = yes
}

ai_heavy_armor_templates/SOV = {
	ai_heavy_armor_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	add_to_temp_array = { num_valid_templates = 2 } #3
	add_to_temp_array = { num_valid_templates = 2 } #4
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				has_country_flag = HTD_SOV_trm_heavy_tank_chassis_sov_kv1_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_heavy_armor_template value = 1 }
		
		division_template = { # prio
			name = "Heavy Armor Division"
			template_counter = @C_HEAVY_ARMOR

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				cavalry = { x = 1 y = 3 }
				
				trm_light_armor = { x = 2 y = 0 }
				trm_infantry_armor = { x = 2 y = 1 }
				trm_heavy_armor = { x = 2 y = 2 }

				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				anti_air = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }	
				
				logistics_company = { x = 1 y = 0 }
				field_hospital_cav = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2}

			}

			priority = @HEAVY_ARMOR_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_armor_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				has_country_flag = HTD_SOV_trm_medium_tank_chassis_sov_t34_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_armor_template value = 2 }
		
		division_template = { # +2 med armor, -1 lt armor, +eng, +hvy arty, +maintenance, +combat eng, aa to hvy aa, semi mot
			name = "Heavy Armor Division"
			template_counter = @C_HEAVY_ARMOR

			regiments = {
				semi_motorized_assault = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized_assault = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				trm_infantry_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_heavy_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				artillery_heavy_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				combat_engineer_mot = { x = 0 y = 4 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				recon_ac = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }

			}

			priority = @HEAVY_ARMOR_PRIO
		}	
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_armor_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				date > 1942.3.1 # TODO add better trigger
				ai_has_engineer_arm = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_armor_template value = 3 }
		
		division_template = { # +1 hvy armor, -1 inf armor, full motorization, full med and hvy armor, mechanized supports
			name = "Heavy Armor Division"
			template_counter = @C_HEAVY_ARMOR

			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_heavy_armor = { x = 2 y = 2 }
				trm_heavy_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				artillery_heavy_mot = { x = 0 y = 2 }
				maintenance_company_arm = { x = 0 y = 3 }
				combat_engineer_arm = { x = 0 y = 4 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				recon_ac = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }

			}

			priority = @HEAVY_ARMOR_PRIO
		}	
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_armor_template value = 3 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				ai_has_engineer_arm = yes
				has_country_flag = HTD_SOV_trm_heavy_tank_chassis_sov_is_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_armor_template value = 4 }
		
		division_template = { # full mechanization
			name = "Heavy Armor Division"
			template_counter = @C_HEAVY_ARMOR

			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				mechanized = { x = 0 y = 2 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				mechanized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_heavy_armor = { x = 2 y = 2 }
				trm_heavy_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				artillery_heavy_mot = { x = 0 y = 2 }
				maintenance_company_arm = { x = 0 y = 3 }
				combat_engineer_arm = { x = 0 y = 4 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				recon_mech = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }

			}

			priority = @C_HEAVY_ARMOR
		}		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_armor_template value = 4 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				has_country_flag = HTD_SOV_trm_medium_advanced_tank_chassis_sov_t44_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_heavy_armor_template value = 5 }
		
		division_template = { # +1 med advanced armor, -1 med armor, SPAG, SPTD, SPAA
			name = "Heavy Armor Division"
			template_counter = @C_HEAVY_ARMOR

			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				mechanized = { x = 0 y = 2 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				mechanized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_advanced_armor = { x = 2 y = 1 }
				trm_heavy_armor = { x = 2 y = 2 }
				trm_heavy_armor = { x = 2 y = 3 }

				artillery_brigade_mot_med = { x = 3 y = 0 }
				trm_heavy_assault_gun = { x = 3 y = 1 }
				trm_heavy_assault_gun = { x = 3 y = 2 }
				trm_heavy_tank_destroyer = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				artillery_heavy_mot = { x = 0 y = 2 }
				maintenance_company_arm = { x = 0 y = 3 }
				combat_engineer_arm = { x = 0 y = 4 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				trm_light_sp_anti_air_support = { x = 1 y = 2 }
				recon_mech = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }

			}

			priority = @C_HEAVY_ARMOR
		}		
	}

	ai_heavy_armor_templates = yes 
}

ai_motorized_templates/SOV = {
	ai_motorized_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	add_to_temp_array = { num_valid_templates = 2 } #3
	add_to_temp_array = { num_valid_templates = 2 } #4
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				#ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company_mot }
		
		division_template = {
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				semi_motorized_assault = { x = 0 y = 0 }
				semi_motorized_assault = { x = 0 y = 1 }
				semi_motorized_assault = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				semi_motorized = { x = 2 y = 0 }
				semi_motorized = { x = 2 y = 1 }
				armored_car = { x = 2 y = 2 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				artillery_brigade_mot_med = { x = 3 y = 3 }
				anti_tank_brigade_mot = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				#signal_company_mot = { x = 0 y = 4 } #either_support
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				artillery_heavy_mot = { x = 1 y = 3 }
			}

			priority = @MOTORIZED_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				date > 1940.3.1
				ai_has_anti_tank_brigade_med = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 2 }
		
		division_template = { # +med AT, -AT, full motorization
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				armored_car = { x = 2 y = 2 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				artillery_brigade_mot_med = { x = 3 y = 3 }
				anti_tank_brigade_mot_med = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				artillery_heavy_mot = { x = 1 y = 4 }
			}

			priority = @MOTORIZED_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				date > 1941.1.1 #TODO better trigger
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 3 }
		
		division_template = { # _mech support
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				mechanized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				mechanized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				armored_car = { x = 2 y = 2 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				artillery_brigade_mot_med = { x = 3 y = 3 }
				anti_tank_brigade_mot_med = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_mech = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				combat_engineer_mech = { x = 0 y = 4 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				artillery_heavy_mot = { x = 1 y = 4 }
			}

			priority = @MOTORIZED_PRIO
		}
	}
	#else_if = {
	#	limit = {
	#		has_country_flag = { flag = ai_motorized_template value = 3 }
	#
	#		if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
	#		else = {	
	#			#CONDITIONS
	#			date > 1944.1.1 #TODO better trigger
	#		}
	#	}
	#	set_temp_variable = { ai_has_added_template = 1 } 
	#	set_country_flag = { flag = ai_motorized_template value = 4 }
	#	
	#	division_template = { # full mechanization
	#		name = "Mechanized Division"
	#		template_counter = @C_MOTORIZED
	#
	#		regiments = {
	#			mechanized_assault = { x = 0 y = 0 }
	#			mechanized_assault = { x = 0 y = 1 }
	#			mechanized_assault = { x = 0 y = 2 }
	#			
	#			mechanized = { x = 1 y = 0 }
	#			mechanized = { x = 1 y = 1 }
	#			mechanized = { x = 1 y = 2 }
	#			
	#			mechanized = { x = 2 y = 0 }
	#			mechanized = { x = 2 y = 1 }
	#			armored_car = { x = 2 y = 2 }
	#			
	#			artillery_brigade_mot_med = { x = 3 y = 0 }
	#			artillery_brigade_mot_med = { x = 3 y = 1 }
	#			artillery_brigade_mot_med = { x = 3 y = 2 }
	#			artillery_brigade_mot_med = { x = 3 y = 3 }
	#			anti_tank_brigade_mot = { x = 3 y = 4 }
	#		}
	#		
	#		support = {
	#			DIV_HQ_mech = { x = 0 y = 0 }
	#			engineer_mech = { x = 0 y = 1 }
	#			recon_ac = { x = 0 y = 2 }
	#			maintenance_company = { x = 0 y = 3 }
	#			combat_engineer_mech = { x = 0 y = 4 }
	#			
	#			logistics_company_mot = { x = 1 y = 0 }
	#			field_hospital = { x = 1 y = 1 }
	#			anti_air_car = { x = 1 y = 2 }
	#			signal_company_mot = { x = 1 y = 3 }
	#			artillery_heavy_mot = { x = 1 y = 4 }
	#		}
	#
	#		priority = @MOTORIZED_PRIO
	#	}
	#}
	
	ai_motorized_templates = yes 
}

ai_mountaineer_templates/SOV = {
	ai_mountaineer_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				#ai_has_signal_company = yes
				#ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company }
		add_to_temp_array = { either_support = token:combat_engineer }
		
		division_template = {
			name = "Mountaineers Division"
			template_counter = @C_MOUNTAINEER

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }


			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				#combat_engineer = { x = 0 y = 3 } either_support
				#signal_company = { x = 0 y = 4 } either_support
				
				logistics_company = { x = 1 y = 0 }
				field_hospital_cav = { x = 1 y = 1 }
				anti_tank = { x = 1 y = 2 }
				mount_support = { x = 1 y = 3 }
		
			}

			priority = @MOUNTAINEERS_PRIO
		}
	}
	
	ai_mountaineer_templates = yes
}

ai_marine_templates/SOV = {
	ai_marine_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_marines_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = HTD_SOV_trm_light_tank_amphibious_chassis_sov_t40_1_a
				OR = { 
					has_war_with = JAP
					has_war_with = ENG
					has_war_with = USA
				}
				ai_has_amph_support = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_marines_template value = 1 }
		
		division_template = {
			name = "Marines Division"
			priority = @MARINES_PRIO
			
			regiments = {
				marine = { x = 0 y = 0 }
				marine = { x = 0 y = 1 }
				marine = { x = 0 y = 2 }
				
				marine = { x = 1 y = 0 }
				marine = { x = 1 y = 1 }
				marine = { x = 1 y = 2 }
				
				marine = { x = 2 y = 0 }
				marine = { x = 2 y = 1 }
				marine = { x = 2 y = 2 }
				
				trm_tankette_amphibious_armor = { x = 3 y = 0 }
				trm_light_amphibious_armor = { x = 3 y = 1 }
				
				mountain_artillery_brigade = { x = 4 y = 0 }
				mountain_artillery_brigade = { x = 4 y = 1 }
				
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				logistics_company_car = { x = 0 y = 2 }
				amph_support = { x = 0 y = 3 }
				
				recon_mot = { x = 0 y = 0 }
				anti_air_heavy = { x = 0 y = 1 }
				signal_company = { x = 0 y = 2 }
			}
		}
	}
	
	ai_marine_templates = yes
}

	### USA ###

ai_templates_startup/USA = {
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Infantry Division (RA)"
		support = { ai_heavy_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Territorial Brigade"
		support = { ai_garrison = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Marine Brigade"
		support = { ai_marines = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Harbor Defenses"
		support = { ai_garrison = 1 }
	}
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Infantry Division (RA)" disband = yes }
	delete_unit_template_and_units = { division_template = "Infantry Division (NG)" disband = yes }
	delete_unit_template_and_units = { division_template = "Territorial Brigade" disband = yes }
	delete_unit_template_and_units = { division_template = "Harbor Defenses Brigade" disband = yes }
}

ai_infantry_templates/USA = {
	ai_infantry_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 4 } #1
	add_to_temp_array = { num_valid_templates = 4 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_infantry_template
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }

			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				anti_tank = { x = 0 y = 3 }				
				
				logistics_company_car = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
				field_hospital = { x = 1 y = 2 }
			
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +signal
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }

			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				anti_tank = { x = 0 y = 3 }				
				
				logistics_company_car = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
				field_hospital = { x = 1 y = 2 }
				signal_company = { x = 1 y = 3 }
		
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				ai_has_combat_engineer = yes
				ai_has_anti_tank_brigade_med = yes
				date > 1941.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +combat engineer, +med AT
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade_med = { x = 3 y = 4 }

			}
			
			support = {
			
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				combat_engineer = { x = 0 y = 3 }				
				
				logistics_company_car = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
				field_hospital = { x = 1 y = 2 }
				signal_company = { x = 1 y = 3 }
			
			}

			priority = @INFANTRY_PRIO
		}
	}
	ai_infantry_templates = yes
}

ai_heavy_infantry_templates/USA = {
	ai_heavy_infantry_templates = yes

	clear_temp_array = num_valid_templates #TODO
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_heavy_infantry_template
		
		division_template = {
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry_assault = { x = 1 y = 0 }
				infantry_assault = { x = 1 y = 1 }
				infantry_assault = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				artillery_brigade_med = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }

			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				artillery_heavy = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				maintenance_company = { x = 1 y = 1 }
				field_hospital = { x = 1 y = 2 }
		
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_anti_air_heavy = yes
				ai_has_combat_engineer = yes
				ai_has_anti_tank_brigade_med = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		
		division_template = { # +signal, +hvy AA, +combat engineer, +med AT
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry_assault = { x = 1 y = 0 }
				infantry_assault = { x = 1 y = 1 }
				infantry_assault = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				artillery_brigade_med = { x = 3 y = 3 }
				anti_tank_brigade_med = { x = 3 y = 4 }

			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				artillery_heavy = { x = 0 y = 3 }
				combat_engineer = { x = 0 y = 4 }
				
				logistics_company_car = { x = 1 y = 0 }
				maintenance_company = { x = 1 y = 1 }
				field_hospital = { x = 1 y = 2 }
				anti_air_heavy = { x = 1 y = 3 }
				signal_company = { x = 1 y = 4 }
		
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	ai_heavy_infantry_templates = yes
}

ai_garrison_templates/USA = {
	ai_garrison_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_garrison_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_garrison_template
		
		division_template = {
			name = "Garrison Division"
			template_counter = @C_GARRISON

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				signal_company = { x = 0 y = 2 }
				
				anti_air = { x = 1 y = 0 }
				anti_tank = { x = 1 y = 1 }
		
			}

			priority = @GARRISON_PRIO
		}
	}
	ai_garrison_templates = yes
}
ai_motorized_templates/USA = {
	ai_motorized_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	add_to_temp_array = { num_valid_templates = 3 } #4
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_artillery_brigade_med_39 = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_motorized_template
		
		division_template = {
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }

			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				logistics_company_mot = { x = 0 y = 3 }
				
				maintenance_company = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
		
			}

			priority = @MOTORIZED_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_anti_tank_brigade_med = yes
				#has_tech = SMG_team2
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # +med AT
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				anti_tank_brigade_mot_med = { x = 3 y = 3 }

			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				logistics_company_mot = { x = 0 y = 3 }
				
				maintenance_company = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
		
			}

			priority = @MOTORIZED_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_mechanized = yes
				num_of_military_factories > 220 
				num_divisions > 80 
				check_variable = { num_battalions_with_type@motorized_assault > 39 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # partial mechanization
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				mechanized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				mechanized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				anti_tank_brigade_mot_med = { x = 3 y = 3 }

			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				logistics_company_mot = { x = 0 y = 3 }
				
				maintenance_company = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
		
			}

			priority = @MOTORIZED_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 3 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = { flag = ai_motorized_template value = 3 days > 180 }
				num_of_military_factories > 300 
				num_divisions > 110
				
				set_temp_variable = { trigger = 0.92 } #set ratio for trigger below
				set_temp_variable = { equipment = token:mechanized_equipment } #set equipment for trigger below
				ai_field_strength_trigger = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # +4 mechanized, -4 motorized, _mech recon
			name = "Motorized Division"
			template_counter = @C_MOTORIZED

			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				mechanized = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				mechanized = { x = 2 y = 0 }
				mechanized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				anti_tank_brigade_mot_med = { x = 3 y = 3 }

			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mech = { x = 0 y = 2 }
				logistics_company_mot = { x = 0 y = 3 }
				
				maintenance_company = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
		
			}

			priority = @MOTORIZED_PRIO
		}
	}
	ai_motorized_templates = yes
}

ai_light_armor_templates/USA = {
	ai_light_armor_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_light_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_combat_engineer =  yes
				has_country_flag = HTD_USA_trm_light_tank_chassis_usa_m2_2_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_light_armor_template
		
		division_template = {
			name = "Light Armor Division"
			template_counter = @C_LIGHT_ARMOR

			regiments = {
				motorized_assault = {x = 0 y = 0}
				motorized = {x = 0 y = 1}
				motorized = {x = 0 y = 2}

				motorized_assault = {x = 1 y = 0}
				motorized = {x = 1 y = 1}
				motorized = {x = 1 y = 2}

				trm_light_armor = {x = 2 y = 0}
				trm_light_armor = {x = 2 y = 1}
				trm_light_armor = {x = 2 y = 2}
				trm_cavalry_armor = {x = 2 y = 3}

				artillery_brigade_mot_med = {x = 3 y = 0}
				artillery_brigade_mot_med = {x = 3 y = 1}
				anti_tank_brigade_mot = {x = 3 y = 2}

			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				logistics_company_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				combat_engineer_mot = { x = 0 y = 4 }

				field_hospital = { x = 1 y = 0 }
			  recon_ac = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}

			priority = @LIGHT_ARMOR_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_armor_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				ai_has_anti_tank_brigade_med = yes
				ai_has_mechanized = yes
				#date > 1942.6.1
				has_country_flag = HTD_USA_trm_cavalry_tank_destroyer_chassis_usa_m18_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_light_armor_template value = 1 } 
		
		division_template = { # +1 lt CS armor, -1 cav armor, partial mechanization, +SPTD, -AT
			name = "Light Armor Division"
			template_counter = @C_LIGHT_ARMOR

			regiments = {
				mechanized_assault = {x = 0 y = 0}
				mechanized = {x = 0 y = 1}
				motorized = {x = 0 y = 2}

				mechanized_assault = {x = 1 y = 0}
				mechanized = {x = 1 y = 1}
				motorized = {x = 1 y = 2}

				trm_light_armor = {x = 2 y = 0}
				trm_light_armor = {x = 2 y = 1}
				trm_light_armor = {x = 2 y = 2}
				trm_light_cs_armor = {x = 2 y = 3}

				artillery_brigade_mot_med = {x = 3 y = 0}
				artillery_brigade_mot_med = {x = 3 y = 1}
				trm_cavalry_tank_destroyer = {x = 3 y = 2}

			}
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_mech = { x = 0 y = 1 }
				logistics_company_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				combat_engineer_mech = { x = 0 y = 4 }

				field_hospital = { x = 1 y = 0 }
			  recon_ac = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}

			priority = @LIGHT_ARMOR_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_armor_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = HTD_USA_trm_cavalry_tank_cs_chassis_usa_m18_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_light_armor_template value = 1 } 
		
		division_template = { # +1 cav CS armor, -1 lt CS armor, +1 SPArt, -1 med art
			name = "Light Armor Division"
			template_counter = @C_LIGHT_ARMOR

			regiments = {
				mechanized_assault = {x = 0 y = 0}
				mechanized = {x = 0 y = 1}
				motorized = {x = 0 y = 2}

				mechanized_assault = {x = 1 y = 0}
				mechanized = {x = 1 y = 1}
				motorized = {x = 1 y = 2}

				trm_light_armor = {x = 2 y = 0}
				trm_light_armor = {x = 2 y = 1}
				trm_light_armor = {x = 2 y = 2}
				trm_cavalry_cs_armor = {x = 2 y = 3}

				artillery_brigade_mot_med = {x = 3 y = 0}
				trm_light_sp_artillery = {x = 3 y = 1}
				trm_cavalry_tank_destroyer = {x = 3 y = 2}

			}
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_mech = { x = 0 y = 1 }
				logistics_company_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				combat_engineer_mech = { x = 0 y = 4 }

				field_hospital = { x = 1 y = 0 }
			  recon_ac = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}

			priority = @LIGHT_ARMOR_PRIO
		}
	}
	
	ai_light_armor_templates = yes
}
ai_medium_armor_templates/USA = {
	ai_medium_armor_templates = yes

	clear_temp_array = num_valid_templates #TODO
	add_to_temp_array = { num_valid_templates = 1 } #1 
	add_to_temp_array = { num_valid_templates = 2 } #2
	add_to_temp_array = { num_valid_templates = 2 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_medium_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_combat_engineer =  yes
				ai_has_mechanized = yes
				ai_has_anti_tank_brigade_med = yes
				ai_has_engineer_arm = yes
				#ai_has_logistics_company_mech = yes
				has_country_flag = HTD_USA_trm_medium_tank_chassis_usa_m2_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_medium_armor_template
		
		division_template = {
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				mechanized_assault = {x = 0 y = 0}
				mechanized = {x = 0 y = 1}
				mechanized = {x = 0 y = 2}

				motorized_assault = {x = 1 y = 0}
				motorized = {x = 1 y = 1}
				motorized = {x = 1 y = 2}

				trm_medium_armor = {x = 2 y = 0}
				trm_medium_armor = {x = 2 y = 1}
				trm_medium_armor = {x = 2 y = 2}
				trm_medium_armor = {x = 2 y = 3}

				artillery_brigade_mot_med = {x = 3 y = 0}
				artillery_brigade_mot_med = {x = 3 y = 1}
				anti_tank_brigade_mot_med = {x = 3 y = 2}

			}
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				logistics_company_mot = { x = 0 y = 2 }
				maintenance_company_arm = { x = 0 y = 3 }
				combat_engineer_arm = { x = 0 y = 4 }

				field_hospital = { x = 1 y = 0 }
				recon_ac = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}

			priority = @MEDIUM_ARMOR_PRIO
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			set_temp_variable = { start_xp = 0.25 }
			set_temp_variable = { start_eq = 0.5 }
			set_temp_variable = { num_spawns = 3 }
			ai_spawn_medium_armor_division = yes 
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = HTD_USA_trm_medium_tank_artillery_chassis_usa_m3_1_b
				has_country_flag = HTD_USA_trm_medium_tank_destroyer_chassis_usa_m4_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_medium_armor_template value = 1 } 
		
		division_template = { # SP arty and AT
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				mechanized_assault = {x = 0 y = 0}
				mechanized = {x = 0 y = 1}
				mechanized = {x = 0 y = 2}

				mechanized_assault = {x = 1 y = 0}
				mechanized = {x = 1 y = 1}
				mechanized = {x = 1 y = 2}
				
				trm_medium_armor = {x = 2 y = 0}
				trm_medium_armor = {x = 2 y = 1}
				trm_medium_armor = {x = 2 y = 2}
				trm_medium_armor = {x = 2 y = 3}

				trm_medium_sp_artillery = {x = 3 y = 0}
				trm_medium_sp_artillery = {x = 3 y = 1}
				trm_medium_tank_destroyer = {x = 3 y = 2}

			}
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				logistics_company_mot = { x = 0 y = 2 }
				maintenance_company_arm = { x = 0 y = 3 }
				combat_engineer_arm = { x = 0 y = 4 }

				field_hospital = { x = 1 y = 0 }
				trm_light_armor_recon = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}

			priority = @MEDIUM_ARMOR_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = HTD_USA_trm_medium_advanced_tank_chassis_usa_m26_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_medium_armor_template value = 1 } 
		
		division_template = { # CS and advanced med armor
			name = "Medium Armor Division"
			template_counter = @C_MEDIUM_ARMOR

			regiments = {
				mechanized_assault = {x = 0 y = 0}
				mechanized = {x = 0 y = 1}
				mechanized = {x = 0 y = 2}

				mechanized_assault = {x = 1 y = 0}
				mechanized = {x = 1 y = 1}
				mechanized = {x = 1 y = 2}

				trm_medium_armor = {x = 2 y = 0}
				trm_medium_armor = {x = 2 y = 1}
				trm_medium_cs_armor = {x = 2 y = 2}
				trm_medium_advanced_armor = {x = 2 y = 3}

				trm_medium_sp_artillery = {x = 3 y = 0}
				trm_medium_sp_artillery = {x = 3 y = 1}
				trm_medium_tank_destroyer = {x = 3 y = 2}

			}
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				logistics_company_mot = { x = 0 y = 2 }
				maintenance_company_arm = { x = 0 y = 3 }
				combat_engineer_arm = { x = 0 y = 4 }

				field_hospital = { x = 1 y = 0 }
				trm_light_armor_recon = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}

			priority = @MEDIUM_ARMOR_PRIO
		}
	}
	# ELOUDA NOTE - Add more versions, latewar with medium_cs_armor in the mix, very late with advanced medium
	
	ai_medium_armor_templates = yes
}
ai_heavy_armor_templates/USA = {
	ai_heavy_armor_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_engineer_arm = yes
				ai_has_logistics_company_mech = yes
				has_country_flag = HTD_USA_trm_heavy_tank_chassis_usa_m6_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_heavy_armor_template
		
		division_template = {
			name = "Heavy Armor Division"
			template_counter = @C_HEAVY_ARMOR

			regiments = {
				mechanized_assault = {x = 0 y = 0}
				mechanized = {x = 0 y = 1}
				mechanized = {x = 0 y = 2}

				mechanized_assault = {x = 1 y = 0}
				mechanized = {x = 1 y = 1}
				mechanized = {x = 1 y = 2}

				trm_medium_armor = {x = 2 y = 0}
				trm_medium_armor = {x = 2 y = 1}
				trm_heavy_armor = {x = 2 y = 2}
				trm_heavy_armor = {x = 2 y = 3}

				artillery_brigade_mot_med = {x = 3 y = 0}
				artillery_brigade_mot_med = {x = 3 y = 1}

			}
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				logistics_company_mech = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }

				field_hospital = { x = 1 y = 0 }
				recon_ac = { x = 1 y = 1 }
				anti_air_heavy_mot = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}

			priority = @HEAVY_ARMOR_PRIO
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			set_temp_variable = { start_xp = 0.25 }
			set_temp_variable = { start_eq = 0.5 }
			set_temp_variable = { num_spawns = 2 }
			ai_spawn_heavy_armor_division = yes 
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_armor_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = HTD_USA_trm_medium_advanced_tank_cs_chassis_usa_m26_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_heavy_armor_template value = 1 } 
		
		division_template = { # 
			name = "Heavy Armor Division"
			template_counter = @C_HEAVY_ARMOR

			regiments = {
				mechanized_assault = {x = 0 y = 0}
				mechanized = {x = 0 y = 1}
				mechanized = {x = 0 y = 2}

				mechanized_assault = {x = 1 y = 0}
				mechanized = {x = 1 y = 1}
				mechanized = {x = 1 y = 2}

				trm_medium_advanced_armor = {x = 2 y = 0}
				trm_medium_advanced_cs_armor = {x = 2 y = 1}
				trm_heavy_armor = {x = 2 y = 2}
				trm_heavy_armor = {x = 2 y = 3}

				artillery_brigade_mot_med = {x = 3 y = 0}
				artillery_brigade_mot_med = {x = 3 y = 1}
				trm_medium_advanced_tank_destroyer = {x = 3 y = 2}

			}
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				logistics_company_mech = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }

				field_hospital = { x = 1 y = 0 }
				recon_ac = { x = 1 y = 1 }
				trm_light_sp_anti_air_support = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}

			priority = @HEAVY_ARMOR_PRIO
		}
	}
	ai_heavy_armor_templates = yes
}
ai_marine_templates/USA = {
	ai_marine_templates = yes
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	if = {
		limit = {
			NOT = { has_country_flag = ai_marines_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				OR = {
					has_war = yes 
					date > 1941.1.1
					num_divisions > 60
				}
				ai_has_anti_tank_brigade_med = yes
				ai_has_anti_air_heavy = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_marines_template
		
		division_template = {
			name = "Marines Division"
			template_counter = @C_MARINES

			regiments = {
				marine = {x = 0 y = 0}
				marine = {x = 0 y = 1}
				marine = {x = 0 y = 2}

				marine = {x = 1 y = 0}
				marine = {x = 1 y = 1}
				marine = {x = 1 y = 2}

				marine = {x = 2 y = 0}
				marine = {x = 2 y = 1}
				marine = {x = 2 y = 2}

				mountain_artillery_brigade = {x = 3 y = 0}
				mountain_artillery_brigade = {x = 3 y = 1}
				mountain_artillery_brigade = {x = 3 y = 2}
				mountain_artillery_brigade = {x = 3 y = 3}
				anti_tank_brigade_med = {x = 3 y = 4}

			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				logistics_company_car = { x = 0 y = 2 }

				amph_support = { x = 1 y = 0 }
				recon_mot = { x = 1 y = 1 }
				signal_company = { x = 1 y = 2 }
				anti_air_heavy = { x = 1 y = 3 }
			}

			priority = @MARINES_PRIO
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			set_temp_variable = { start_xp = 0.25 }
			set_temp_variable = { start_eq = 0.1 }
			set_temp_variable = { num_spawns = 6 }
			ai_spawn_marines_division = yes 
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_marines_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_marine_assault = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_marines_template value = 1 }
		
		division_template = { # 4 asslt marines
			name = "Marines Division"
			template_counter = @C_MARINES

			regiments = {
				marine_assault = {x = 0 y = 0}
				marine_assault = {x = 0 y = 1}
				marine = {x = 0 y = 2}

				marine_assault = {x = 1 y = 0}
				marine = {x = 1 y = 1}
				marine = {x = 1 y = 2}

				marine_assault = {x = 2 y = 0}
				marine = {x = 2 y = 1}
				marine = {x = 2 y = 2}

				mountain_artillery_brigade = {x = 3 y = 0}
				mountain_artillery_brigade = {x = 3 y = 1}
				mountain_artillery_brigade = {x = 3 y = 2}
				mountain_artillery_brigade = {x = 3 y = 3}
				anti_tank_brigade_med = {x = 3 y = 4}

			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				logistics_company_car = { x = 0 y = 2 }

				amph_support = { x = 1 y = 0 }
				recon_mot = { x = 1 y = 1 }
				signal_company = { x = 1 y = 2 }
				anti_air_heavy = { x = 1 y = 3 }
			}

			priority = @MARINES_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_marines_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = { flag = ai_marines_template value = 3 days > 180 }
				
				set_temp_variable = { trigger = 0.95 } #set ratio for trigger below
				set_temp_variable = { equipment = token:SMG_equipment } #set equipment for trigger below
				ai_field_strength_trigger = yes 
			
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_marines_template value = 1 }
		
		division_template = { # 2 more asslt marines
			name = "Marines Division"
			template_counter = @C_MARINES

			regiments = {
				marine_assault = {x = 0 y = 0}
				marine_assault = {x = 0 y = 1}
				marine_assault = {x = 0 y = 2}

				marine_assault = {x = 1 y = 0}
				marine_assault = {x = 1 y = 1}
				marine_assault = {x = 1 y = 2}

				marine = {x = 2 y = 0}
				marine = {x = 2 y = 1}
				marine = {x = 2 y = 2}

				mountain_artillery_brigade = {x = 3 y = 0}
				mountain_artillery_brigade = {x = 3 y = 1}
				mountain_artillery_brigade = {x = 3 y = 2}
				mountain_artillery_brigade = {x = 3 y = 3}
				anti_tank_brigade_med = {x = 3 y = 4}

			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				logistics_company_car = { x = 0 y = 2 }

				amph_support = { x = 1 y = 0 }
				recon_mot = { x = 1 y = 1 }
				signal_company = { x = 1 y = 2 }
				anti_air_heavy = { x = 1 y = 3 }
			}

			priority = @MARINES_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_marines_template value = 3 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = HTD_USA_trm_amph_tank_chassis_usa_lvt_1_a
				ai_USA_has_lvt = yes
			
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_marines_template value = 1 }
		
		division_template = { # mechanization
			name = "Marines Division"
			template_counter = @C_MARINES

			regiments = {
				american_amph_lv_assault = {x = 0 y = 0}
				american_amph_lv = {x = 0 y = 1}
				american_amph_lv = {x = 0 y = 2}

				american_amph_lv_assault = {x = 1 y = 0}
				american_amph_lv = {x = 1 y = 1}
				american_amph_lv = {x = 1 y = 2}

				trm_medium_amphibious_armor = {x = 2 y = 0}
				trm_light_amphibious_armor = {x = 2 y = 1}

				mountain_artillery_brigade_mot = {x = 3 y = 0}
				mountain_artillery_brigade_mot = {x = 3 y = 1}
				anti_tank_brigade_mot_med = {x = 3 y = 2}

			}
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				logistics_company_car = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }

				amph_support = { x = 1 y = 0 }
				recon_mot = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
				anti_air_heavy_mot = { x = 1 y = 3 }
			}

			priority = @MARINES_PRIO
		}
	}
	ai_marine_templates = yes
}

	### JAP ###

ai_templates_startup/JAP = {
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Hohei Shidan"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = { #todo 
		template_name = "Dokuritsu Konsei Ryodan"
		support = { ai_light_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Kihei Ryodan"
		support = { ai_cavalry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Jidousha Shidan"
		support = { ai_light_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Sensha Ryodan"
		support = { ai_light_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Rikusentai"
		support = { ai_marines = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Chuton-chi Shidan"
		support = { ai_garrison = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Hohei Shidan" }
	delete_unit_template_and_units = { division_template = "Dokuritsu Konsei Ryodan" }
	delete_unit_template_and_units = { division_template = "Kihei Ryodan" }
	delete_unit_template_and_units = { division_template = "Jidousha Shidan" }
	delete_unit_template_and_units = { division_template = "Sensha Ryodan" }
	delete_unit_template_and_units = { division_template = "Rikusentai" }
	delete_unit_template_and_units = { division_template = "Chuton-chi Shidan" }
	delete_unit_template_and_units = { division_template = "Tokubetsu Keibitai" }
}

ai_infantry_templates/JAP = {
	ai_infantry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 6 } #1
	add_to_temp_array = { num_valid_templates = 6 } #2
	add_to_temp_array = { num_valid_templates = 6 } #3
	add_to_temp_array = { num_valid_templates = 6 } #4
	add_to_temp_array = { num_valid_templates = 6 } #5
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_infantry_template
		
		#delete_unit_template_and_units = { division_template = "Dokuritsu Konsei Ryodan" disband = yes }
		#delete_unit_template_and_units = { division_template = "Chuton-chi Shidan" disband = yes }
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }

				field_hospital_cav = { x = 1 y = 0 }
			}

			priority = @INFANTRY_PRIO
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					OR = {
						division_has_battalion_in_template = armored_car
						division_has_battalion_in_template = militia
						division_has_battalion_in_template = semi_motorized
					}
				}
				change_division_template = {
					division_template = "Infantry Division" 
				}
			}
			#set_temp_variable = { start_xp = 0.4 }
			#set_temp_variable = { start_eq = 0.01 }
			#set_temp_variable = { num_spawns = 4 }
			#ai_spawn_infantry_division = yes 
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +combat engineer
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }

				field_hospital_cav = { x = 1 y = 0 }
				combat_engineer = { x = 1 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +signal
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }

				field_hospital_cav = { x = 1 y = 0 }
				combat_engineer = { x = 1 y = 1 }
				signal_company = { x = 1 y = 2 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				OR = {
					num_of_military_factories > 140
					num_divisions > 90
				}
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.1 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 inf, +1 mount arty
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }

				field_hospital_cav = { x = 1 y = 0 }
				combat_engineer = { x = 1 y = 1 }
				signal_company = { x = 1 y = 2 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 4 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				#has_tech = improved_antitank
				#ai_has_enemy_with_armor = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +AT
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }

				field_hospital_cav = { x = 1 y = 0 }
				combat_engineer = { x = 1 y = 1 }
				signal_company = { x = 1 y = 2 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	ai_infantry_templates = yes
}

ai_light_infantry_templates/JAP = {
	ai_light_infantry_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 6 } #1
	add_to_temp_array = { num_valid_templates = 6 } #2
	add_to_temp_array = { num_valid_templates = 6 } #3
	add_to_temp_array = { num_valid_templates = 6 } #4
	add_to_temp_array = { num_valid_templates = 6 } #5
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_light_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_infantry_template value = 1 }
		
		division_template = {
			name = "Light Infantry Division"
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				field_hospital = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 2 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					num_of_military_factories > 140
					num_divisions > 90
				}
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.1 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_infantry_template value = 3 }
		
		division_template = { #+1 lt inf, +1 mount arty
			name = "Light Infantry Division"
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				light_infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				field_hospital = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS 
				
				date > 1941.3.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_infantry_template value = 2 }
		
		division_template = { #+jungle support
			name = "Light Infantry Division"
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				light_infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				field_hospital = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				jungle_support = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 3 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				#has_tech = improved_antitank
				#ai_has_enemy_with_armor = yes
				ai_has_anti_air = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_infantry_template value = 4 }
		
		division_template = { #+anti tank, +anti air
			name = "Light Infantry Division"
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				light_infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				field_hospital = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				jungle_support = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
			}
		}
	}
	
	ai_light_infantry_templates = yes
}

ai_cavalry_templates/JAP = {
	ai_cavalry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 5 } #2
	add_to_temp_array = { num_valid_templates = 4 } #3
	add_to_temp_array = { num_valid_templates = 3 } #4
	add_to_temp_array = { num_valid_templates = 3 } #5
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_cavalry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_cavalry_template
		
		division_template = {
			name = "Cavalry Division"
			template_counter = @C_CAVALRY

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
			}

			priority = @CAVALRY_PRIO
		}
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				check_variable = { field_strength > 0.95 }
				date > 1936.6.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
		
		division_template = { # +3 cav
			name = "Cavalry Division"
			template_counter = @C_CAVALRY

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				cavalry = { x = 0 y = 3 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				cavalry = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
			}

			priority = @CAVALRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				check_variable = { field_strength > 0.95 }
				date > 1937.1.1
				
				ai_has_signal_company = yes 
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
		
		division_template = { # +engineer, +combat engineer, +signal, +1 mount arty
			name = "Cavalry Division"
			template_counter = @C_CAVALRY

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				cavalry = { x = 0 y = 3 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				cavalry = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				combat_engineer = { x = 0 y = 3 }
				signal_company = { x = 0 y = 4 }
			}

			priority = @CAVALRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 3 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_anti_air = yes 
				
				OR = {
					date > 1938.6.1
					num_of_military_factories > 110
					ai_JAP_has_defeated_CHI = yes
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
		
		division_template = { # +AA, +1 mount arty, +1 cav
			name = "Cavalry Division"
			template_counter = @C_CAVALRY

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				cavalry = { x = 2 y = 0 }
				cavalry = { x = 2 y = 1 }
				cavalry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				combat_engineer = { x = 0 y = 3 }
				signal_company = { x = 0 y = 4 }
				
				anti_air = { x = 1 y = 0 }
			}

			priority = @CAVALRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 4 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				#has_tech = improved_antitank
				#ai_has_enemy_with_armor = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
		
		division_template = { # +AT
			name = "Cavalry Division"
			template_counter = @C_CAVALRY

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				cavalry = { x = 2 y = 0 }
				cavalry = { x = 2 y = 1 }
				cavalry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				combat_engineer = { x = 0 y = 3 }
				signal_company = { x = 0 y = 4 }
				
				anti_air = { x = 1 y = 0 }
			}

			priority = @CAVALRY_PRIO
		}
	}
	ai_cavalry_templates = yes
}

ai_motorized_templates/JAP = {
	ai_motorized_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 4 } #2
	add_to_temp_array = { num_valid_templates = 4 } #3
	add_to_temp_array = { num_valid_templates = 3 } #4
	add_to_temp_array = { num_valid_templates = 2 } #5
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				num_of_military_factories > 110
				ai_has_signal_company = yes 
				ai_has_combat_engineer = yes
				ai_has_anti_air = yes
				#has_tech = improved_antitank
				#ai_has_enemy_with_armor = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = {
			name = "Motorized Division"
			priority = @MOTORIZED_PRIO
			
			regiments = {
				semi_motorized_assault = { x = 0 y = 0 }
				semi_motorized_assault = { x = 0 y = 1 }
				semi_motorized_assault = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				semi_motorized = { x = 2 y = 0 }
				semi_motorized = { x = 2 y = 1 }
				semi_motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				mountain_artillery_brigade_mot = { x = 3 y = 0 }
				mountain_artillery_brigade_mot = { x = 3 y = 1 }
				mountain_artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				combat_engineer_mot = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
				anti_air_car = { x = 1 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.9 }
				ai_has_mechanized = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_motorized_template value = 2 }
		
		division_template = { # partial mechanization, full motorization
			name = "Motorized Division"
			priority = @MOTORIZED_PRIO
			
			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				mechanized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				mechanized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				mountain_artillery_brigade_mot = { x = 3 y = 0 }
				mountain_artillery_brigade_mot = { x = 3 y = 1 }
				mountain_artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				
				logistics_company_car = { x = 1 y = 0 }
				combat_engineer_mot = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
				anti_air_car = { x = 1 y = 3 }
			}
		}
		
	}
	ai_motorized_templates = yes
}

ai_light_armor_templates/JAP = {
	ai_light_armor_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_light_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				num_of_military_factories > 100
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_armor_template value = 1 }
		
		division_template = {
			name = "Light Armor Division"
			priority = @LIGHT_ARMOR_PRIO
			
			regiments = {
				semi_motorized_assault = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized_assault = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				trm_light_armor = { x = 2 y = 0 }
				trm_light_armor = { x = 2 y = 1 }
				
				mountain_artillery_brigade_mot = { x = 3 y = 0 }
				mountain_artillery_brigade_mot = { x = 3 y = 1 }
				anti_tank_brigade_mot = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				trm_tankette_armor_recon = { x = 0 y = 2 }
				
				logistics_company_car = { x = 1 y = 0 }
				anti_air_car = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
			}
		}
		ai_spawn_light_armor_division = yes 
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_armor_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = HTD_JAP_trm_light_tank_assault_gun_chassis_jap_type95_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_light_armor_template value = 1 }
		
		division_template = { # -1 lt armor, +1 lt CS armor, -1 mount arty, +1 lt asslt gun
			name = "Light Armor Division"
			priority = @LIGHT_ARMOR_PRIO
			
			regiments = {
				semi_motorized_assault = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized_assault = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				trm_light_armor = { x = 2 y = 0 }
				trm_light_cs_armor = { x = 2 y = 1 }
				
				mountain_artillery_brigade_mot = { x = 3 y = 0 }
				trm_light_assault_gun = { x = 3 y = 1 }
				trm_light_tank_destroyer = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				trm_tankette_armor_recon = { x = 0 y = 2 }
				
				logistics_company_car = { x = 1 y = 0 }
				anti_air_car = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
			}
		}
	}
	
	ai_light_armor_templates = yes
}

ai_medium_armor_templates/JAP = {
	ai_medium_armor_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_medium_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				num_of_military_factories > 105 
				has_country_flag = HTD_JAP_trm_medium_tank_cs_chassis_jap_type97_1_a
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_template value = 1 }
		
		#ai_spawn_medium_armor_division = yes 
		division_template = {
			name = "Medium Armor Division"
			priority = @MEDIUM_ARMOR_PRIO
			
			regiments = {
				semi_motorized_assault = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized_assault = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_cs_armor = { x = 2 y = 1 }
				
				mountain_artillery_brigade_mot = { x = 3 y = 0 }
				trm_medium_assault_gun = { x = 3 y = 1 }
				trm_medium_tank_destroyer = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				
				logistics_company_car = { x = 1 y = 0 }
				trm_light_sp_anti_air_support = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
			}
		}
		ai_spawn_medium_armor_division = yes 
	}
	
	ai_medium_armor_templates = yes
}

ai_medium_armor_alt_templates/JAP = {
	ai_medium_armor_alt_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_medium_armor_alt_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				OR = {
					num_of_military_factories > 125
					CHI = { is_subject_of = JAP }
					CHI = { exists = no }
					has_war_with = USA
				}
				has_country_flag = HTD_JAP_trm_medium_advanced_tank_destroyer_chassis_jap_type5_1_a
				check_variable = { field_strength > 0.9 }
				ai_has_mechanized = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_medium_armor_alt_template value = 1 }
		
		division_template = {
			name = "Medium Armor Division (alt)"
			priority = @MEDIUM_ARMOR_PRIO
			
			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				mechanized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_advanced_armor = { x = 2 y = 1 }
				
				mountain_artillery_brigade_mot = { x = 3 y = 0 }
				trm_medium_assault_gun = { x = 3 y = 1 }
				trm_medium_advanced_tank_destroyer = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				
				logistics_company_car = { x = 1 y = 0 }
				anti_air_heavy_mot = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
			}
		}
		ai_spawn_medium_armor_alt_division = yes 
	}
	
	ai_medium_armor_alt_templates = yes
}
	
ai_garrison_templates/JAP = {
	ai_garrison_templates = yes
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_garrison_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_garrison_template
		
		division_template = {
			name = "Garrison Division"
			template_counter = @C_GARRISON

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
			}

			priority = @GARRISON_PRIO
		}
	}
	ai_garrison_templates = yes
}
ai_marine_templates/JAP = {
	ai_marine_templates = yes
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	add_to_temp_array = { num_valid_templates = 3 } #4
	
	#delete_unit_template_and_units = { division_template = "Dokuritsu Konsei Ryodan" disband = yes }
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_marines_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_marines_template
		
		division_template = {
			name = "Marines Division"
			template_counter = @C_MARINES

			regiments = {
				marine = { x = 0 y = 0 }
				marine = { x = 0 y = 1 }
				marine = { x = 0 y = 2 }

				marine = { x = 1 y = 0 }
				marine = { x = 1 y = 1 }
				marine = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				amph_support = { x = 1 y = 0 }
			}

			priority = @MARINES_PRIO
		}
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_marines_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_marines_template value = 1 }
		
		division_template = { # +2 marines, +combat engineer, +logistics
			name = "Marines Division"
			template_counter = @C_MARINES

			regiments = {
				marine = { x = 0 y = 0 }
				marine = { x = 0 y = 1 }
				marine = { x = 0 y = 2 }

				marine = { x = 1 y = 0 }
				marine = { x = 1 y = 1 }

				marine = { x = 2 y = 0 }
				marine = { x = 2 y = 1 }
				marine = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				combat_engineer = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }

				amph_support = { x = 1 y = 0 }
			}

			priority = @MARINES_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_marines_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				date > 1938.1.1
				
				set_temp_variable = { trigger = 0.95 }
				set_temp_variable = { equipment = token:mountain_artillery_equipment }
				ai_field_strength_trigger = yes 
				
				OR = {
					check_variable = { field_strength > 0.96 }
					check_variable = { stock_ratio > 0.1 }
					num_of_military_factories > 120 
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_marines_template value = 1 }
		
		division_template = { # +2 mount arty
			name = "Marines Division"
			template_counter = @C_MARINES

			regiments = {
				marine = { x = 0 y = 0 }
				marine = { x = 0 y = 1 }
				marine = { x = 0 y = 2 }

				marine = { x = 1 y = 0 }
				marine = { x = 1 y = 1 }

				marine = { x = 2 y = 0 }
				marine = { x = 2 y = 1 }
				marine = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				combat_engineer = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }

				amph_support = { x = 1 y = 0 }
			}

			priority = @MARINES_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_marines_template value = 3 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = { flag = ai_marines_template value = 3 days > 140 }
				
				has_tech = improved_antitank
				OR = {
					num_of_military_factories > 130
					num_divisions > 85
				} #do it a bit sooner than infantry
				OR = {
					check_variable = { field_strength > 0.97 }
					check_variable = { stock_ratio > 0.07 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_marines_template value = 1 }
		
		division_template = { # +1 marine, +AT
			name = "Marines Division"
			template_counter = @C_MARINES

			regiments = {
				marine = { x = 0 y = 0 }
				marine = { x = 0 y = 1 }
				marine = { x = 0 y = 2 }

				marine = { x = 1 y = 0 }
				marine = { x = 1 y = 1 }
				marine = { x = 1 y = 2 }

				marine = { x = 2 y = 0 }
				marine = { x = 2 y = 1 }
				marine = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				combat_engineer = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }

				amph_support = { x = 1 y = 0 }
			}

			priority = @MARINES_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_marines_template value = 4 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = HTD_JAP_trm_amph_tank_chassis_jap_type2_1_a
				ai_has_amph_mech = yes
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_marines_template value = 1 }
		
		division_template = { # +1 amphib armor, -3 marines, full mechanization
			name = "Marines Division"
			template_counter = @C_MARINES

			regiments = {
				amphibious_mechanized = { x = 0 y = 0 }
				amphibious_mechanized = { x = 0 y = 1 }
				amphibious_mechanized = { x = 0 y = 2 }

				amphibious_mechanized = { x = 1 y = 0 }
				amphibious_mechanized = { x = 1 y = 1 }
				amphibious_mechanized = { x = 1 y = 2 }
				
				trm_amphibious_armor = { x = 2 y = 0 }
				trm_amphibious_armor = { x = 2 y = 1 }
				
				mountain_artillery_brigade_mot = { x = 3 y = 0 }
				mountain_artillery_brigade_mot = { x = 3 y = 1 }
			}
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				trm_tankette_armor_recon = { x = 0 y = 1 }
				engineer_mech = { x = 0 y = 2 }
				combat_engineer_mech = { x = 0 y = 3 }
				logistics_company_mot = { x = 0 y = 4 }

				amph_support = { x = 1 y = 0 }
				maintenance_company = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
			}

			priority = @MARINES_PRIO
		}
		ai_spawn_marines_division = yes
	}
	ai_marine_templates = yes
}

	### CHI ###

ai_templates_startup/CHI = {

	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Zhengshi Shi"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Qibing Shi"
		support = { ai_cavalry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "De Xie Shi"
		support = { ai_heavy_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "De Xie Shi (armor)"
		support = { ai_heavy_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Zheng Bian Shi"
		support = { ai_heavy_infantry = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Zhengshi Shi" disband = yes }
	delete_unit_template_and_units = { division_template = "Qibing Shi" disband = yes }
	delete_unit_template_and_units = { division_template = "De Xie Shi" disband = yes }
	delete_unit_template_and_units = { division_template = "De Xie Shi (armor)" disband = yes }
	delete_unit_template_and_units = { division_template = "Zheng Bian Shi" disband = yes }
}

ai_infantry_templates/CHI = {
	ai_infantry_templates = yes 
	
	#delete_unit_template_and_units = { division_template = "Sanjiao Jun" disband = yes }
	#delete_unit_template_and_units = { division_template = "Juntuán" disband = yes }
	#delete_unit_template_and_units = { division_template = "Juntuan" disband = yes }
	
	if = {
		limit = {
			check_variable = { ai_template_skip = 0 }
		}
		if = {
			limit = {
				check_variable = { law_level@token:trade_laws < 2 }
			}
			add_ideas = limited_exports
		}
		
		if = {
			limit = {
				date > 1937.3.1
				NOT = { has_completed_focus = KMT_extra_research_slot }
			}
			complete_national_focus = KMT_extra_research_slot
		}
		if = {
			limit = {
				date > 1937.6.1
				has_idea = incompetent_industry_real
			}
			hidden_effect = {
				swap_ideas = {
					remove_idea = incompetent_industry_real
					add_idea = incompetent_industry_real_2
				}
			}
			if = {
				limit = {
					has_idea = incompetent_industry_real_navy
				}
				custom_effect_tooltip = KMT_lower_incompetent_naval_industry_tt
				hidden_effect = {
					swap_ideas = {
						remove_idea = incompetent_industry_real_navy
						add_idea = incompetent_industry_real_2_navy
					}
				}
			}
			if = {
				limit = {
					has_idea = KMT_camco_assembly_plants_1
				}
				swap_ideas = {
					remove_idea = KMT_camco_assembly_plants_1
					add_idea = KMT_camco_assembly_plants_2
				}
			}
			random_owned_controlled_state = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
			}
			random_owned_controlled_state = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
			}
		}
	}
		
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_infantry_template
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				irregulars_unit = { x = 0 y = 0 }
				irregulars_unit = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				
				irregulars_unit = { x = 1 y = 0 }
				irregulars_unit = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				num_divisions > 60
				num_of_military_factories > 39
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 irregulars
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				irregulars_unit = { x = 0 y = 0 }
				irregulars_unit = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				
				irregulars_unit = { x = 1 y = 0 }
				irregulars_unit = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
				irregulars_unit = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				OR = {
					is_subject_of = JAP 
					AND = {
						num_divisions > 70
						num_of_military_factories > 49
					}
				}
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 irregulars
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				irregulars_unit = { x = 0 y = 0 }
				irregulars_unit = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				irregulars_unit = { x = 0 y = 3 }
				
				irregulars_unit = { x = 1 y = 0 }
				irregulars_unit = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
				irregulars_unit = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = { flag = ai_infantry_template value = 3 days > 50 }
				OR = {
					is_subject_of = JAP 
					NOT = { 
						has_idea = incompetent_industry_real
						has_idea = incompetent_industry_real_2 
					}
					AND = {
						num_divisions > 70
						num_of_military_factories > 59
					}
				}
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 mount arty
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				irregulars_unit = { x = 0 y = 0 }
				irregulars_unit = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				irregulars_unit = { x = 0 y = 3 }
				
				irregulars_unit = { x = 1 y = 0 }
				irregulars_unit = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
				irregulars_unit = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 4 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = { flag = ai_infantry_template value = 4 days > 80 }
				OR = {
					is_subject_of = JAP 
					AND = {
						num_divisions > 70
						num_of_military_factories > 69
					}
				}
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 mount arty
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				irregulars_unit = { x = 0 y = 0 }
				irregulars_unit = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				irregulars_unit = { x = 0 y = 3 }
				irregulars_unit = { x = 0 y = 4 }
				
				irregulars_unit = { x = 1 y = 0 }
				irregulars_unit = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
				irregulars_unit = { x = 1 y = 3 }
				irregulars_unit = { x = 1 y = 4 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 5 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = { flag = ai_infantry_template value = 5 days > 80 }
				OR = {
					is_subject_of = JAP 
					AND = {
						num_divisions > 70
						num_of_military_factories > 79
					}
				}
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +4 normal inf, -4 irregulars
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				irregulars_unit = { x = 0 y = 3 }
				irregulars_unit = { x = 0 y = 4 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
				irregulars_unit = { x = 1 y = 3 }
				irregulars_unit = { x = 1 y = 4 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 6 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = { flag = ai_infantry_template value = 6 days > 80 }
				OR = {
					is_subject_of = JAP 
					AND = {
						num_divisions > 70
						num_of_military_factories > 79
					}
				}
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +4 normal inf, -4 irregulars
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 0 y = 3 }
				irregulars_unit = { x = 0 y = 4 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 1 y = 3 }
				irregulars_unit = { x = 1 y = 4 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	
	ai_infantry_templates = yes 
}

ai_militia_templates/CHI = {
	ai_militia_templates = yes 
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_militia_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_militia_template
		
		division_template = {
			name = "Militia Division"
			is_locked = yes
			division_cap = 120

			regiments = {
				irregulars_unit = { x = 0 y = 0 }
				irregulars_unit = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				irregulars_unit = { x = 0 y = 3 }
				
				irregulars_unit = { x = 1 y = 0 }
				irregulars_unit = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
				irregulars_unit = { x = 1 y = 3 }
			}

			priority = @MILITIA_PRIO
		}
		set_division_force_allow_recruiting = {
			division_template = "Militia Division"
		}
	}
	
	# TODO gradually upgrade them to infantry if stockpiles / situation allows it
	
	ai_militia_templates = yes 
}
ai_heavy_infantry_templates/CHI = {
	ai_heavy_infantry_templates = yes 
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_heavy_infantry_template
		
		division_template = {
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				anti_air = { x = 0 y = 3 }
				anti_tank = { x = 0 y = 4 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_equipment = { artillery_equipment > 180 } #be careful, we might not even produce it but got it from foreign countries
			}
		}
		
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		
		division_template = { # +arty
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				anti_air = { x = 0 y = 3 }
				anti_tank = { x = 0 y = 4 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				#check_variable = { ai_infantry_template = 4 }
		
				num_divisions > 60
				num_of_military_factories > 59
				OR = {
					check_variable = { field_strength > 0.96 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		
		division_template = { # +1 arty
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				anti_air = { x = 0 y = 3 }
				anti_tank = { x = 0 y = 4 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 3 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = { flag = ai_heavy_infantry_template value = 3 days > 80 }
		
				num_divisions > 60
				num_of_military_factories > 59
				OR = {
					check_variable = { field_strength > 0.96 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		
		division_template = { # support to normal AT
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
				anti_tank_brigade = { x = 2 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				anti_air = { x = 0 y = 3 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 4 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = { flag = ai_heavy_infantry_template value = 4 days > 80 }
		
				num_divisions > 60
				num_of_military_factories > 59
				OR = {
					check_variable = { field_strength > 0.96 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		
		division_template = { # mount to normal arty
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 0 y = 3 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				artillery_brigade = { x = 2 y = 2 }
				anti_tank_brigade = { x = 2 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				anti_air = { x = 0 y = 3 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 5 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = { flag = ai_heavy_infantry_template value = 5 days > 80 }
		
				num_divisions > 60
				num_of_military_factories > 69
				OR = {
					check_variable = { field_strength > 0.96 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		
		division_template = { # +1 inf regt, +1 arty
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				anti_air = { x = 0 y = 3 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 6 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				has_country_flag = { flag = ai_heavy_infantry_template value = 6 days > 80 }
		
				num_divisions > 60
				num_of_military_factories > 69
				OR = {
					check_variable = { field_strength > 0.96 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		
		division_template = { # +logistics, +signal
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				anti_air = { x = 0 y = 3 }
				
				logistics_company = { x = 1 y = 0 } 
				signal_company = { x = 1 y = 1 } 
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	ai_heavy_infantry_templates = yes
}
ai_cavalry_templates/CHI = {
	ai_cavalry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_cavalry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_cavalry_template
		
		division_template = {
			name = "Cavalry Division"
			template_counter = @C_CAVALRY

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				recon_cav = { x = 0 y = 1 }
			}

			priority = @CAVALRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				check_variable = { field_strength > 0.95 }
				check_variable = { num_equipment@mountain_artillery_equipment > 30 }
				OR = {
					num_of_military_factories > 40 
					check_variable = { num_equipment@mountain_artillery_equipment > 200 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
		
		division_template = { # +mount arty
			name = "Cavalry Division"
			template_counter = @C_CAVALRY

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				recon_cav = { x = 0 y = 1 }
			}

			priority = @CAVALRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				check_variable = { field_strength > 0.95 }
				check_variable = { num_equipment@mountain_artillery_equipment > 50 }
				OR = {
					num_of_military_factories > 49 
					check_variable = { num_equipment@mountain_artillery_equipment > 250 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
		
		division_template = { # +1 mount arty
			name = "Cavalry Division"
			template_counter = @C_CAVALRY

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				recon_cav = { x = 0 y = 1 }
			}

			priority = @CAVALRY_PRIO
		}
	}
	
	ai_cavalry_templates = yes
}

ai_mountaineer_templates/PRC = {
	ai_mountaineer_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { ai_division_limit_ratio > 0.35 }
				
				check_variable = { field_strength > 0.95 }
				
				ai_has_mountaineers = yes 
				ai_has_mountain_artillery_brigade = yes 
				
				ai_has_DIV_HQ = yes 
				ai_has_engineer = yes 
				
				#check_variable = { mtth:ai_num_of_military_factories > 10 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { field_strength > 0.9 }
				
				ai_has_signal_company = yes
				ai_has_recon_cav = yes
				
				check_variable = { mtth:ai_num_of_military_factories > 24 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +recon, +signal
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { field_strength > 0.95 }
				
				check_variable = { mtth:ai_num_of_military_factories > 29 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +1 mount arty
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				mountaineers = { x = 0 y = 3 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	ai_mountaineer_templates = yes
}

	##############################
	#### COMMONWEALTH NATIONS ####
	##############################

		##### ENG #####

ai_templates_startup/ENG = {
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Infantry Division 2"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Territorial Division"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Cavalry Brigade"
		support = { ai_motorized = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Army Tank Brigade"
		support = { ai_motorized = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Motorised Brigade"
		support = { ai_motorized = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Motorised Division - 1936"
		support = { ai_motorized = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Fortress Garrison"
		support = { ai_garrison = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Regular Garrison"
		support = { ai_garrison = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Colonial Volunteer Fortress Garrison"
		support = { ai_garrison = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Small Colonial Garrison"
		support = { ai_garrison = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Local Defence Force"
		support = { ai_light_infantry = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Infantry Division (ME)" disband = yes }
	delete_unit_template_and_units = { division_template = "Infantry Division 2" disband = yes }
	delete_unit_template_and_units = { division_template = "Territorial Division" disband = yes }
	delete_unit_template_and_units = { division_template = "Royal Marines" disband = yes }
	delete_unit_template_and_units = { division_template = "Motorised Division - 1936" disband = yes }
	delete_unit_template_and_units = { division_template = "Cavalry Brigade" disband = yes }
	delete_unit_template_and_units = { division_template = "Army Tank Brigade" disband = yes }
	delete_unit_template_and_units = { division_template = "Motorised Brigade" disband = yes }
	delete_unit_template_and_units = { division_template = "Fortress Garrison" disband = yes }
	delete_unit_template_and_units = { division_template = "Regular Garrison" disband = yes }
	delete_unit_template_and_units = { division_template = "Colonial Volunteer Fortress Garrison" disband = yes }
	delete_unit_template_and_units = { division_template = "Local Defence Force" disband = yes }
	delete_unit_template_and_units = { division_template = "Small Colonial Garrison" disband = yes }
	delete_unit_template_and_units = { division_template = "African Division" disband = yes }
}

ai_garrison_templates/ENG = {
	ai_garrison_templates = yes 
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_garrison_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_garrison_template
		
		division_template = {
			name = "Garrison Division"
			division_names_group = ENG_GAR_01
			template_counter = @C_GARRISON
			priority = @GARRISON_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
			}
		}
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_garrison_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					ai_has_signal_company = yes
					ai_has_anti_air = yes
					ai_has_anti_tank = yes
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_garrison_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company }
		add_to_temp_array = { either_support = token:anti_air }
		add_to_temp_array = { either_support = token:anti_tank }
		
		template_tag_current_role = yes 
		
		division_template = {
			name = "Garrison Division"
			division_names_group = ENG_GAR_01
			template_counter = @C_GARRISON
			priority = @GARRISON_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				#signal_company = { x = 0 y = 2 }
				#anti_air = { x = 0 y = 3 }
				#anti_tank = { x = 0 y = 4 }
				
			}
		}
		
		template_force_upgrade = yes
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_garrison_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				template_is_complete = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_garrison_template value = 1 }
		
		template_tag_current_role = yes 
		
		division_template = {
			name = "Garrison Division"
			division_names_group = ENG_GAR_01
			template_counter = @C_GARRISON
			priority = @GARRISON_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				signal_company = { x = 0 y = 2 }
				
				anti_air = { x = 1 y = 0 }
				anti_tank = { x = 1 y = 1 }
			}
		}
		
		template_force_upgrade = yes
	}
	ai_garrison_templates = yes 
}
ai_light_infantry_templates/ENG = {
	ai_light_infantry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	add_to_temp_array = { num_valid_templates = 2 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_light_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_light_infantry_template
		
		#delete_unit_template_and_units = {
		#	division_template = "African Division"
		#	disband = yes
		#}
		
		division_template = {
			name = "Light Infantry Division" 	
			division_names_group = ENG_COL_01
			template_counter = 382
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }	
				desert_support = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.9 }
				
				OR = {
					ai_has_combat_engineer = yes
					ai_has_signal_company = yes
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_light_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:combat_engineer }
		add_to_temp_array = { either_support = token:signal_company }
		
		division_template = {
			name = "Light Infantry Division" 	
			division_names_group = ENG_COL_01
			template_counter = 382
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				anti_tank_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				anti_air = { x = 0 y = 2 }
				#signal_company = { x = 0 y = 3 }
				#combat_engineer = { x = 0 y = 4 }
				
				desert_support = { x = 1 y = 0 }
				recon_cav = { x = 1 y = 1 }
			}
		}
	}
	ai_light_infantry_templates = yes 
}
ai_infantry_templates/ENG = {
	ai_infantry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_infantry_template
		
		division_template = {
			name = "Infantry Division"
			division_names_group = ENG_INF_01
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				
				logistics_company = { x = 1 y = 0 }
				field_hospital_cav = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				OR = {
					ai_has_signal_company = yes
					ai_has_anti_air_heavy = yes
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company }
		add_to_temp_array = { either_support = token:anti_air_heavy }
		
		division_template = { # +signal
			name = "Infantry Division"
			division_names_group = ENG_INF_01
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				#anti_air_heavy = { x = 0 y = 2 } #added via either_support
				#signal_company = { x = 0 y = 3 } #added via either_support
				
				logistics_company = { x = 1 y = 0 }
				field_hospital_cav = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.9 }
				
				num_of_military_factories > 180
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
	
		division_template = {
			name = "Infantry Division"
			division_names_group = ENG_INF_01
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				anti_air_heavy = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				
				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
			}
		}
	}
	ai_infantry_templates = yes 
}
ai_heavy_infantry_templates/ENG = {
	ai_heavy_infantry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				num_of_military_factories > 180
				
				ai_has_combat_engineer = yes
				ai_has_signal_company = yes
				ai_has_anti_air_heavy = yes
				ai_has_spotter_air = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_heavy_infantry_template
		
		division_template = {
			name = "Heavy Infantry Division"
			division_names_group = ENG_INF_01
			template_counter = @C_HEAVY_INFANTRY
			priority = @HEAVY_INFANTRY_PRIO
			
			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry_assault = { x = 1 y = 0 }
				infantry_assault = { x = 1 y = 1 }
				infantry_assault = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
								
				artillery_brigade_med = { x = 3 y = 0 }
				artillery_brigade_med = { x = 3 y = 1 }
				artillery_brigade_med = { x = 3 y = 2 }
				artillery_brigade_med = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				spotter_air = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				anti_air_heavy = { x = 0 y = 3 }
				
				logistics_company_mot = { x = 1 y = 0 }
				combat_engineer = { x = 1 y = 1 }
				maintenance_company = { x = 1 y = 2 }
				signal_company = { x = 1 y = 3 }
			}
		}
	}
	ai_heavy_infantry_templates = yes 
}
ai_motorized_templates/ENG = {
	ai_motorized_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 4 } #2
	add_to_temp_array = { num_valid_templates = 4 } #3
	add_to_temp_array = { num_valid_templates = 3 } #4
	add_to_temp_array = { num_valid_templates = 2 } #5
	add_to_temp_array = { num_valid_templates = 1 } #6
	add_to_temp_array = { num_valid_templates = 1 } #7
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_motorized_template
		
		division_template = {
			name = "Motorized Division"
			division_names_group = ENG_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				artillery_brigade_mot = { x = 2 y = 0 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1937.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # +1 mot, +1 arty, +AA
			name = "Motorized Division"
			division_names_group = ENG_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				anti_tank_brigade_mot = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				anti_air_car = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
				
				maintenance_company = { x = 1 y = 0 }
				logistics_company_car = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1938.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # +1 mot, +1 AC, +1 arty
			name = "Motorized Division"
			division_names_group = ENG_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				armored_car = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				anti_air_car = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
				
				maintenance_company = { x = 1 y = 0 }
				logistics_company_car = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_combat_engineer = yes
				ai_has_signal_company = yes
				date > 1939.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # +1 mot, +combat engineer, +signal
			name = "Motorized Division"
			division_names_group = ENG_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				anti_air_car = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
				
				maintenance_company = { x = 1 y = 0 }
				logistics_company_car = { x = 1 y = 1 }
				combat_engineer_mot = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 4 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				num_of_military_factories > 150
				ai_has_mechanized = yes
				date > 1941.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # partial mechanization, +1 med arty, -1 arty
			name = "Motorized Division"
			division_names_group = ENG_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				anti_air_car = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
				
				maintenance_company = { x = 1 y = 0 }
				logistics_company_car = { x = 1 y = 1 }
				combat_engineer_mot = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 5 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1942.1.1
				num_of_military_factories > 180
				check_variable = { field_strength > 0.95 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # +2 mechanized, -2 motorized, +1 med arty, -1 arty, +hvy arty
			name = "Motorized Division"
			division_names_group = ENG_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				mechanized = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				anti_air_car = { x = 0 y = 3 }
				artillery_heavy_mot = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				maintenance_company = { x = 1 y = 1 }
				logistics_company_car = { x = 1 y = 2 }
				combat_engineer_mot = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 6 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1943.1.1
				ai_has_anti_air_heavy = yes
				num_of_military_factories > 240
				check_variable = { field_strength > 0.95 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # +2 mechanized, -2 motorized, +1 med arty, -1 arty
			name = "Motorized Division"
			division_names_group = ENG_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				mechanized = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				mechanized = { x = 2 y = 0 }
				mechanized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				armored_car = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				anti_air_heavy_mot = { x = 0 y = 3 }
				artillery_heavy_mot = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				maintenance_company = { x = 1 y = 1 }
				logistics_company_car = { x = 1 y = 2 }
				combat_engineer_mot = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }
			}
		}
	}
	ai_motorized_templates = yes 
}
ai_medium_armor_templates/ENG = {
	ai_medium_armor_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	add_to_temp_array = { num_valid_templates = 1 } #3
	add_to_temp_array = { num_valid_templates = 1 } #4
	add_to_temp_array = { num_valid_templates = 2 } #5
	add_to_temp_array = { num_valid_templates = 2 } #6
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_medium_armor_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_country_flag = HTD_ENG_trm_cavalry_tank_chassis_eng_mk1_1_a
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_medium_armor_template
		
		division_template = {
			name = "Medium Armor Division"
			division_names_group = ENG_ARM_01
			template_counter = @C_MEDIUM_ARMOR
			priority = @MEDIUM_ARMOR_PRIO
			
			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_light_armor = { x = 2 y = 0 }
				trm_cavalry_armor = { x = 2 y = 1 }
				trm_cavalry_armor = { x = 2 y = 2 }
				trm_cavalry_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_mot = { x = 0 y = 3 }
				signal_company_mot = { x = 0 y = 4 }

				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				recon_ac = { x = 1 y = 3 }

			}
		}
		ai_spawn_medium_armor_division = yes
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_anti_tank_brigade_med = yes
				has_country_flag = HTD_ENG_trm_cavalry_tank_cs_chassis_eng_mk5_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_medium_armor_template value = 1 }
		
		division_template = { # +1 cav CS armor, -1 lt armor, +med AT, -AT
			name = "Medium Armor Division"
			division_names_group = ENG_ARM_01
			template_counter = @C_MEDIUM_ARMOR
			priority = @MEDIUM_ARMOR_PRIO
			
			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_cavalry_armor = { x = 2 y = 0 }
				trm_cavalry_armor = { x = 2 y = 1 }
				trm_cavalry_armor = { x = 2 y = 2 }
				trm_cavalry_cs_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot_med = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_mot = { x = 0 y = 3 }
				signal_company_mot = { x = 0 y = 4 }

				logistics_company_car = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
				recon_ac = { x = 1 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_country_flag = HTD_ENG_trm_medium_tank_chassis_eng_mk7_1_a
				ai_has_mechanized = yes
				#ai_has_truck_logistics = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_medium_armor_template value = 1 }
		
		division_template = { # partial mechanization, +2 mediums, -2 cavalries, SPAA, tankette tank recon
			name = "Medium Armor Division"
			division_names_group = ENG_ARM_01
			template_counter = @C_MEDIUM_ARMOR
			priority = @MEDIUM_ARMOR_PRIO
			
			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				mechanized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_cavalry_armor = { x = 2 y = 0 }
				trm_cavalry_cs_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot_med = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_mech = { x = 0 y = 3 }
				signal_company_mot = { x = 0 y = 4 }

				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				trm_light_sp_anti_air_support = { x = 1 y = 2 }
				trm_tankette_armor_recon = { x = 1 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1943.1.1
				#has_country_flag = {flag = ai_heavy_armor_template value = 3 } ## Free Trucks for Heavy Tank Div
				has_country_flag = HTD_ENG_trm_medium_tank_cs_chassis_eng_mk8_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_medium_armor_template value = 1 }
		
		division_template = { # full medium armor, full mechanization, SPArt, SPTD, cavalry SPAA and tank recon
			name = "Medium Armor Division"
			division_names_group = ENG_ARM_01
			template_counter = @C_MEDIUM_ARMOR
			priority = @MEDIUM_ARMOR_PRIO
			
			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				mechanized = { x = 0 y = 2 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				mechanized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_cs_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				trm_infantry_sp_artillery = { x = 3 y = 2 }
				trm_infantry_tank_destroyer = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_mech = { x = 0 y = 1 }
				maintenance_company = { x = 0 y = 2 }
				combat_engineer_mech = { x = 0 y = 3 }
				signal_company_mot = { x = 0 y = 4 }

				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				trm_cavalry_sp_anti_air_support = { x = 1 y = 2 }
				trm_cavalry_armor_recon = { x = 1 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 4 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_country_flag = HTD_ENG_trm_medium_advanced_tank_chassis_eng_centurion_1_a
				OR = {
					has_country_flag = HTD_ENG_trm_medium_tank_destroyer_chassis_usa_m4_1_b
					has_country_flag = HTD_ENG_trm_medium_tank_destroyer_chassis_eng_mk8_3_a
				}
				#ai_has_arv = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_medium_armor_template value = 1 }
		
		division_template = { # +2 advanced mediums, -2 mediums, med SPTD
			name = "Medium Armor Division"
			division_names_group = ENG_ARM_01
			template_counter = @C_MEDIUM_ARMOR
			priority = @MEDIUM_ARMOR_PRIO
			
			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				mechanized = { x = 0 y = 2 }
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				mechanized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_cs_armor = { x = 2 y = 1 }
				trm_medium_advanced_armor = { x = 2 y = 2 }
				trm_medium_advanced_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				trm_infantry_sp_artillery = { x = 3 y = 2 }
				trm_medium_tank_destroyer = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				maintenance_company_arm = { x = 0 y = 2 }
				combat_engineer_arm = { x = 0 y = 3 }
				signal_company_mot = { x = 0 y = 4 }

				logistics_company_mot = { x = 1 y = 0 }
				field_hospital = { x = 1 y = 1 }
				trm_cavalry_sp_anti_air_support = { x = 1 y = 2 }
				trm_cavalry_armor_recon = { x = 1 y = 3 }
			}
		}
	}
	
	ai_medium_armor_templates = yes 
}
ai_heavy_armor_templates/ENG = {
	ai_heavy_armor_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 1 } #2
	add_to_temp_array = { num_valid_templates = 1 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_armor_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_country_flag = HTD_ENG_trm_infantry_tank_chassis_eng_matilda1_1_a
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
				ai_has_anti_air_heavy = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_heavy_armor_template
		
		division_template = {
			name = "Heavy Armor Division"
			division_names_group = ENG_ARM_01
			template_counter = @C_HEAVY_ARMOR
			priority = @HEAVY_ARMOR_PRIO
			
			regiments = {
				infantry_assault = {x = 0 y = 0}
				infantry = {x = 0 y = 1}
				infantry = {x = 0 y = 2}
				
				infantry_assault = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry_assault = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				
				trm_infantry_armor = { x = 3 y = 0}
				trm_infantry_armor = { x = 3 y = 1}
				
				artillery_brigade_med = { x = 4 y = 0 }
				artillery_brigade_med = { x = 4 y = 1 }
				artillery_brigade_med = { x = 4 y = 2 }
				anti_tank_brigade = { x = 4 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				anti_air_heavy = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }

				maintenance_company = { x = 1 y = 0 }
				logistics_company_car = { x = 1 y = 1 }
				combat_engineer = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				artillery_heavy = { x = 1 y = 4 }
			}
		}
		ai_spawn_heavy_armor_division = yes
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_armor_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_country_flag = HTD_ENG_trm_infantry_tank_cs_chassis_eng_matilda2_1_a
				ai_has_anti_tank_brigade_med = yes
				#ai_has_arm_recon = yes
				#ai_has_arv = yes
				#ai_has_truck_logistics = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_heavy_armor_template value = 1 }
		
		division_template = { # +heavy armor, +1 inf CS armor, partial mechanization and motorization, +med AT, -AT, cavalry armor recon
			name = "Heavy Armor Division"
			division_names_group = ENG_ARM_01
			template_counter = @C_HEAVY_ARMOR
			priority = @HEAVY_ARMOR_PRIO
			
			regiments = {
				semi_motorized_assault = {x = 0 y = 0}
				semi_motorized = {x = 0 y = 1}
				semi_motorized = {x = 0 y = 2}
				semi_motorized = {x = 0 y = 3}

				
				mechanized_assault = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				mechanized = { x = 1 y = 2 }
				
				trm_heavy_armor = { x = 2 y = 0 }
				trm_infantry_armor = { x = 2 y = 1 }
				trm_infantry_cs_armor = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot_med = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				trm_cavalry_armor_recon = { x = 0 y = 2 }
				anti_air_heavy_mot = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
				
				maintenance_company_arm = { x = 1 y = 0 }
				logistics_company_mot = { x = 1 y = 1 }
				combat_engineer_arm = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				artillery_heavy_mot = { x = 1 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_armor_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#has_country_flag = HTD_ENG_trm_heavy_tank_chassis_eng_excelsior_1_b
				OR = {
					has_country_flag = HTD_ENG_trm_medium_tank_destroyer_chassis_usa_m4_1_b
					has_country_flag = HTD_ENG_trm_medium_tank_destroyer_chassis_eng_mk8_3_a
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_heavy_armor_template value = 1 }
		
		division_template = { # full mechanization, heavy and medium armor, SPArt, SPTD, SPAA
			name = "Heavy Armor Division"
			division_names_group = ENG_ARM_01
			template_counter = @C_HEAVY_ARMOR
			priority = @HEAVY_ARMOR_PRIO
			
			regiments = {
				mechanized_assault = {x = 0 y = 0}
				mechanized = {x = 0 y = 1}
				mechanized = {x = 0 y = 2}
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				mechanized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_heavy_armor = { x = 2 y = 2 }
				trm_heavy_cs_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				trm_infantry_sp_artillery = { x = 3 y = 1 }
				trm_heavy_tank_destroyer = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				trm_cavalry_armor_recon = { x = 0 y = 2 }
				trm_medium_sp_anti_air_support = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
				
				maintenance_company_arm = { x = 1 y = 0 }
				logistics_company_mot = { x = 1 y = 1 }
				combat_engineer_arm = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				artillery_heavy_mot = { x = 1 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_armor_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_country_flag = HTD_ENG_trm_medium_advanced_tank_cs_chassis_eng_centurion_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_heavy_armor_template value = 1 }
		
		division_template = { # med advanced and CS armor
			name = "Heavy Armor Division"
			division_names_group = ENG_ARM_01
			template_counter = @C_HEAVY_ARMOR
			priority = @HEAVY_ARMOR_PRIO
			
			regiments = {
				mechanized_assault = {x = 0 y = 0}
				mechanized = {x = 0 y = 1}
				mechanized = {x = 0 y = 2}
				
				mechanized_assault = { x = 1 y = 0 }
				mechanized = { x = 1 y = 1 }
				mechanized = { x = 1 y = 2 }
				
				trm_medium_advanced_armor = { x = 2 y = 0 }
				trm_medium_advanced_cs_armor = { x = 2 y = 1 }
				trm_heavy_armor = { x = 2 y = 2 }
				trm_heavy_cs_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				trm_infantry_sp_artillery = { x = 3 y = 1 }
				trm_heavy_tank_destroyer = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_arm = { x = 0 y = 1 }
				trm_cavalry_armor_recon = { x = 0 y = 2 }
				trm_medium_sp_anti_air_support = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
				
				maintenance_company_arm = { x = 1 y = 0 }
				logistics_company_mot = { x = 1 y = 1 }
				combat_engineer_arm = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				artillery_heavy_mot = { x = 1 y = 4 }
			}
		}
	}
	ai_heavy_armor_templates = yes 
}
ai_marine_templates/ENG = {
	ai_marine_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 1 } #2
	add_to_temp_array = { num_valid_templates = 1 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_marines_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_marines_template
		
		division_template = {
			name = "Marines Division" 	
			division_names_group = ENG_MAR_01
			template_counter = @C_MARINES
			priority = @MARINES_PRIO
			
			regiments = {
				marine = { x = 0 y = 0 }
				marine = { x = 0 y = 1 }
				marine = { x = 0 y = 2 }
				
				marine = { x = 1 y = 0 }
				marine = { x = 1 y = 1 }
				marine = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_marines_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_amph_support = yes
				ai_has_combat_engineer = yes
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_marines_template value = 1 }
		
		division_template = { # engineer to combat engineer, +signal, +amph support, +support AT, _ac recon
			name = "Marines Division" 	
			division_names_group = ENG_MAR_01
			template_counter = @C_MARINES
			priority = @MARINES_PRIO
			
			regiments = {
				marine = { x = 0 y = 0 }
				marine = { x = 0 y = 1 }
				marine = { x = 0 y = 2 }
				
				marine = { x = 1 y = 0 }
				marine = { x = 1 y = 1 }
				marine = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				artillery_brigade = { x = 2 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				combat_engineer = { x = 0 y = 1 }
				signal_company = { x = 0 y = 2 }
				amph_support = { x = 0 y = 3 }
				anti_tank = { x = 0 y = 4 }
				
				recon_ac = { x = 1 y = 0 }
				
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_marines_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			#replaceTRM
			else = {
				#CONDITIONS
				has_country_flag = HTD_ENG_trm_heavy_tank_amphibious_chassis_eng_churchill_2_a
				ai_has_amph_mech = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_marines_template value = 1 }
		
		division_template = { # full mechanization, amphib heavy armor, +engineer, cavalry armor recon, +logistics, +maintenance, +hospital
			name = "Marines Division" 	
			division_names_group = ENG_MAR_01
			template_counter = @C_MARINES
			priority = @MARINES_PRIO
			
			regiments = {
				amphibious_mechanized = { x = 0 y = 0 }
				amphibious_mechanized = { x = 0 y = 1 }
				amphibious_mechanized = { x = 0 y = 2 }
				
				amphibious_mechanized = { x = 1 y = 0 }
				amphibious_mechanized = { x = 1 y = 1 }
				amphibious_mechanized = { x = 1 y = 2 }
				
				trm_heavy_amphibious_armor = { x = 2 y = 0 }
				trm_infantry_amphibious_armor = { x = 2 y = 1 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_mech = { x = 0 y = 1 }
				trm_cavalry_armor_recon = { x = 0 y = 2 }
				amph_support = { x = 0 y = 3 }
				logistics_company_mot = { x = 0 y = 4 }
				
				maintenance_company = { x = 1 y = 0 }
				combat_engineer_mech = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
				field_hospital = { x = 1 y = 3 }
			}
		}
	}
	ai_marine_templates = yes 
	
}

	### CAN ###

ai_templates_startup/CAN = {
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "District Garrison"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "District Cavalry"
		support = { ai_garrison = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "District Garrison" disband = yes }
	delete_unit_template_and_units = { division_template = "District Cavalry" disband = yes }
}

ai_garrison_templates/CAN = {
	ai_garrison_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	add_to_temp_array = { num_valid_templates = 2 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_garrison_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_garrison_template
		
		division_template = {
			name = "Garrison Division"
			template_counter = @C_GARRISON
			priority = @GARRISON_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = cavalry
				}
				change_division_template = {
					division_template = "Garrison Division" 
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_garrison_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_signal_company = yes
				#ai_has_anti_air_1940 = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_garrison_template value = 1 }
		
		
		division_template = { # +signal
			name = "Garrison Division"
			template_counter = @C_GARRISON
			priority = @GARRISON_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				anti_air = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	ai_garrison_templates = yes 
}
ai_infantry_templates/CAN = {
	ai_infantry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 4 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_infantry_template
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = garrison
				}
				change_division_template = {
					division_template = "Infantry Division" 
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +signal
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
				
				signal_company = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_anti_tank_brigade_med = yes
				ai_has_anti_air = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +med AT, +AA
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade_med = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
				
				signal_company = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
			}
		}
	}
	
	ai_infantry_templates = yes 
}
ai_motorized_templates/CAN = {
	ai_motorized_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1939.1.1
				
				ai_has_anti_tank_brigade_med = yes
				ai_has_logistics_company_mech = yes #is the same as for mot
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_motorized_template
		
		division_template = {
			name = "Motorized Division"
			division_names_group = CAN_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				artillery_brigade_mot = { x = 3 y = 3 }
				anti_tank_brigade_mot_med = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				logistics_company_mot = { x = 0 y = 4 }
				
				signal_company_mot = { x = 0 y = 1 }
				anti_air_car = { x = 0 y = 2 }
			}
		}
	}
	ai_motorized_templates = yes 
}
ai_medium_armor_templates/CAN = {
	ai_medium_armor_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_medium_armor_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_mechanized = yes
				OR = {
					#replaceTRM #has_tech = tech_sherman_firefly_equipment_1
					has_country_flag = HTD_CAN_trm_medium_tank_chassis_usa_ram_1_b
					has_country_flag = ENG_time_for_shermans
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_medium_armor_template
		
		division_template = {
			name = "Medium Armor Division"
			division_names_group = CAN_ARM_01
			template_counter = @C_MEDIUM_ARMOR
			priority = @MEDIUM_ARMOR_PRIO
			
			regiments = {
				mechanized = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				mechanized = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_infantry_armor = { x = 2 y = 0 }
				trm_infantry_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				artillery_brigade_mot_med = { x = 3 y = 1 }
				artillery_brigade_mot_med = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_mech = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				anti_air_car = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
				
				logistics_company_mot = { x = 1 y = 0 }
				maintenance_company = { x = 1 y = 1 }
				combat_engineer_mech = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_medium_armor_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#replaceTRM #has_tech = tech_sherman_firefly_equipment_1
				has_country_flag = HTD_CAN_trm_medium_tank_aa_chassis_usa_grizzly_1_a
				#ai_has_anti_air_heavy = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_medium_armor_template value = 1 }
		
		division_template = { # +2 med armor, -2 inf armor, SPArt, SPAA
			name = "Medium Armor Division"
			division_names_group = CAN_ARM_01
			template_counter = @C_MEDIUM_ARMOR
			priority = @MEDIUM_ARMOR_PRIO
			
			regiments = {
				mechanized = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				mechanized = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_medium_armor = { x = 2 y = 2 }
				trm_medium_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot_med = { x = 3 y = 0 }
				trm_medium_sp_artillery = { x = 3 y = 1 }
				trm_medium_sp_artillery = { x = 3 y = 2 }
				anti_tank_brigade_mot = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_mech = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				trm_medium_sp_anti_air_support = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
				
				logistics_company_mot = { x = 1 y = 0 }
				maintenance_company = { x = 1 y = 1 }
				combat_engineer_mech = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}
		}
	}
	ai_medium_armor_templates = yes 
	
}

	### RAJ ###
ai_templates_startup/RAJ = {
	
}

ai_garrison_templates/RAJ = {
	ai_garrison_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_garrison_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_garrison_template
		
		#delete_unit_template_and_units = {
		#	division_template = "Bodyguard"
		#	disband = yes
		#}
		#delete_unit_template_and_units = {
		#	division_template = "Indian Cavalry Division"
		#	disband = yes
		#}
		#delete_unit_template_and_units = {
		#	division_template = "Indian Armoured Division"
		#	disband = yes
		#}
		#delete_unit_template_and_units = {
		#	division_template = "District Division"
		#	disband = yes
		#}
		
		division_template = {
			name = "Garrison Division"
			division_names_group = RAJ_GAR_01
			template_counter = @C_GARRISON
			priority = @GARRISON_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
			}
		}
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = militia
				}
				change_division_template = {
					division_template = "Garrison Division"
				}
			}
		}
		#capital_scope = {
		#	create_unit = {
		#		division = "division_name = { is_name_ordered = yes } division_template = \"Indian Garrison\" start_experience_factor = 0.5"
		#		owner = RAJ
		#		count = 6
		#	}
		#}
	}
	ai_garrison_templates = yes 
}
ai_light_infantry_templates/RAJ = {
	ai_light_infantry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 2 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_light_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_light_infantry_template
		
		division_template = {
			name = "Light Infantry Division" 	
			division_names_group = RAJ_INF_01
			template_counter = @C_LIGHT_INFANTRY
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }	
			}
		}
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			capital_scope = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes } division_template = \"Light Infantry Division\" start_experience_factor = 0.5"
					owner = RAJ
					count = 3
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1939.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_light_infantry_template value = 1 }
		
		division_template = { # +1 mount arty, +hospital, +logistics
			name = "Light Infantry Division" 
			division_names_group = RAJ_INF_01
			template_counter = @C_LIGHT_INFANTRY
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				OR = {
					date > 1942.1.1
					BUR = { has_capitulated = yes }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_light_infantry_template value = 1 }
		
		division_template = { # +1 mount arty, +jungle support
			name = "Light Infantry Division" 
			division_names_group = RAJ_INF_01
			template_counter = 382
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				jungle_support = { x = 1 y = 0 }
			}
		}
	}
	ai_light_infantry_templates = yes 
}
ai_infantry_templates/RAJ = {
	ai_infantry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_infantry_template
		
		division_template = {
			name = "Infantry Division"
			division_names_group = RAJ_INF_01
			priority = @INFANTRY_PRIO
			template_counter = @C_INFANTRY
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.75 }
				
				OR = {
					ai_has_signal_company = yes
					ai_has_logistics_company = yes
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company }
		add_to_temp_array = { either_support = token:logistics_company }
		
		division_template = {
			name = "Infantry Division"
			division_names_group = RAJ_INF_01
			priority = @INFANTRY_PRIO
			template_counter = @C_INFANTRY
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				#logistics_company = { x = 0 y = 3 } #added via either_support
				#signal_company = { x = 0 y = 4 } #added via either_support
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				template_is_complete = yes 
				
				OR = {
					ai_has_anti_air = yes
					ai_has_anti_tank_brigade = yes
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:anti_air }
		add_to_temp_array = { either_regiment = token:anti_tank_brigade }
		add_to_temp_array = { either_regiment_x = 3 }
		
		division_template = {
			name = "Infantry Division"
			division_names_group = RAJ_INF_01
			priority = @INFANTRY_PRIO
			template_counter = @C_INFANTRY
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				#anti_tank_brigade = { x = 3 y = 4 }  #added via either_support
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				#anti_air = { x = 0 y = 4 } #added via either_support
				
				signal_company = { x = 1 y = 0 }
			}
		}
	}
	ai_infantry_templates = yes 
}
ai_mountaineer_templates/RAJ = {
	ai_mountaineer_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 2 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_mountaineers_template
		
		division_template = {
			name = "Mountaineers Division"
			division_names_group = RAJ_INF_01
			priority = @MOUNTAINEERS_PRIO
			template_counter = 3017
			
			regiments = {
				gurkha = { x = 0 y = 0 }
				gurkha = { x = 0 y = 1 }
				gurkha = { x = 0 y = 2 }
				
				gurkha = { x = 1 y = 0 }
				gurkha = { x = 1 y = 1 }
				gurkha = { x = 1 y = 2 }
				
				gurkha = { x = 2 y = 0 }
				gurkha = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				mount_support = { x = 0 y = 3 }
			}
		}
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = gurkha
					NOT = { division_has_battalion_in_template = militia }
				}
				change_division_template = {
					division_template = "Mountaineers Division"
				}
			}
		}
		#capital_scope = {
		#	create_unit = {
		#		division = "division_name = { is_name_ordered = yes } division_template = \"Indian Gurkha Division\" start_experience_factor = 0.5"
		#		owner = RAJ
		#		count = 3
		#	}
		#}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1937.1.1
				
				OR = {
					ai_has_signal_company = yes
					ai_has_logistics_company = yes
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		add_to_temp_array = { either_support = token:logistics_company }
		add_to_temp_array = { either_support = token:signal_company }
		
		division_template = {
			name = "Mountaineers Division"
			division_names_group = RAJ_INF_01
			priority = @MOUNTAINEERS_PRIO
			template_counter = 3018
			
			regiments = {
				gurkha = { x = 0 y = 0 }
				gurkha = { x = 0 y = 1 }
				gurkha = { x = 0 y = 2 }
				
				gurkha = { x = 1 y = 0 }
				gurkha = { x = 1 y = 1 }
				gurkha = { x = 1 y = 2 }
				
				gurkha = { x = 2 y = 0 }
				gurkha = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				#logistics_company = { x = 0 y = 3 } #added via either_support
				#signal_company = { x = 0 y = 4 } #added via either_support
				
				mount_support = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				template_is_complete = yes
				
				OR = {
					check_variable = { field_strength > 0.9 }
					date > 1938.1.1
					has_war = yes
				}
				
				ai_has_anti_air = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"
			division_names_group = RAJ_INF_01
			priority = @MOUNTAINEERS_PRIO
			template_counter = 3018
			
			regiments = {
				gurkha = { x = 0 y = 0 }
				gurkha = { x = 0 y = 1 }
				gurkha = { x = 0 y = 2 }
				
				gurkha = { x = 1 y = 0 }
				gurkha = { x = 1 y = 1 }
				gurkha = { x = 1 y = 2 }
				
				gurkha = { x = 2 y = 0 }
				gurkha = { x = 2 y = 1 }
				gurkha = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 } #added via either_support
				signal_company = { x = 0 y = 4 } #added via either_support
				
				mount_support = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
			}
		}
	}
	ai_mountaineer_templates = yes 
}
ai_motorized_templates/RAJ = {
	ai_motorized_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 1 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1941.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_motorized_template
		
		division_template = {
			name = "Motorized Division"
			division_names_group = RAJ_CAV_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				
				semi_motorized = { x = 2 y = 0 }
				semi_motorized = { x = 2 y = 1 }
				
				mountain_artillery_brigade_mot = { x = 3 y = 0 }
				mountain_artillery_brigade_mot = { x = 3 y = 1 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				field_hospital = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1942.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # full motorization, +1 mount arty, +maintenance
			name = "Motorized Division"
			division_names_group = RAJ_CAV_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				
				mountain_artillery_brigade_mot = { x = 3 y = 0 }
				mountain_artillery_brigade_mot = { x = 3 y = 1 }
				mountain_artillery_brigade_mot = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				field_hospital = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
				
				maintenance_company = { x = 1 y = 0 }
			}
		}
	}
	ai_motorized_templates = yes 
}
ai_light_armor_templates/RAJ = {
	ai_light_armor_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_light_armor_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = no
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_light_armor_template
		
		division_template = {
			name = "Light Armor Division"
			division_names_group = RAJ_ARM_01
			template_counter = @C_LIGHT_ARMOR
			priority = @LIGHT_ARMOR_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				motorized = { x = 0 y = 3 }
				
				trm_light_armor = { x = 1 y = 0 }
				trm_light_armor = { x = 1 y = 1 }
				
				mountain_artillery_brigade_mot = { x = 2 y = 0 }
				mountain_artillery_brigade_mot = { x = 2 y = 1 }
				mountain_artillery_brigade_mot = { x = 2 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				field_hospital = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
				
				maintenance_company = { x = 1 y = 0 }
			}
		}
	}
	ai_light_armor_templates = yes 
}

	### NEP ###
ai_mountaineer_templates/NEP = {
	ai_mountaineer_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 2 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_mountaineers_template
		
		division_template = {
			name = "Mountaineers Division"
			division_names_group = NEP_INF_01
			priority = @MOUNTAINEERS_PRIO
			template_counter = 3017
			
			regiments = {
				gurkha = { x = 0 y = 0 }
				gurkha = { x = 0 y = 1 }
				
				gurkha = { x = 1 y = 0 }
				gurkha = { x = 1 y = 1 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				mount_support = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1940.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +2 gurkhas, +1 mount arty
			name = "Mountaineers Division"
			division_names_group = NEP_INF_01
			priority = @MOUNTAINEERS_PRIO
			template_counter = 3018
			
			regiments = {
				gurkha = { x = 0 y = 0 }
				gurkha = { x = 0 y = 1 }
				gurkha = { x = 0 y = 2 }
				
				gurkha = { x = 1 y = 0 }
				gurkha = { x = 1 y = 1 }
				gurkha = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				mount_support = { x = 0 y = 3 }
			}
		}
	}
	ai_mountaineer_templates = yes 
}

	### EGY ###
ai_infantry_templates/EGY = {
	ai_infantry_templates = yes 
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_infantry_template
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				anti_tank_brigade = { x = 3 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.5 }
				
				OR = { 
					ai_has_logistics_company = yes
					ai_has_signal_company = yes
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company }
		add_to_temp_array = { either_support = token:logistics_company }
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				anti_tank_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				#signal_company = { x = 0 y = 2 } #added via either_support
				#logistics_company = { x = 0 y = 3 } #added via either_support
				
				desert_support = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			
				template_is_complete = yes
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:anti_air_heavy }
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				signal_company = { x = 0 y = 2 } 
				logistics_company = { x = 0 y = 3 }
				#anti_air_heavy = { x = 0 y = 4 }
				
				desert_support = { x = 1 y = 0 }
			}
		}
	}
	ai_infantry_templates = yes 
}
ai_cavalry_templates/EGY = {
	ai_cavalry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 1 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_cavalry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_cavalry_template
		
		#delete_unit_template_and_units = {
		#	division_template = "Egypt Cavalry"
		#	disband = yes
		#}
		
		division_template = {
			name = "Cavalry Division"
			priority = @CAVALRY_PRIO
			template_counter = @C_CAVALRY
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				cavalry = { x = 0 y = 3 }
				cavalry = { x = 0 y = 4 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				semi_motorized = { x = 1 y = 3 }
				
				artillery_brigade = { x = 2 y = 0 }
				anti_tank_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				desert_support = { x = 0 y = 2 }
			}
		}
		#capital_scope = {
		#	create_unit = {
		#		division = "division_name = { is_name_ordered = yes } division_template = \"Egyptian Cavalry\" start_experience_factor = 0.5"
		#		owner = EGY
		#		count = 2
		#	}
		#}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1939.1.1
				num_of_military_factories > 20
				has_tech = tech_liaison_cars
				has_tech = interwar_medartillery
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
		
		division_template = { # full motorization, +1 arty, +logistics
			name = "Cavalry Division"
			priority = @CAVALRY_PRIO
			template_counter = @C_CAVALRY
			
			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				artillery_brigade_mot = { x = 2 y = 0 }
				artillery_brigade_mot = { x = 2 y = 1 }
				anti_tank_brigade_mot = { x = 2 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				desert_support = { x = 0 y = 2 }
				logistics_company_car = { x = 0 y = 3 }
			}
		}
	}
	ai_cavalry_templates = yes 
}
ai_motorized_templates/EGY = {
	ai_motorized_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 1 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1941.1.1
				num_of_military_factories > 24
				has_tech = tech_liaison_cars
				has_tech = interwar_medartillery
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_motorized_template
		
		division_template = {
			name = "Motorized Division"
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				
				semi_motorized = { x = 2 y = 0 }
				semi_motorized = { x = 2 y = 1 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				anti_tank_brigade_mot = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				field_hospital = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1942.1.1
				num_of_military_factories > 30
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # full motorization
			name = "Motorized Division"
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				anti_tank_brigade_mot = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				field_hospital = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
			}
		}
	}
	ai_motorized_templates = yes
}

	### AST ###

ai_templates_startup/AST = {
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "CMF Division"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Infantry Division 2" #needs to have the 2, since ai template also is called that
		support = { ai_infantry = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "CMF Division" disband = yes }
	delete_unit_template_and_units = { division_template = "Infantry Division 2" disband = yes }
}

ai_infantry_templates/AST = {
	ai_infantry_templates = yes 
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_infantry_template
		
		#delete_unit_template_and_units = { division_template = "CMF Division" disband = yes }
		
		division_template = {
			name = "Infantry Division"		
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }

				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }

				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }
				field_hospital = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.93 }
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +signal
			name = "Infantry Division"		
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }

				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }

				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				signal_company = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.94 }
				date > 1938.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 arty
			name = "Infantry Division"		
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }

				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }

				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				signal_company = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				#has_tech = antiair2
				ai_has_anti_air = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +AA
			name = "Infantry Division"		
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }

				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }

				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				signal_company = { x = 1 y = 1 }
				anti_air = { x = 1 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 4 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1941.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +AT
			name = "Infantry Division"		
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }

				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }

				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }

				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
				
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				signal_company = { x = 1 y = 1 }
				anti_air = { x = 1 y = 2 }
			}
		}
	}
	ai_infantry_templates = yes
}
ai_motorized_templates/AST = {
	ai_motorized_templates = yes 
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1941.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_motorized_template
		
		division_template = {
			name = "Motorized Division"
			division_names_group = AST_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				semi_motorized = { x = 2 y = 0 }
				semi_motorized = { x = 2 y = 1 }
				semi_motorized = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				artillery_brigade_mot = { x = 3 y = 3 }
				anti_tank_brigade_mot = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				logistics_company_mot = { x = 0 y = 4 }
				
				signal_company_mot = { x = 0 y = 1 }
				anti_air_car = { x = 0 y = 2 }
			}
		}
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = semi_motorized
				}
				change_division_template = {
					division_template = "Motorized Division" 
				}
			}
		}
	}
	ai_motorized_templates = yes 
}
ai_medium_armor_templates/AST = {
	ai_medium_armor_templates = yes 
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_medium_armor_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_country_flag = HTD_AST_trm_medium_tank_chassis_ast_ac1_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_medium_armor_template
		
		division_template = {
			name = "Medium Armor Division"
			division_names_group = AST_ARM_01
			template_counter = @C_MEDIUM_ARMOR
			priority = @MEDIUM_ARMOR_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_medium_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				anti_tank_brigade_mot = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				
				logistics_company_car = { x = 1 y = 0 }
				anti_air_car = { x = 1 y = 1 }
				signal_company_mot = { x = 1 y = 2 }
			}
		}
	}
	ai_medium_armor_templates = yes 
	
}

	##### FRA #####

ai_templates_startup/FRA = {
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Division d'Infanterie"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Division d'Infanterie Motorisée"
		support = { ai_motorized = 1 }
	}

	add_units_to_division_template = {
		template_name = "Division de Cavalerie"
		support = { ai_motorized = 1 }
	}

	add_units_to_division_template = {
		template_name = "Brigade Coloniale"
		support = { ai_garrison = 1 }
	}

	add_units_to_division_template = {
		template_name = "Brigade Garrison"
		support = { ai_garrison = 1 }
	}

	add_units_to_division_template = {
		template_name = "Brigade de Chars de Combat (FT-17)"
		support = { ai_heavy_armor = 1 }
	}

	# delete Brigade de Spahis

	add_units_to_division_template = {
		template_name = "Division d'Infanterie Coloniale"
		support = { ai_infantry = 1 }
	}

	add_units_to_division_template = {
		template_name = "Groupement de cavalerie"
		support = { ai_infantry = 1 }
	}

	add_units_to_division_template = {
		template_name = "Division d'Infanterie Alpine"
		support = { ai_mountaineers = 1 }
	}

	add_units_to_division_template = {
		template_name = "Brigade de Chars de Combat"
		support = { ai_heavy_armor = 1 }
	}

	# delete Division Légère Mécanique
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Division d'Infanterie" disband = yes }
	delete_unit_template_and_units = { division_template = "Division d'Infanterie Motorisée" disband = yes }
	delete_unit_template_and_units = { division_template = "Division de Cavalerie" disband = yes }
	delete_unit_template_and_units = { division_template = "Brigade Coloniale" disband = yes }
	delete_unit_template_and_units = { division_template = "Brigade Garrison" disband = yes }
	delete_unit_template_and_units = { division_template = "Brigade de Chars de Combat (FT-17)" disband = yes }
	delete_unit_template_and_units = { division_template = "Brigade de Spahis" disband = yes }
	delete_unit_template_and_units = { division_template = "Division d'Infanterie Coloniale" disband = yes }
	delete_unit_template_and_units = { division_template = "Groupement de cavalerie" disband = yes }
	delete_unit_template_and_units = { division_template = "Division d'Infanterie Alpine" disband = yes }
	delete_unit_template_and_units = { division_template = "Brigade de Chars de Combat" disband = yes }
	delete_unit_template_and_units = { division_template = "Division Légère Mécanique" disband = yes }
	
	add_timed_idea = {
		idea = ai_FRA_base_construction
		days = 1400
	}
}


ai_garrison_templates/FRA = {
	ai_garrison_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_garrison_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_garrison_template
		
		division_template = {
			name = "Garrison Division"
			division_names_group = FRA_COL_01
			template_counter = @C_GARRISON
			priority = @GARRISON_PRIO
			
			regiments = {
				garrison = { x = 0 y = 0 }
				garrison = { x = 0 y = 1 }
				garrison = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }

				artillery_brigade = { x = 2 y = 0 }				
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				anti_tank = { x = 0 y = 2 }
				artillery_heavy = { x = 0 y = 3 }
				anti_air = { x = 0 y = 4 }
			}
		}
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_garrison_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_garrison_template value = 1 }
		
		division_template = { # +signal
			name = "Garrison Division"
			division_names_group = FRA_COL_01
			template_counter = @C_GARRISON
			priority = @GARRISON_PRIO
			
			regiments = {
				garrison = { x = 0 y = 0 }
				garrison = { x = 0 y = 1 }
				garrison = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }	
				
				artillery_brigade = { x = 2 y = 0 }				
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				anti_tank = { x = 0 y = 2 }
				artillery_heavy = { x = 0 y = 3 }
				signal_company = { x = 0 y = 4 }
				
				anti_air = { x = 1 y = 0 }
			}
		}
	}
	ai_garrison_templates = yes
}
ai_infantry_templates/FRA = {
	ai_infantry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_infantry_template
		
		division_template = {
			name = "Infantry Division"
			division_names_group = FRA_INF_01
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				anti_tank_brigade =  { x = 3 y = 3 }
				
				trm_light_armor = { x = 4 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				anti_air = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }
				
				field_hospital_cav = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
				#ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = {	# + combat_engineer + signal_company
			name = "Infantry Division"
			division_names_group = FRA_INF_01
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				anti_tank_brigade =  { x = 3 y = 3 }
				
				trm_light_armor = { x = 4 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				field_hospital_cav = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
				signal_company = { x = 1 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1941.1.1
				ai_has_anti_tank_brigade_med = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = {	# + maintenance_company + engineer_mot + recon_mot + combat_engineer_mot + signal_company_mot
			name = "Infantry Division"
			division_names_group = FRA_INF_01
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade_med =  { x = 3 y = 4 }
				
				trm_light_armor = { x = 4 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				field_hospital_cav = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
				signal_company = { x = 1 y = 2 }
				combat_engineer = { x = 1 y = 3 }
			}
		}
	}
	ai_infantry_templates = yes
}
ai_heavy_infantry_templates/FRA = {
	ai_heavy_infantry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_heavy_infantry_template
		
		division_template = {
			name = "Heavy Infantry Division"
			division_names_group = FRA_INF_01
			template_counter = 178
			priority = @HEAVY_INFANTRY_PRIO
			
			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				trm_infantry_armor = { x = 2 y = 0 }
				trm_infantry_armor = { x = 2 y = 1 }
				trm_light_armor =  { x = 2 y = 2 }
				trm_light_armor =  { x = 2 y = 3 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				anti_tank_brigade =  { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				trm_tankette_armor_recon = { x = 0 y = 2 }
				artillery_heavy = { x = 0 y = 3 }
				
				field_hospital = { x = 1 y = 0 }
				logistics_company_car = { x = 1 y = 1 }
				maintenance_company = { x = 1 y = 2 }
			}
		}
		ai_spawn_heavy_infantry_division = yes
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_combat_engineer = yes
				ai_has_anti_air_heavy = yes
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		
		division_template = { # +hvy AA, +signal, +combat engineer
			name = "Heavy Infantry Division"
			division_names_group = FRA_INF_01
			template_counter = 178
			priority = @HEAVY_INFANTRY_PRIO
			
			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				trm_infantry_armor = { x = 2 y = 0 }
				trm_infantry_armor = { x = 2 y = 1 }
				trm_light_armor =  { x = 2 y = 2 }
				trm_light_armor =  { x = 2 y = 3 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				anti_tank_brigade =  { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				trm_tankette_armor_recon = { x = 0 y = 2 }
				anti_air_heavy = { x = 0 y = 3 }
				artillery_heavy = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				logistics_company_car = { x = 1 y = 1 }
				maintenance_company = { x = 1 y = 2 }
				signal_company = { x = 1 y = 3 }
				combat_engineer = { x = 1 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_country_flag = HTD_FRA_trm_tankette_tank_destroyer_chassis_fra_amr35_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		division_template = { # +tankette TD, -AT
			name = "Heavy Infantry Division"
			division_names_group = FRA_INF_01
			template_counter = 178
			priority = @HEAVY_INFANTRY_PRIO
			
			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry_assault = { x = 0 y = 1 }
				infantry_assault = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				trm_infantry_armor = { x = 2 y = 0 }
				trm_infantry_armor = { x = 2 y = 1 }
				trm_light_armor =  { x = 2 y = 2 }
				trm_light_armor =  { x = 2 y = 3 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				trm_tankette_tank_destroyer =  { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				trm_tankette_armor_recon = { x = 0 y = 2 }
				anti_air_heavy = { x = 0 y = 3 }
				artillery_heavy = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				logistics_company_car = { x = 1 y = 1 }
				maintenance_company = { x = 1 y = 2 }
				signal_company = { x = 1 y = 3 }
				combat_engineer = { x = 1 y = 4 }
			}
		}
	}
	ai_heavy_infantry_templates = yes
}
ai_mountaineer_templates/FRA = {
	ai_mountaineer_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_mountaineers_template
		
		division_template = {
			name = "Mountaineers Division"
			division_names_group = FRA_MNT_01
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				mount_support = { x = 0 y = 3 }
				field_hospital_cav = { x = 0 y = 4 }
				
				logistics_company = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +support AT, +combat engineer, +signal
			name = "Mountaineers Division"
			division_names_group = FRA_MNT_01
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				mount_support = { x = 0 y = 3 }
				anti_tank = { x = 0 y = 4 }
				
				logistics_company = { x = 1 y = 0 }
				field_hospital_cav = { x = 1 y = 1 }
				combat_engineer = { x = 1 y = 2 }
				signal_company = { x = 1 y = 3 }
			}
		}
	}
	ai_mountaineer_templates = yes
}
ai_motorized_templates/FRA = {
	ai_motorized_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	add_to_temp_array = { num_valid_templates = 3 } #4
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_motorized_template
		
		division_template = {
			name = "Motorized Division"
			division_names_group = FRA_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				armored_car = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot =  { x = 3 y = 3 }
				

			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				artillery_heavy_mot = { x = 0 y = 3 }
				field_hospital = { x = 0 y = 4 }
				
				logistics_company_car = { x = 1 y = 0 }
				maintenance_company = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = {	# + signal_company_mot + combat_engineer_mot + anti_air_car
			name = "Motorized Division"
			division_names_group = FRA_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				armored_car = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot =  { x = 3 y = 3 }
				
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				artillery_heavy_mot = { x = 0 y = 3 }
				anti_air_car = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				logistics_company_car = { x = 1 y = 1 }
				maintenance_company = { x = 1 y = 2 }
				combat_engineer_mot = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_anti_tank_brigade_med = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = {	# +med AT, -AT
			name = "Motorized Division"
			division_names_group = FRA_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				armored_car = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot_med =  { x = 3 y = 3 }
				
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				artillery_heavy_mot = { x = 0 y = 3 }
				anti_air_car = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				logistics_company_car = { x = 1 y = 1 }
				maintenance_company = { x = 1 y = 2 }
				combat_engineer_mot = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1939.6.1
				ai_has_mechanized = yes
				FRA = { has_capitulated = no }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = {	# + mechanized
			name = "Motorized Division"
			division_names_group = FRA_MOT_01
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				motorized_assault = { x = 0 y = 1 }
				motorized_assault = { x = 0 y = 2 }
				
				mechanized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				mechanized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				armored_car = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				anti_tank_brigade_mot_med =  { x = 3 y = 3 }
				

				
			}
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				artillery_heavy_mot = { x = 0 y = 3 }
				anti_air_car = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				logistics_company_mot = { x = 1 y = 1 }
				maintenance_company = { x = 1 y = 2 }
				combat_engineer_mech = { x = 1 y = 3 }
				signal_company_mot = { x = 1 y = 4 }
			}
		}
	}
	ai_motorized_templates = yes
}
ai_light_armor_templates/FRA = {
	ai_light_armor_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 1 } #2
	add_to_temp_array = { num_valid_templates = 1 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_light_armor_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_light_armor_template
		
		division_template = {
			name = "Light Armor Division"
			division_names_group = FRA_MEC_01
			template_counter = 225
			priority = @LIGHT_ARMOR_PRIO
			
			regiments = {
				infantry_assault = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry_assault = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				trm_light_armor = { x = 2 y = 0 }
				trm_light_armor = { x = 2 y = 1 }
				trm_light_armor = { x = 2 y = 2 }
				trm_light_armor = { x = 2 y = 3 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				anti_tank_brigade = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				anti_air_car = { x = 1 y = 1 }
				artillery_heavy = { x = 1 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_armor_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
				has_country_flag = HTD_FRA_trm_tankette_tank_destroyer_chassis_fra_amr35_1_a
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_light_armor_template value = 1 }
		
		division_template = {	# + motorized + anti_air_car + combat_engineer_mot + signal_company_mot
			name = "Light Armor Division"
			division_names_group = FRA_MEC_01
			template_counter = 226
			priority = @LIGHT_ARMOR_PRIO
			
			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				motorized = { x = 0 y = 3 }
				
				trm_light_armor = { x = 1 y = 0 }
				trm_light_armor = { x = 1 y = 1 }
				trm_light_armor = { x = 1 y = 2 }
				trm_light_armor = { x = 1 y = 3 }
				
				artillery_brigade_mot = { x = 2 y = 0 }
				artillery_brigade_mot = { x = 2 y = 1 }
				artillery_brigade_mot = { x = 2 y = 2 }
				trm_tankette_tank_destroyer = { x = 2 y = 3 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_ac = { x = 0 y = 2 }
				anti_air_car = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				maintenance_company = { x = 1 y = 1 }
				combat_engineer = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
				artillery_heavy = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_armor_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1942.1.1
				FRA = { has_capitulated = no }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_light_armor_template value = 1 }
		
		division_template = {	# - armored_car + mechanized + mechanized support companies
			name = "Light Armor Division"
			division_names_group = FRA_MEC_01
			template_counter = 226
			priority = @LIGHT_ARMOR_PRIO
			
			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				motorized = { x = 0 y = 3 }
				
				trm_light_armor = { x = 1 y = 0 }
				trm_light_armor = { x = 1 y = 1 }
				trm_light_armor = { x = 1 y = 2 }
				trm_light_armor = { x = 1 y = 3 }
				
				artillery_brigade_mot = { x = 2 y = 0 }
				artillery_brigade_mot = { x = 2 y = 1 }
				artillery_brigade_mot = { x = 2 y = 2 }
				trm_tankette_tank_destroyer = { x = 2 y = 3 }
			}
			
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				engineer_mech = { x = 0 y = 1 }
				recon_mech = { x = 0 y = 2 }
				anti_air_car = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				maintenance_company = { x = 1 y = 1 }
				combat_engineer_mot = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}
		}
	}
	ai_light_armor_templates = yes
}
ai_heavy_armor_templates/FRA = {
	ai_heavy_armor_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_armor_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_heavy_armor_template
		
		division_template = {
			name = "Heavy Armor Division"
			division_names_group = FRA_ARM_01
			template_counter = @C_HEAVY_ARMOR
			priority = @HEAVY_ARMOR_PRIO
			
			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_heavy_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_cavalry_armor = { x = 2 y = 2 }
				trm_cavalry_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				anti_tank_brigade_mot =  { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				trm_tankette_armor_recon = { x = 0 y = 1 }
				engineer_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				anti_air_car =  { x = 1 y = 1 }
			}
		}
		ai_spawn_heavy_armor_division = yes
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_armor_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_heavy_armor_template value = 1 }
		
		division_template = {	# + 2 motorized + anti_air_car + combat_engineer_mot + signal_company_mot
			name = "Heavy Armor Division"
			division_names_group = FRA_ARM_01
			template_counter = @C_HEAVY_ARMOR
			priority = @HEAVY_ARMOR_PRIO
			
			regiments = {
				motorized_assault = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_heavy_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_cavalry_armor = { x = 2 y = 2 }
				trm_cavalry_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				anti_tank_brigade_mot =  { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				trm_tankette_armor_recon = { x = 0 y = 1 }
				engineer_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				anti_air_car =  { x = 1 y = 1 }
				combat_engineer_mot = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_armor_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_mechanized = yes
				has_country_flag = HTD_FRA_trm_cavalry_tank_destroyer_chassis_fra_s35_1_a
				FRA = { has_capitulated = no }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_heavy_armor_template value = 1 }
		
		division_template = {	# + 2 mechanized + mechanized support
			name = "Heavy Armor Division"
			division_names_group = FRA_ARM_01
			template_counter = @C_HEAVY_ARMOR
			priority = @HEAVY_ARMOR_PRIO
			
			regiments = {
				mechanized_assault = { x = 0 y = 0 }
				mechanized = { x = 0 y = 1 }
				mechanized = { x = 0 y = 2 }
				
				motorized_assault = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				trm_heavy_armor = { x = 2 y = 0 }
				trm_medium_armor = { x = 2 y = 1 }
				trm_cavalry_armor = { x = 2 y = 2 }
				trm_cavalry_armor = { x = 2 y = 3 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				trm_cavalry_tank_destroyer =  { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_mech = { x = 0 y = 0 }
				trm_tankette_armor_recon = { x = 0 y = 1 }
				engineer_mot = { x = 0 y = 2 }
				maintenance_company = { x = 0 y = 3 }
				logistics_company_mot = { x = 0 y = 4 }
				
				field_hospital = { x = 1 y = 0 }
				anti_air_car =  { x = 1 y = 1 }
				combat_engineer_mech = { x = 1 y = 2 }
				signal_company_mot = { x = 1 y = 3 }
			}
		}
	}
	
	ai_heavy_armor_templates = yes
}

	### TUR ###

ai_templates_startup/TUR = {
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Piyade Tümeni"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Dağcı Tugayı"
		support = { ai_mountaineers = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Süvari Tümeni"
		support = { ai_cavalry = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Piyade Tümeni" }
	delete_unit_template_and_units = { division_template = "Dağcı Tugayı" }
	delete_unit_template_and_units = { division_template = "Süvari Tümeni" }
}

ai_infantry_templates/TUR = {
	ai_infantry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 1 } #2
	add_to_temp_array = { num_valid_templates = 1 } #3
	add_to_temp_array = { num_valid_templates = 1 } #4
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_infantry_template
		
		#delete_unit_template_and_units = { division_template = "Iç Güvenlik Tugayı" disband = yes }
		#delete_unit_template_and_units = { division_template = "Militia" disband = yes }
	
		division_template = {
			name = "Infantry Division"
			division_names_group = TUR_INF_01
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_logistics_company = yes
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +logistics, +signal
			name = "Infantry Division"
			division_names_group = TUR_INF_01
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				signal_company = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_anti_air = yes
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 mount arty, +AA
			name = "Infantry Division"
			division_names_group = TUR_INF_01
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				signal_company = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_anti_tank_brigade_med = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +med AT
			name = "Infantry Division"
			division_names_group = TUR_INF_01
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade_med = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				logistics_company = { x = 0 y = 3 }
				
				signal_company = { x = 1 y = 0 }
				anti_air = { x = 1 y = 1 }
			}
		}
	}
	ai_infantry_templates = yes
}
ai_mountaineer_templates/TUR = {
	ai_mountaineer_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 1 } #2
	add_to_temp_array = { num_valid_templates = 1 } #3
	add_to_temp_array = { num_valid_templates = 1 } #4
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_mountaineers_template
		
		division_template = {
			name = "Mountaineers Division"
			division_names_group = TUR_MTN_01
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_logistics_company = yes
				ai_has_mount_support = yes
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +mount support, +logistics, +signal
			name = "Mountaineers Division"
			division_names_group = TUR_MTN_01
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				mount_support = { x = 0 y = 3 }
				
				logistics_company = { x = 1 y = 0 }
				signal_company = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1939.1.1
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +2 mountaineers, +1 mount arty
			name = "Mountaineers Division"
			division_names_group = TUR_MTN_01
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				mount_support = { x = 0 y = 3 }
				
				logistics_company = { x = 1 y = 0 }
				signal_company = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1940.1.1
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +1 mountaineer, +2 mount arty
			name = "Mountaineers Division"
			division_names_group = TUR_MTN_01
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				mount_support = { x = 0 y = 3 }
				
				logistics_company = { x = 1 y = 0 }
				signal_company = { x = 1 y = 1 }
			}
		}
	}
	ai_mountaineer_templates = yes
}
ai_cavalry_templates/TUR = {
	ai_cavalry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_cavalry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_cavalry_template
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			if = { limit = { NOT = { has_tech = desert_equipment } }
				set_technology = { desert_equipment = 1 }
			}
		}
		
		division_template = {
			name = "Cavalry Division"
			division_names_group = TUR_CAV_01
			priority = @CAVALRY_PRIO
			template_counter = @C_CAVALRY
			
			regiments = {
				camelry = { x = 0 y = 0 }
				camelry = { x = 0 y = 1 }
				camelry = { x = 0 y = 2 }
				camelry = { x = 0 y = 3 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				cavalry = { x = 1 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				date > 1939.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
		
		division_template = { # +2 mount arty, +desert support
			name = "Cavalry Division"
			division_names_group = TUR_CAV_01
			priority = @CAVALRY_PRIO
			template_counter = @C_CAVALRY
			
			regiments = {
				camelry = { x = 0 y = 0 }
				camelry = { x = 0 y = 1 }
				camelry = { x = 0 y = 2 }
				camelry = { x = 0 y = 3 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				cavalry = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				desert_support = { x = 0 y = 2 }
			}
		}
	}
	ai_cavalry_templates = yes
}

	### HUN ###

ai_templates_startup/HUN = { #this effect gets run in the history file. if you put in templates with the same name as existing ones it will overwrite those
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Gyalogdandár"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Huszár Dandár"
		support = { ai_motorized = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Gyalogdandár" }
	delete_unit_template_and_units = { division_template = "Huszár Dandár" }
}
ai_infantry_templates/HUN = {
	ai_infantry_templates = yes 
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_infantry_template
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_signal_company = yes 
				ai_has_logistics_company = yes 
				ai_has_combat_engineer = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +signal, +logistics, +field hospital, +combat engineer
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }
				
				field_hospital_cav = { x = 1 y = 0 }
				combat_engineer = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_anti_air = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 arty, +AT, +AA
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }
				
				field_hospital_cav = { x = 1 y = 0 }
				combat_engineer = { x = 1 y = 1 }
				anti_air = { x = 1 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					has_war_with = SOV
					ai_has_enemy_with_more_armor = yes
				}
				ai_has_anti_tank_brigade_med = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +med AT, -AT
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade_med = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }
				
				field_hospital_cav = { x = 1 y = 0 }
				combat_engineer = { x = 1 y = 1 }
				anti_air = { x = 1 y = 2 }
			}
		}
	}
	ai_infantry_templates = yes 
}

ai_motorized_templates/HUN = {
	ai_motorized_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_motorized_template
		
		division_template = {
			name = "Motorized Division"
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				semi_motorized = { x = 2 y = 0 }
				semi_motorized = { x = 2 y = 1 }
				semi_motorized = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_signal_company = yes 
				ai_has_logistics_company = yes 
				ai_has_combat_engineer = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # +signal, +logistics, +maintenance, +combat engineer
			name = "Motorized Division"
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				semi_motorized = { x = 2 y = 0 }
				semi_motorized = { x = 2 y = 1 }
				semi_motorized = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				signal_company_mot = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
				
				maintenance_company = { x = 1 y = 0 }
				combat_engineer_mot = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_anti_air = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # +1 arty, +AT, +AA
			name = "Motorized Division"
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				semi_motorized = { x = 2 y = 0 }
				semi_motorized = { x = 2 y = 1 }
				semi_motorized = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				artillery_brigade_mot = { x = 3 y = 3 }
				anti_tank_brigade_mot = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				signal_company_mot = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
				
				maintenance_company = { x = 1 y = 0 }
				combat_engineer_mot = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					has_war_with = SOV
					ai_has_enemy_with_more_armor = yes
				}
				ai_has_anti_tank_brigade_med = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # full motorization
			name = "Motorized Division"
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				motorized = { x = 0 y = 0 }
				motorized = { x = 0 y = 1 }
				motorized = { x = 0 y = 2 }
				
				motorized = { x = 1 y = 0 }
				motorized = { x = 1 y = 1 }
				motorized = { x = 1 y = 2 }
				
				motorized = { x = 2 y = 0 }
				motorized = { x = 2 y = 1 }
				motorized = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				artillery_brigade_mot = { x = 3 y = 3 }
				anti_tank_brigade_mot = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				signal_company_mot = { x = 0 y = 3 }
				logistics_company_car = { x = 0 y = 4 }
				
				maintenance_company = { x = 1 y = 0 }
				combat_engineer_mot = { x = 1 y = 1 }
				anti_air_car = { x = 1 y = 2 }
			}
		}
	}
	ai_motorized_templates = yes 
}

	### ROM ###
	
ai_templates_startup/ROM = {
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Divizia Infanterie"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Munte Brigada"
		support = { ai_mountaineers = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Cavalerie Brigada"
		support = { ai_cavalry = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Divizia Infanterie" disband = yes }
	delete_unit_template_and_units = { division_template = "Munte Brigada" disband = yes }
	delete_unit_template_and_units = { division_template = "Cavalerie Brigada" disband = yes }
}

ai_infantry_templates/ROM = {
	ai_infantry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 4 } #1
	add_to_temp_array = { num_valid_templates = 4 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	add_to_temp_array = { num_valid_templates = 3 } #4
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_infantry_template
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				anti_tank_brigade = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_signal_company = yes 
				ai_has_logistics_company = yes 
				ai_has_anti_air = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +signal, +logistics, +AA
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				anti_tank_brigade = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }
				
				anti_air = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				date > 1939.9.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 arty
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }
				
				anti_air = { x = 1 y = 0 }
				artillery_heavy = { x = 1 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					has_war_with = SOV
					ai_has_enemy_with_more_armor = yes
				}
				ai_has_anti_tank_brigade_med = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +med AT, -AT
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade_med = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				logistics_company = { x = 0 y = 4 }
				
				anti_air = { x = 1 y = 0 }
				artillery_heavy = { x = 1 y = 1 }
			}
		}
	}
	ai_infantry_templates = yes 
}

ai_mountaineer_templates/ROM = {
	ai_mountaineer_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 4 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	add_to_temp_array = { num_valid_templates = 2 } #4
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_mountaineers_template
		
		division_template = {
			name = "Mountaineers Division"
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +signal, +AA, +mount support
			name = "Mountaineers Division"
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				anti_air = { x = 0 y = 4 }
				
				mount_support = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +2 mountaineers, +1 mount arty
			name = "Mountaineers Division"
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				anti_air = { x = 0 y = 4 }
				
				mount_support = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +1 mountaineer, +1 mount arty, +med AT
			name = "Mountaineers Division"
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade_med = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				anti_air = { x = 0 y = 4 }
				
				mount_support = { x = 1 y = 0 }
			}
		}
	}

	ai_mountaineer_templates = yes 
}

ai_cavalry_templates/ROM = {
	ai_cavalry_templates = yes 
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_cavalry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_cavalry_template
		
		add_to_temp_array = { either_support = token:logistics_company }
		add_to_temp_array = { either_support = token:signal_company }
		
		division_template = {
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				
				cavalry = { x = 2 y = 0 }
				cavalry = { x = 2 y = 1 }
				
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				#logistics_company = { x = 0 y = 2 } #added via either_support
				#signal_company = { x = 0 y = 3 } #added via either_support
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_artillery_brigade_39 = yes 
				ai_has_anti_air = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
		
		division_template = { # +2 arty, +AA
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				
				cavalry = { x = 2 y = 0 }
				cavalry = { x = 2 y = 1 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				logistics_company = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				anti_air = { x = 0 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				date > 1940.1.1
				check_variable = { field_strength > 0.95 }
				OR = {
					date > 1940.6.1
					check_variable = { stock_ratio > 0.1 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
		
		division_template = { # +2 cav, +1 arty
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				cavalry = { x = 2 y = 0 }
				cavalry = { x = 2 y = 1 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				logistics_company = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				anti_air = { x = 0 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_logistics_company_car = yes
				
				date > 1941.1.1
				check_variable = { field_strength > 0.95 }
				OR = {
					date > 1941.2.1
					check_variable = { stock_ratio > 0.1 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
		
		division_template = { # motorized some supports, +logistics
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				cavalry = { x = 2 y = 0 }
				cavalry = { x = 2 y = 1 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				logistics_company_car = { x = 0 y = 2 }
				signal_company_mot = { x = 0 y = 3 }
				anti_air = { x = 0 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 4 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_country_flag = { flag = ai_cavalry_template value = 4 days > 90 }
			
				ai_has_anti_tank_brigade_med = yes 
				#ai_has_enemy_with_armor = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
		
		division_template = { # +AT
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				cavalry = { x = 2 y = 0 }
				cavalry = { x = 2 y = 1 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				anti_tank_brigade = { x = 3 y = 3 }
				
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				logistics_company_car = { x = 0 y = 2 }
				signal_company_mot = { x = 0 y = 3 }
				anti_air = { x = 0 y = 4 }
			}
		}
	}
	ai_cavalry_templates = yes 
}

ai_motorized_templates/ROM = {
	ai_motorized_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_logistics_company = yes
				ai_has_signal_company = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_motorized_template
		
		division_template = {
			name = "Motorized Division"
			template_counter = @C_MOTORIZED
			priority = @MOTORIZED_PRIO
			
			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				semi_motorized = { x = 2 y = 0 }
				semi_motorized = { x = 2 y = 1 }
				semi_motorized = { x = 2 y = 2 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				artillery_brigade_mot = { x = 3 y = 2 }
				artillery_brigade_mot = { x = 3 y = 3 }
				anti_tank_brigade_mot_med = { x = 3 y = 4 }
				
			}
			
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				recon_mot = { x = 0 y = 2 }
				logistics_company_car = { x = 0 y = 3 }
				
				signal_company_mot = { x = 1 y = 0 }
				anti_air_car = { x = 1 y = 1 }
				maintenance_company = { x = 1 y = 2 }
			}
		}
	}
	ai_motorized_templates = yes 
}

	### BUL ###

ai_templates_startup/BUL = {
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Pekhotna Divizija"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Militia"
		support = { ai_infantry = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Pekhotna Divizija" disband = yes }
	delete_unit_template_and_units = { division_template = "Militia" disband = yes }
	
}
ai_infantry_templates/BUL = {
	ai_infantry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 4 } #1
	add_to_temp_array = { num_valid_templates = 4 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	add_to_temp_array = { num_valid_templates = 3 } #4
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				always = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_infantry_template
		
		#delete_unit_template_and_units = { division_template = "Militia" }
	
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
			}
		}
		
		#set_temp_variable = { num_spawns = 4 }
		#ai_spawn_infantry_division = yes
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +2 mount arty
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 mount arty, +signal
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_anti_tank_brigade = yes
				date > 1940.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +AT
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	ai_infantry_templates = yes 
}

	### YUG ###

ai_templates_startup/YUG = {	
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Pesadijska Divizija"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Konjička Divizija"
		support = { ai_light_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Gorska Pesadija"
		support = { ai_mountaineers = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Pesadijska Divizija" disband = yes }
	delete_unit_template_and_units = { division_template = "Konjička Divizija" disband = yes }
	delete_unit_template_and_units = { division_template = "Gorska Pesadija" disband = yes }
}

ai_infantry_templates/YUG = {
	ai_infantry_templates = yes 
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_infantry_template
		
		#delete_unit_template_and_units = { division_template = "Tenkovski Bataljon" disband = yes }
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS

				ai_has_mountain_artillery_brigade = yes
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 mount arty, +combat engineer
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					ai_has_signal_company = yes
					ai_has_combat_engineer = yes
				}
				
				check_variable = { field_strength > 0.75 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company }
		add_to_temp_array = { either_support = token:combat_engineer }
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				#combat_engineer = { x = 0 y = 3 } #added via either_support
				#signal_company = { x = 0 y = 4 } #added via either_support
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				template_is_complete = yes
				
				check_variable = { field_strength > 0.75 }
				
				OR = {
					ai_has_anti_air = yes
					ai_has_anti_tank_brigade = yes
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:anti_air }
		add_to_temp_array = { either_regiment = token:anti_tank_brigade }
		add_to_temp_array = { either_regiment_x = 3 }
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				#anti_tank_brigade = { x = 3 y = 4 } #added via either_regiment
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				#anti_air = { x = 0 y = 3 } #added via either_support
				
				signal_company = { x = 1 y = 0 }
				combat_engineer = { x = 1 y = 1 }
			}
		}
	}
	ai_infantry_templates = yes 
}

ai_light_infantry_templates/YUG = {
	ai_light_infantry_templates = yes 
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_light_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_light_infantry_template
		
		division_template = {
			name = "Light Infantry Division"
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_mountain_artillery_brigade = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_light_infantry_template value = 1 }
		
		division_template = {
			name = "Light Infantry Division"
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_light_infantry_template value = 1 }
		
		division_template = {
			name = "Light Infantry Division"
			priority = @LIGHT_INFANTRY_PRIO
			
			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				combat_engineer = { x = 0 y = 4 }
			}
		}
	}
	ai_light_infantry_templates = yes 
}

ai_mountaineer_templates/YUG = {
	ai_mountaineer_templates = yes
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_mountain_artillery_brigade = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					ai_has_signal_company = yes
					ai_has_mount_support = yes
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company }
		add_to_temp_array = { either_support = token:mount_support }
		
		division_template = {
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				#signal_company = { x = 0 y = 3 } #added via either_support
				#mount_support = { x = 0 y = 4 } #added via either_support
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				date > 1940.1.1
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				mountaineers = { x = 0 y = 3 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				mountaineers = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				mount_support = { x = 0 y = 4 }
			}
		}
	}
	ai_mountaineer_templates = yes
}
	### GRE ###

ai_templates_startup/GRE = { #this effect gets run in the history file. if you put in templates with the same name as existing ones it will overwrite those
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Trigonikó Pezikoú"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Tetrágono Pezikoú"
		support = { ai_mountaineers = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Merarchía Ippikoú"
		support = { ai_infantry = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Trigonikó Pezikoú" }
	delete_unit_template_and_units = { division_template = "Tetrágono Pezikoú" }
	delete_unit_template_and_units = { division_template = "Merarchía Ippikoú" }
}

ai_infantry_templates/GRE = {
	ai_infantry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 4 } #1
	add_to_temp_array = { num_valid_templates = 4 } #2
	add_to_temp_array = { num_valid_templates = 3 } #3
	add_to_temp_array = { num_valid_templates = 3 } #4
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_infantry_template
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 2 }
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = cavalry
				}
				change_division_template = {
					division_template = "Infantry Template"
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					ai_has_engineer = yes
					ai_has_signal_company = yes
					ai_has_mountain_artillery_brigade = yes
				}
				
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company }
		add_to_temp_array = { either_support = token:engineer }
		
		add_to_temp_array = { either_regiment = token:mountain_artillery_brigade }
		add_to_temp_array = { either_regiment_x = 3 }
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				#mountain_artillery_brigade = { x = 3 y = 0 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				#engineer = { x = 0 y = 2 }
				#signal_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				template_is_complete = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					ai_has_anti_air = yes
					ai_has_anti_tank_brigade = yes
				}
				
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:anti_air }
		
		add_to_temp_array = { either_regiment = token:anti_tank_brigade }
		add_to_temp_array = { either_regiment_x = 3 }
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY
			priority = @INFANTRY_PRIO
			
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				#anti_tank_brigade = { x = 3 y = 4 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				#anti_air = { x = 0 y = 4 }
			}
		}
	}
	ai_infantry_templates = yes 
}

ai_mountaineer_templates/GRE = {
	ai_mountaineer_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_mountaineers_template
		
		division_template = {
			name = "Mountaineers Division"
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					ai_has_engineer = yes
					ai_has_signal_company = yes
				}
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		add_to_temp_array = { either_support = token:engineer }
		add_to_temp_array = { either_support = token:signal_company }
		
		division_template = {
			name = "Mountaineers Division"
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				#engineer = { x = 0 y = 2 }
				#signal_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				template_is_complete = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"
			template_counter = @C_MOUNTAINEER
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				mount_support = { x = 0 y = 4 }
			}
		}
	}
	ai_mountaineer_templates = yes 
}

	### SAF ###

ai_templates_startup/SAF = {
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "District Force"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "District Brigade"
		support = { ai_garrison = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "District Force" }
	delete_unit_template_and_units = { division_template = "District Brigade" }
}
ai_infantry_templates/SAF = {
	ai_infantry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 1 }
				
		division_template = {
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				light_infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					ai_has_signal_company = yes
					ai_has_logistics_company = yes
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company }
		add_to_temp_array = { either_support = token:logistics_company }
		
		division_template = {
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				light_infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				#logistics_company = { x = 0 y = 3 } #added via either_support
				#signal_company = { x = 0 y = 4 } #added via either_support
				
				desert_support = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				template_is_complete = yes
				
				ai_has_anti_air_heavy = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = {
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				light_infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				anti_air_heavy = { x = 0 y = 4 }
				
				logistics_company = { x = 1 y = 0 }
				desert_support = { x = 1 y = 1 }
			}
		}
	}
	ai_infantry_templates = yes
}

ai_garrison_templates/SAF = {
	ai_garrison_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_garrison_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_garrison_template value = 1 }
				
		add_to_temp_array = { either_support = token:signal_company }
		add_to_temp_array = { either_support = token:anti_air }
		
		division_template = {
			name = "Garrison Division"	
			priority = @GARRISON_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				#signal_company = { x = 0 y = 2 } #added via either_support
				#anti_air = { x = 0 y = 3 } #added via either_support
			}
		}
	
	}
	
	ai_garrison_templates = yes
}

	### PER ###

ai_templates_startup/PER = { #this effect gets run in the history file. if you put in templates with the same name as existing ones it will overwrite those
	
	#delete_unit_template_and_units = { division_template = "Infantry Brigade" disband = yes }
		
	division_template = {
		name = "Infantry Brigade"	
		priority = @INFANTRY_PRIO

		regiments = {
			infantry = { x = 0 y = 0 }
			infantry = { x = 0 y = 1 }
			infantry = { x = 0 y = 2 }
			
			infantry = { x = 1 y = 0 }
			infantry = { x = 1 y = 1 }
			infantry = { x = 1 y = 2 }
		}
		support = {
			DIV_HQ = { x = 0 y = 0 }
			recon_cav = { x = 0 y = 1 }
			desert_support  = { x = 0 y = 2 }
		}
	}
	
	#delete_unit_template_and_units = { division_template = "Militia" disband = yes }
	
	#delete_unit_template_and_units = { division_template = "Garrison" disband = yes }
	
	#delete_unit_template_and_units = { division_template = "Cavalry Brigade" disband = yes }
		
	division_template = {
		name = "Cavalry Brigade"
		priority = @CAVALRY_PRIO
		
		regiments = {
			camelry = { x = 0 y = 0 }
			camelry = { x = 0 y = 1 }
			camelry = { x = 0 y = 2 }
			
			cavalry = { x = 1 y = 0 }
			cavalry = { x = 1 y = 1 }
			cavalry = { x = 1 y = 2 }
		}
		support = {
			DIV_HQ = { x = 0 y = 0 }
			recon_cav = { x = 0 y = 1 }
			desert_support  = { x = 0 y = 2 }
		}
	}
}
ai_infantry_templates/PER = {
	ai_infantry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 4 } #2
	add_to_temp_array = { num_valid_templates = 5 } #3
	add_to_temp_array = { num_valid_templates = 1 } #4
	add_to_temp_array = { num_valid_templates = 1 } #5
	add_to_temp_array = { num_valid_templates = 1 } #6
	add_to_temp_array = { num_valid_templates = 1 } #7
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = {
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#always = no 
				#check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 2 }
			
		division_template = { # +1 mount arty, +engineer
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
				engineer  = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 3 }
			
		division_template = { # +1 inf, +1 mount arty
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 0 y = 3 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
				engineer  = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 4 }
			
		division_template = { # +1 mount arty
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 0 y = 3 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
				mountain_artillery_brigade = { x = 2 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
				engineer  = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 4 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 5 }
			
		division_template = { # +1 inf, +AT
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 0 y = 3 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
				mountain_artillery_brigade = { x = 2 y = 3 }
				anti_tank_brigade = { x = 2 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
				engineer  = { x = 0 y = 3 }
			}
		}
	}
	
	ai_infantry_templates = yes
}

	### AFG ###

ai_militia_templates/AFG = {
	ai_militia_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 4 } #2
	add_to_temp_array = { num_valid_templates = 5 } #3
	add_to_temp_array = { num_valid_templates = 1 } #4
	add_to_temp_array = { num_valid_templates = 1 } #5
	add_to_temp_array = { num_valid_templates = 1 } #6
	add_to_temp_array = { num_valid_templates = 1 } #7
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_militia_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_militia_template value = 1 }
			
		division_template = {
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
			}
		}
		
		every_country_division = {
			change_division_template = {
				division_template = "Militia Division"
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_militia_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#always = no 
				#check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_militia_template value = 2 }
			
		division_template = { # +1 mount arty, +engineer
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
				engineer  = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_militia_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_militia_template value = 3 }
			
		division_template = { # +1 militia, +1 mount arty
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 0 y = 3 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
				engineer  = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_militia_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_militia_template value = 4 }
			
		division_template = { # +1 mount arty
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 0 y = 3 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
				mountain_artillery_brigade = { x = 2 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
				engineer  = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_militia_template value = 4 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_militia_template value = 5 }
			
		division_template = { # +1 militia, +AT
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 0 y = 3 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				militia = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
				mountain_artillery_brigade = { x = 2 y = 3 }
				anti_tank_brigade = { x = 2 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
				engineer  = { x = 0 y = 3 }
			}
		}
	}
	
	ai_militia_templates = yes
}

	### ETH ###

ai_militia_templates/ETH = {
	ai_militia_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 4 } #2
	add_to_temp_array = { num_valid_templates = 5 } #3
	add_to_temp_array = { num_valid_templates = 1 } #4
	add_to_temp_array = { num_valid_templates = 1 } #5
	add_to_temp_array = { num_valid_templates = 1 } #6
	add_to_temp_array = { num_valid_templates = 1 } #7
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_militia_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_war = no
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_militia_template value = 1 }
			
		division_template = {
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_militia_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#always = no 
				#check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_militia_template value = 2 }
			
		division_template = { # +1 arty, +engineer
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
				engineer  = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_militia_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_militia_template value = 3 }
			
		division_template = { # +1 militia, +1 arty
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 0 y = 3 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
				engineer  = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_militia_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_militia_template value = 4 }
			
		division_template = { # +1 arty
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 0 y = 3 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				artillery_brigade = { x = 2 y = 2 }
				artillery_brigade = { x = 2 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
				engineer  = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_militia_template value = 4 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_militia_template value = 5 }
			
		division_template = { # +1 militia
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				militia = { x = 0 y = 3 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				militia = { x = 1 y = 3 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				artillery_brigade = { x = 2 y = 2 }
				artillery_brigade = { x = 2 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				desert_support  = { x = 0 y = 2 }
				engineer  = { x = 0 y = 3 }
			}
		}
	}
	
	ai_militia_templates = yes
}

ai_mountaineer_templates/ETH = {
	ai_mountaineer_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { ai_division_limit_ratio > 0.35 }
				
				check_variable = { field_strength > 0.95 }
				
				ai_has_mountaineers = yes 
				ai_has_mountain_artillery_brigade = yes 
				
				ai_has_DIV_HQ = yes 
				ai_has_engineer = yes 
				ai_has_recon_cav = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				desert_support = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { field_strength > 0.9 }
				
				ai_has_signal_company = yes
				
				check_variable = { mtth:ai_num_of_military_factories > 26 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +signal
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				desert_support = { x = 0 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { field_strength > 0.95 }
				
				check_variable = { mtth:ai_num_of_military_factories > 30 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +1 arty
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				mountaineers = { x = 0 y = 3 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				desert_support = { x = 0 y = 4 }
			}
		}
	}
	ai_mountaineer_templates = yes
}

	### POL ###

ai_templates_startup/POL = {
	country_lock_all_division_template = yes
	
	add_units_to_division_template = {
		template_name = "Dywizja Piechoty"
		support = { ai_infantry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Dywizja Górska"
		support = { ai_mountaineers = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Brygada Kawalerii"
		support = { ai_cavalry = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Brygada KOP"
		support = { ai_garrison = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Grupa Forteczna"
		support = { ai_garrison = 1 }
	}
	
	add_units_to_division_template = {
		template_name = "Artyleria nadbrzeżna"
		support = { ai_garrison = 1 }
	}
	
	ai_templates_change_starting_units = yes
	
	## clear
	
	delete_unit_template_and_units = { division_template = "Dywizja Piechoty" disband = yes }
	delete_unit_template_and_units = { division_template = "Dywizja Górska" disband = yes }
	delete_unit_template_and_units = { division_template = "Brygada Kawalerii" disband = yes }
	delete_unit_template_and_units = { division_template = "Brygada KOP" disband = yes }
	delete_unit_template_and_units = { division_template = "Grupa Forteczna" disband = yes }
	delete_unit_template_and_units = { division_template = "Artyleria nadbrzeżna" disband = yes }
}

ai_infantry_templates/POL = {
	ai_infantry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = {
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				anti_air = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = { # +signal
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				anti_air = { x = 0 y = 3 }
				
				signal_company = { x = 1 y = 0 }
			}
		}
	}
	
	ai_infantry_templates = yes
}
ai_garrison_templates/POL = {
	ai_garrison_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_garrison_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_garrison_template value = 1 }
			
		#delete_unit_template_and_units = { division_template = "Brygada KOP" disband = yes }
		#delete_unit_template_and_units = { division_template = "Grupa Forteczna" disband = yes }
		#delete_unit_template_and_units = { division_template = "Artyleria nadbrzeżna" disband = yes }
		
		division_template = {
			name = "Garrison Division"	
			priority = @GARRISON_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				artillery_heavy = { x = 0 y = 2 }
				anti_air = { x = 0 y = 3 }
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					OR = {
						division_has_battalion_in_template = garrison
						AND = {
							division_has_battalion_in_template = artillery_brigade
							NOT = { division_has_battalion_in_template = infantry }
						}
					}
				}
				change_division_template = {
					division_template = "Garrison Division" 
				}
			}
		}
		#set_temp_variable = { num_spawns = 5 }
		#ai_spawn_garrison_division = yes
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_garrison_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_garrison_template value = 1 }
			
		division_template = { # +signal
			name = "Garrison Division"	
			priority = @GARRISON_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				artillery_heavy = { x = 0 y = 2 }
				anti_air = { x = 0 y = 3 }
				signal_company = { x = 0 y = 4 }
			}
		}
		
	}
	
	ai_garrison_templates = yes
}
ai_cavalry_templates/POL = {
	ai_cavalry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_cavalry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_cavalry_template value = 1 }
			
		division_template = {
			name = "Cavalry Division"	
			priority = @CAVALRY_PRIO

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				cavalry = { x = 0 y = 3 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { field_strength > 0.96 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
			
		division_template = { # +1 cav, +AA
			name = "Cavalry Division"	
			priority = @CAVALRY_PRIO

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				cavalry = { x = 0 y = 3 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				cavalry = { x = 1 y = 3 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				anti_air = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_cavalry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_cavalry_template value = 1 }
			
		division_template = { # +signal
			name = "Cavalry Division"	
			priority = @CAVALRY_PRIO

			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				cavalry = { x = 0 y = 3 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				cavalry = { x = 1 y = 3 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				anti_air = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	
	ai_cavalry_templates = yes
}
ai_mountaineer_templates/POL = {
	ai_mountaineer_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				artillery_heavy = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
				
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_signal_company = yes
			}
		}
		
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_mountaineers_template value = 2 }
		
		division_template = { #+2 pack arty, +signal
			name = "Mountaineers Division"
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				artillery_heavy = { x = 0 y = 3 }
				signal_company = { x = 0 y = 4 }
			}
		}
	}
	ai_mountaineer_templates = yes
}

	### FIN ###

ai_infantry_templates/FIN = {
	ai_infantry_templates = yes
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 1 }
			
		#delete_unit_template_and_units = { division_template = "Ratsuväkiprikaati" disband = yes }	
	
		division_template = {
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					OR = {
						division_has_battalion_in_template = engineer
						division_has_battalion_in_template = cavalry
					}
				}
				change_division_template = {
					division_template = "Infantry Division" 
				}
			}
		}
			
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
				ai_has_combat_engineer = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = { # +combat engineer, +signal
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				combat_engineer = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_logistics_company = yes
				ai_has_anti_air = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = { # +AA, +logistics
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				combat_engineer = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				anti_air = { x = 0 y = 4 }
				
				logistics_company = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_anti_tank_brigade_med = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = { # +med AT
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade_med = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				combat_engineer = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				anti_air = { x = 0 y = 4 }
				
				logistics_company = { x = 1 y = 0 }
			}
		}
	}
	ai_infantry_templates = yes
}

ai_light_infantry_templates/FIN = {
	ai_light_infantry_templates = yes
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_light_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_light_infantry_template value = 1 }
			
		division_template = {
			name = "Light Infantry Division"	
			priority = @LIGHT_INFANTRY_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = light_infantry
				}
				change_division_template = {
					division_template = "Light Infantry Division" 
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_light_infantry_template value = 1 }
			
		division_template = { # +signal
			name = "Light Infantry Division"	
			priority = @LIGHT_INFANTRY_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_anti_air = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_light_infantry_template value = 1 }
			
		division_template = { # +AA, +support AT
			name = "Light Infantry Division"	
			priority = @LIGHT_INFANTRY_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				
				anti_air = { x = 1 y = 0 }
				anti_tank = { x = 1 y = 1 }
				
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				ai_has_arctic_support = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_light_infantry_template value = 1 }
			
		division_template = { # +arctic support
			name = "Light Infantry Division"	
			priority = @LIGHT_INFANTRY_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				arctic_support = { x = 0 y = 4 }
				
				anti_air = { x = 1 y = 0 }
				anti_tank = { x = 1 y = 1 }
				
			}
		}
	}
}
	### SPR ###
	

ai_infantry_templates/SPR = {
	ai_infantry_templates = yes
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = {
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
		
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_anti_tank_brigade_med = yes
				#ai_has_anti_air_1940 = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = {
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade_med = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				anti_air = { x = 0 y = 4 }
			}
		}
	}
	ai_infantry_templates = yes
}

ai_mountaineer_templates/SPR = {
	ai_mountaineer_templates = yes
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				mount_support = { x = 0 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_anti_tank_brigade_med = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountaineers = { x = 2 y = 0 }
				mountaineers = { x = 2 y = 1 }
				mountaineers = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade_med = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				mount_support = { x = 0 y = 4 }
				
				anti_air = { x = 1 y = 0 }
			}
		}
	}
	ai_mountaineer_templates = yes
}
	### ARG ###

ai_infantry_templates/ARG = {
	ai_infantry_templates = yes
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_mountain_artillery_brigade = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = {
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					OR = {
						division_has_battalion_in_template = cavalry
						division_has_battalion_in_template = infantry
					}
				}
				change_division_template = {
					division_template = "Infantry Division" 
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					ai_has_signal_company = yes
					ai_has_logistics_company = yes
				}
				
				check_variable = { field_strength > 0.8 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		add_to_temp_array = { either_support = token:logistics_company }
		add_to_temp_array = { either_support = token:signal_company }
		
		division_template = { # +1 mount arty, +logistics/signal
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				#logistics_company = { x = 0 y = 2 } #added via either_support
				#signal_company = { x = 0 y = 3 } #added via either_support
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = militia
				}
				change_division_template = {
					division_template = "Infantry Division" 
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				template_is_complete = yes #check if the either_support or regiment from last step is complete
				
				OR = {
					ai_has_anti_air = yes
					ai_has_anti_tank_brigade = yes
				}
				
				check_variable = { field_strength > 0.8 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
			
		add_to_temp_array = { either_support = token:anti_air }
		add_to_temp_array = { either_regiment = token:anti_tank_brigade }
		add_to_temp_array = { either_regiment_x = 3 }
				
		division_template = { # +AT, +AA
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				mountain_artillery_brigade = { x = 3 y = 0 }
				mountain_artillery_brigade = { x = 3 y = 1 }
				mountain_artillery_brigade = { x = 3 y = 2 }
				mountain_artillery_brigade = { x = 3 y = 3 }
				#anti_tank_brigade = { x = 3 y = 4 } #added via either_regiment
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				logistics_company = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				#anti_air = { x = 0 y = 4 } #added via either_support
			}
		}
		
	}
	
	ai_infantry_templates = yes
}

ai_mountaineer_templates/ARG = {
	ai_mountaineer_templates = yes 
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				OR = {
					ai_has_recon = yes
					ai_has_mountain_artillery_brigade = yes
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_mountaineers_template
		
		add_to_temp_array = { either_support = token:recon }
		add_to_temp_array = { either_regiment = token:mountain_artillery_brigade }
		add_to_temp_array = { either_regiment_x = 2 }
		
		division_template = {
			name = "Mountaineers Division"
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				#mountain_artillery_brigade = { x = 2 y = 0 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				#recon = { x = 0 y = 1 }
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = mountaineers
				}
				change_division_template = {
					division_template = "Mountaineers Division" 
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				template_is_complete = yes
				
				check_variable = { field_strength > 0.8 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		add_to_temp_array = { either_support = token:signal_company }
		
		division_template = { # +2 mount arty, +signal
			name = "Mountaineers Division"
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				#signal_company = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				template_is_complete = yes
				
				OR = {
					ai_has_logistics_company = yes
					ai_has_mount_support = yes
				}
				
				check_variable = { field_strength > 0.8 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		add_to_temp_array = { either_support = token:logistics_company }
		add_to_temp_array = { either_support = token:mount_support }
		
		division_template = { # +2 mountaineers, +logistics/mount support
			name = "Mountaineers Division"
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				mountaineers = { x = 0 y = 3 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				mountaineers = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				signal_company = { x = 0 y = 2 }
				#logistics_company = { x = 0 y = 3 }
				#mount_support = { x = 0 y = 4 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 3 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				template_is_complete = yes
				
				OR = {
					ai_has_anti_air = yes
					ai_has_anti_tank_brigade = yes
				}
				
				check_variable = { field_strength > 0.8 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		add_to_temp_array = { either_support = token:anti_air }
		add_to_temp_array = { either_regiment = token:anti_tank_brigade }
		add_to_temp_array = { either_regiment_x = 2 }
		
		division_template = { # +AT, +AA
			name = "Mountaineers Division"
			priority = @MOUNTAINEERS_PRIO
			
			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				mountaineers = { x = 0 y = 3 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				mountaineers = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
				#anti_tank_brigade = { x = 2 y = 3 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon = { x = 0 y = 1 }
				signal_company = { x = 0 y = 2 }
				#anti_air = { x = 0 y = 3 }
				
				logistics_company = { x = 1 y = 0 }
				mount_support = { x = 1 y = 1 }
			}
		}
	}
	
	ai_mountaineer_templates = yes 
}

	### CZE ###

ai_light_armor_templates/CZE = {
	ai_light_armor_templates = yes

	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_light_armor_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_DIV_HQ_car = yes
				ai_has_engineer_mot = yes
				ai_has_anti_tank_brigade = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = { flag = ai_light_armor_template value = 1 }
		
		#ai_spawn_light_armor_division = yes 
		division_template = {
			name = "Light Armor Division"
			priority = @LIGHT_ARMOR_PRIO
			
			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				trm_cavalry_armor = { x = 2 y = 0 }
				trm_cavalry_armor = { x = 2 y = 1 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				anti_tank_brigade_mot = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				trm_tankette_armor_recon = { x = 0 y = 2 }
				
				anti_air_car = { x = 1 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_armor_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_signal_company_mot = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_light_armor_template value = 1 }
		
		division_template = { # + signal_company_mot
			name = "Light Armor Division"
			priority = @LIGHT_ARMOR_PRIO
			
			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				trm_cavalry_armor = { x = 2 y = 0 }
				trm_cavalry_armor = { x = 2 y = 1 }
				
				artillery_brigade_mot = { x = 3 y = 0 }
				artillery_brigade_mot = { x = 3 y = 1 }
				anti_tank_brigade_mot = { x = 3 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				trm_tankette_armor_recon = { x = 0 y = 2 }
				
				anti_air_car = { x = 1 y = 0 }
				signal_company_mot = { x = 1 y = 1 }
			}
		}
	}
	
	ai_light_armor_templates = yes
}

################################################################################################################
############################################# GENERIC TEMPLATES ################################################
################################################################################################################

ai_templates_startup/generic = { #this effect gets run in on_startup
	if = {
		limit = { tag = HOL }
		#delete_unit_template_and_units = { division_template = "Infanterie Divisie" disband = yes }
		#delete_unit_template_and_units = { division_template = "Koloniale Garnizoen" disband = yes }
		
		d_ai_logic/HOL = yes
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = infantry
			}
			change_division_template = {
				division_template = "Infantry Division" 
			}
		}
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = militia
			}
			change_division_template = {
				division_template = "Militia Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 11 }
		#ai_spawn_infantry_division = yes
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 5 }
		#ai_spawn_militia_division = yes
	}
	else_if = {
		limit = { tag = BEL }
			
		#delete_unit_template_and_units = { division_template = "Division Infanterie" disband = yes }
		#delete_unit_template_and_units = { division_template = "Division de Cavalerie" disband = yes }
		#delete_unit_template_and_units = { division_template = "Chasseurs Ardennais" disband = yes }
		#delete_unit_template_and_units = { division_template = "Division Coloniale" disband = yes }
		#delete_unit_template_and_units = { division_template = "Garrison" disband = yes }
	
		d_ai_logic/BEL = yes
		
		every_country_division = {
			limit = {
				OR = {
					division_has_battalion_in_template = infantry
					division_has_battalion_in_template = light_infantry
					division_has_battalion_in_template = militia
				}
			}
			change_division_template = {
				division_template = "Infantry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 8 }
		#ai_spawn_infantry_division = yes
		
		division_template = {
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
			}
		}
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = cavalry
			}
			change_division_template = {
				division_template = "Cavalry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 3 }
		#ai_spawn_cavalry_division = yes
		
		
		division_template = {
			name = "Motorized Division"	
			priority = @MOTORIZED_PRIO

			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				artillery_brigade_mot = { x = 2 y = 0 }
				artillery_brigade_mot = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
			}
		}
		
		set_temp_variable = { start_xp = 0.25 }
		set_temp_variable = { start_eq = 0.01 }
		set_temp_variable = { num_spawns = 1 }
		ai_spawn_motorized_division = yes
		
	}
	else_if = {
		limit = { tag = BRA }
		#delete_unit_template_and_units = { division_template = "Divisão de Infantaria" disband = yes }
		#delete_unit_template_and_units = { division_template = "Infantaria Mecanizada" disband = yes }
		#delete_unit_template_and_units = { division_template = "Divisão de Cavalaria" disband = yes }
		#delete_unit_template_and_units = { division_template = "Divisão de Milicia" disband = yes }
		#delete_unit_template_and_units = { division_template = "Guarnição" disband = yes }
	
		d_ai_logic/BRA = yes
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = infantry
			}
			change_division_template = {
				division_template = "Infantry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 4 }
		#ai_spawn_infantry_division = yes
		
		division_template = {
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
			}
		}
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = cavalry
			}
			change_division_template = {
				division_template = "Cavalry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 2 }
		#ai_spawn_cavalry_division = yes
		
		division_template = {
			name = "Motorized Division"	
			priority = @MOTORIZED_PRIO

			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				artillery_brigade_mot = { x = 2 y = 0 }
				artillery_brigade_mot = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
			}
		}
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = semi_motorized
			}
			change_division_template = {
				division_template = "Motorized Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 1 }
		#ai_spawn_motorized_division = yes
		
	}
	else_if = {
		limit = { tag = MEX }
		#delete_unit_template_and_units = { division_template = "División de Infanteria" disband = yes }
		#delete_unit_template_and_units = { division_template = "División de Caballería" disband = yes }
		#delete_unit_template_and_units = { division_template = "Divisão de Militia" disband = yes }
		#delete_unit_template_and_units = { division_template = "Divisão de Garrison" disband = yes }
	
		d_ai_logic/MEX = yes
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = infantry
			}
			change_division_template = {
				division_template = "Infantry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 4 }
		#ai_spawn_infantry_division = yes
		
		division_template = {
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
			}
		}
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = cavalry
			}
			change_division_template = {
				division_template = "Cavalry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 2 }
		#ai_spawn_cavalry_division = yes
		
	}
	else_if = {
		limit = { tag = IRE }
		#delete_unit_template_and_units = { division_template = "División de Infanteria" disband = yes }
		#delete_unit_template_and_units = { division_template = "División de Caballería" disband = yes }
		#delete_unit_template_and_units = { division_template = "Divisão de Militia" disband = yes }
		#delete_unit_template_and_units = { division_template = "Divisão de Garrison" disband = yes }
	
		d_ai_logic/IRE = yes
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = garrison
			}
			change_division_template = {
				division_template = "Infantry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 4 }
		#ai_spawn_infantry_division = yes
		
		division_template = {
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
			}
		}
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = cavalry
			}
			change_division_template = {
				division_template = "Cavalry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 1 }
		#ai_spawn_cavalry_division = yes
		
	}
	else_if = {
		limit = { tag = LIT }
		#delete_unit_template_and_units = { division_template = "Pestininku Divizija" disband = yes }
		#delete_unit_template_and_units = { division_template = "Pestininku Brigata" disband = yes }
		#delete_unit_template_and_units = { division_template = "Militia" disband = yes }
	
		d_ai_logic/LIT = yes
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = garrison
			}
			change_division_template = {
				division_template = "Infantry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 4 }
		#ai_spawn_infantry_division = yes
		
		division_template = {
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
			}
		}
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = cavalry
			}
			change_division_template = {
				division_template = "Cavalry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 1 }
		#ai_spawn_cavalry_division = yes
		
	}
	else_if = {
		limit = { tag = LAT }
		set_temp_variable = { num_starting_infantry = 4 }
			
		#delete_unit_template_and_units = { division_template = "Kajnieku Divizija" disband = yes }
		#delete_unit_template_and_units = { division_template = "Cavalry" disband = yes }
		#delete_unit_template_and_units = { division_template = "Militia" disband = yes }
		#delete_unit_template_and_units = { division_template = "Garrison" disband = yes }
	
		d_ai_logic/LAT = yes
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = infantry
			}
			change_division_template = {
				division_template = "Infantry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 4 }
		#ai_spawn_infantry_division = yes
		
	}
	else_if = {
		limit = { tag = EST }
		set_temp_variable = { num_starting_infantry = 3 }
			
		#delete_unit_template_and_units = { division_template = "Jalaväediviisi" disband = yes }
		#delete_unit_template_and_units = { division_template = "Kavaleri Brigade" disband = yes }
		#delete_unit_template_and_units = { division_template = "Militia" disband = yes }
		#delete_unit_template_and_units = { division_template = "Garrison" disband = yes }
		
		d_ai_logic/EST = yes
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = infantry
			}
			change_division_template = {
				division_template = "Infantry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 3 }
		#ai_spawn_infantry_division = yes
		
	}
	else_if = {
		limit = { tag = POR }
		#delete_unit_template_and_units = { division_template = "Guarda Nacional Republicana" disband = yes }
		#delete_unit_template_and_units = { division_template = "Divisão de Infantaria" disband = yes }
		#delete_unit_template_and_units = { division_template = "Força de Caçadores" disband = yes }
		#delete_unit_template_and_units = { division_template = "Tropa de Montanha" disband = yes }
		#delete_unit_template_and_units = { division_template = "Brigada de Cavalaria" disband = yes }
		#delete_unit_template_and_units = { division_template = "Brigada Motorizada de Infantaria" disband = yes }
		#delete_unit_template_and_units = { division_template = "Brigada de Cavalaria Ligeira" disband = yes }
		#delete_unit_template_and_units = { division_template = "Brigada de Guarda" disband = yes }
		
		d_ai_logic/POR = yes
		
		every_country_division = {
			limit = {
				OR = {
					division_has_battalion_in_template = infantry
					division_has_battalion_in_template = light_infantry
				}
			}
			change_division_template = {
				division_template = "Infantry Division" 
			}
		}
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = garrison
			}
			change_division_template = {
				division_template = "Garrison Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 5 }
		#ai_spawn_infantry_division = yes
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 6 }
		#ai_spawn_garrison_division = yes
		
	}
	else_if = {
		limit = { tag = SWE }
		#delete_unit_template_and_units = { division_template = "Arméfördelning" disband = yes }
		#delete_unit_template_and_units = { division_template = "Kavalleribrigaden" disband = yes }
		#delete_unit_template_and_units = { division_template = "Militäromraade" disband = yes }
		#delete_unit_template_and_units = { division_template = "Militia" disband = yes }
		#delete_unit_template_and_units = { division_template = "Mekaniserat Förband" disband = yes }
		
		d_ai_logic/SWE = yes
		
		every_country_division = {
			limit = {
				OR = {
					division_has_battalion_in_template = infantry
					division_has_battalion_in_template = cavalry
				}
			}
			change_division_template = {
				division_template = "Infantry Division" 
			}
		}
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = garrison
			}
			change_division_template = {
				division_template = "Garrison Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 4 }
		#ai_spawn_infantry_division = yes
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 6 }
		#ai_spawn_garrison_division = yes
		
		
	}
	else_if = {
		limit = { tag = NOR }
		
		#delete_unit_template_and_units = { division_template = "Infanteriet Divisjon" disband = yes }
		#delete_unit_template_and_units = { division_template = "Binær Divisjon" disband = yes }
		#delete_unit_template_and_units = { division_template = "Dragonregiment" disband = yes }
		#delete_unit_template_and_units = { division_template = "Binær Brigaden" disband = yes }
		#delete_unit_template_and_units = { division_template = "Garnisonen art" disband = yes }
		#delete_unit_template_and_units = { division_template = "Garnisonen" disband = yes }
		#delete_unit_template_and_units = { division_template = "Varanger Bataljon" disband = yes }
		#delete_unit_template_and_units = { division_template = "Alta Bataljon" disband = yes }
			
		d_ai_logic/NOR = yes
		
		every_country_division = {
			limit = {
				OR = {
					division_has_battalion_in_template = garrison
					division_has_battalion_in_template = infantry
				}
				NOT = { division_has_battalion_in_template = mountaineers }
			}
			change_division_template = {
				division_template = "Garrison Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 10 }
		#ai_spawn_garrison_division = yes
		
		division_template = {
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
			}
		}
		
		every_country_division = {
			limit = {
				division_has_battalion_in_template = cavalry
			}
			change_division_template = {
				division_template = "Cavalry Division" 
			}
		}
		
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 2 }
		#ai_spawn_cavalry_division = yes
		
		division_template = {
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
			}
		}
		every_country_division = {
			limit = {
				division_has_battalion_in_template = mountaineers
			}
			change_division_template = {
				division_template = "Mountaineers Division" 
			}
		}
		#set_temp_variable = { start_xp = 0.25 }
		#set_temp_variable = { start_eq = 0.01 }
		#set_temp_variable = { num_spawns = 4 }
		#ai_spawn_mountaineer_division = yes
		
	}
	
}

ai_infantry_templates/warlords = {
	ai_infantry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 4 } #1
	add_to_temp_array = { num_valid_templates = 4 } #2
	add_to_temp_array = { num_valid_templates = 5 } #3
	add_to_temp_array = { num_valid_templates = 4 } #4
	add_to_temp_array = { num_valid_templates = 2 } #5
	add_to_temp_array = { num_valid_templates = 2 } #6
	add_to_temp_array = { num_valid_templates = 1 } #7
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_infantry_template
		
		division_template = {
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				irregulars_unit = { x = 0 y = 0 }
				irregulars_unit = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				
				irregulars_unit = { x = 1 y = 0 }
				irregulars_unit = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
			}

			priority = @INFANTRY_PRIO
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					OR ={
						division_has_battalion_in_template = irregulars_unit
						division_has_battalion_in_template = garrison
					}
				}
				change_division_template = {
					division_template = "Infantry Division" 
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_mountain_artillery_brigade = yes
				ai_has_engineer = yes
				num_of_military_factories > 39
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 irregulars, +mount arty, +engineer
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				irregulars_unit = { x = 0 y = 0 }
				irregulars_unit = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				
				irregulars_unit = { x = 1 y = 0 }
				irregulars_unit = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
				irregulars_unit = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				OR = {
					is_subject_of = JAP 
					num_of_military_factories > 49
				}
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 irregulars
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				irregulars_unit = { x = 0 y = 0 }
				irregulars_unit = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				irregulars_unit = { x = 0 y = 3 }
				
				irregulars_unit = { x = 1 y = 0 }
				irregulars_unit = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
				irregulars_unit = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 3 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = { flag = ai_infantry_template value = 3 days > 50 }
				OR = {
					is_subject_of = JAP 
					num_of_military_factories > 59
				}
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 mount arty
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				irregulars_unit = { x = 0 y = 0 }
				irregulars_unit = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				irregulars_unit = { x = 0 y = 3 }
				
				irregulars_unit = { x = 1 y = 0 }
				irregulars_unit = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
				irregulars_unit = { x = 1 y = 3 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 4 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = { flag = ai_infantry_template value = 4 days > 80 }
				OR = {
					is_subject_of = JAP 
					num_of_military_factories > 69
				}
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +1 mount arty
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				irregulars_unit = { x = 0 y = 0 }
				irregulars_unit = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				irregulars_unit = { x = 0 y = 3 }
				irregulars_unit = { x = 0 y = 4 }
				
				irregulars_unit = { x = 1 y = 0 }
				irregulars_unit = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
				irregulars_unit = { x = 1 y = 3 }
				irregulars_unit = { x = 1 y = 4 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 5 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = { flag = ai_infantry_template value = 5 days > 80 }
				OR = {
					is_subject_of = JAP 
					num_of_military_factories > 79
				}
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +4 normal inf, -4 irregulars
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				irregulars_unit = { x = 0 y = 2 }
				irregulars_unit = { x = 0 y = 3 }
				irregulars_unit = { x = 0 y = 4 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				irregulars_unit = { x = 1 y = 2 }
				irregulars_unit = { x = 1 y = 3 }
				irregulars_unit = { x = 1 y = 4 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 6 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				has_country_flag = { flag = ai_infantry_template value = 6 days > 80 }
				OR = {
					is_subject_of = JAP 
					num_of_military_factories > 79
				}
				OR = {
					check_variable = { field_strength > 0.98 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +4 normal inf, -4 irregulars
			name = "Infantry Division"
			template_counter = @C_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 0 y = 3 }
				irregulars_unit = { x = 0 y = 4 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 1 y = 3 }
				irregulars_unit = { x = 1 y = 4 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
			}

			priority = @INFANTRY_PRIO
		}
	}
	
	ai_infantry_templates = yes 
}
ai_heavy_infantry_templates/warlords = {
	ai_heavy_infantry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 4 } #1
	add_to_temp_array = { num_valid_templates = 4 } #2
	add_to_temp_array = { num_valid_templates = 5 } #3
	add_to_temp_array = { num_valid_templates = 5 } #4
	add_to_temp_array = { num_valid_templates = 5 } #5
	add_to_temp_array = { num_valid_templates = 3 } #6
	add_to_temp_array = { num_valid_templates = 2 } #7
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_heavy_infantry_template }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 } 
		set_country_flag = ai_heavy_infantry_template
		
		division_template = {
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				recon = { x = 0 y = 1 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = infantry
				}
				change_division_template = {
					division_template = "Heavy Infantry Division"
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 1 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				ai_has_mountain_artillery_brigade = yes
				ai_has_engineer = yes
				has_equipment = { artillery_equipment > 200 } #be careful, we might not even produce it but got it from foreign countries
			}
		}
		
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		
		division_template = { # +arty, +mount arty, +engineer
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				recon = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_heavy_infantry_template value = 2 }

			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {	
				#CONDITIONS
				
				#check_variable = { ai_infantry_template = 4 }
		
				num_divisions > 60
				num_of_military_factories > 59
				OR = {
					check_variable = { field_strength > 0.96 }
					check_variable = { stock_ratio > 0.08 }
				}
			}
		}
		
		set_temp_variable = { ai_has_added_template = 1 } 
		modify_country_flag = { flag = ai_heavy_infantry_template value = 1 }
		
		division_template = { # +1 arty
			name = "Heavy Infantry Division"
			template_counter = @C_HEAVY_INFANTRY

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 } 
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
			}

			priority = @HEAVY_INFANTRY_PRIO
		}
	}
	ai_heavy_infantry_templates = yes
}

ai_infantry_templates/generic_normal = {
	ai_infantry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = {
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
				tag = CZE
			}
			every_country_division = {
				limit = {
					division_has_battalion_in_template = garrison
				}
				change_division_template = {
					division_template = "Infantry Division"
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.9 }
				check_variable = { mtth:ai_num_of_military_factories > 29 }
				
				ai_has_anti_tank_brigade = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = { # +AT
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.9 }
				check_variable = { mtth:ai_num_of_military_factories > 29 }
				
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = { # +signal
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	ai_infantry_templates = yes
}

ai_infantry_templates/generic_jungle = {
	ai_infantry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #1
	add_to_temp_array = { num_valid_templates = 3 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = {
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				jungle_support = { x = 0 y = 3 }
			}
		}
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				change_division_template = {
					division_template = "Infantry Division"
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.9 }
				check_variable = { mtth:ai_num_of_military_factories > 29 }
				
				ai_has_anti_tank_brigade = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = { # +AT
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				jungle_support = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.9 }
				check_variable = { mtth:ai_num_of_military_factories > 29 }
				
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
			
		division_template = { # +signal
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				infantry = { x = 2 y = 0 }
				infantry = { x = 2 y = 1 }
				infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
				artillery_brigade = { x = 3 y = 2 }
				artillery_brigade = { x = 3 y = 3 }
				anti_tank_brigade = { x = 3 y = 4 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
				jungle_support = { x = 0 y = 4 }
			}
		}
	}
	ai_infantry_templates = yes
}

ai_infantry_templates/generic_small = {
	ai_infantry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				#ai_has_DIV_HQ = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = {
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { field_strength > 0.9 }
				
				ai_has_engineer = yes
				ai_has_artillery_brigade = yes
				
				check_variable = { mtth:ai_num_of_military_factories > 9 }
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +2 arty, +engineer
			name = "Infantry Division"	
			priority = @INFANTRY_PRIO

			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
			}
		}
	}
	ai_infantry_templates = yes
}

ai_cavalry_templates/generic_small = {
	ai_cavalry_templates = yes 
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 1 } #1
	add_to_temp_array = { num_valid_templates = 1 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_cavalry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				#check_variable = { mtth:ai_num_of_military_factories > 24 }
				ai_has_artillery_brigade = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = ai_cavalry_template
		
		division_template = {
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.95 }
				ai_has_signal_company = yes
				check_variable = { mtth:ai_num_of_military_factories > 29 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_infantry_template value = 1 }
		
		division_template = { # +signal
			name = "Cavalry Division"
			template_counter = @C_CAVALRY
			priority = @CAVALRY_PRIO
			
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
				cavalry = { x = 0 y = 2 }
				
				cavalry = { x = 1 y = 0 }
				cavalry = { x = 1 y = 1 }
				cavalry = { x = 1 y = 2 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			
			support = {
				DIV_HQ = { x = 0 y = 0 }
				recon_cav = { x = 0 y = 1 }
				engineer = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	ai_cavalry_templates = yes 
}
ai_motorized_templates/generic_small = {
	ai_motorized_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #2
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_motorized_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				surrender_progress < 0.65
				
				#check_variable = { mtth:ai_num_of_military_factories > 40 }
				check_variable = { field_strength > 0.95 }
				check_variable = { ai_division_limit_ratio > 0.7 }
				
				ai_has_DIV_HQ_car = yes
				ai_has_engineer_mot = yes
				ai_has_signal_company_mot = yes
				
				ai_has_semi_motorized = yes
				ai_has_artillery_brigade = yes
				
				check_variable = { stock_ratio > 0.05 }
				#check_variable = { mtth:ai_num_of_military_factories > 44 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = {
			name = "Motorized Division"	
			priority = @MOTORIZED_PRIO

			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				artillery_brigade_mot = { x = 2 y = 0 }
				artillery_brigade_mot = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				signal_company_mot = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_motorized_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				has_country_flag = { flag = ai_motorized_template value = 2 days > 50 }
				check_variable = { num_battalions_with_type@semi_motorized > 4 }
				
				ai_has_logistics_company_car = yes 
				
				set_temp_variable = { trigger = 0.90 }
				set_temp_variable = { equipment = token:artillery_equipment }
				ai_field_strength_trigger = yes 
				
				check_variable = { mtth:ai_num_of_military_factories > 44 }
				check_variable = { field_strength > 0.95 }
				check_variable = { ai_division_limit_ratio > 0.65 }
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_motorized_template value = 1 }
		
		division_template = { # +1 arty, +logistics
			name = "Motorized Division"	
			priority = @MOTORIZED_PRIO

			regiments = {
				semi_motorized = { x = 0 y = 0 }
				semi_motorized = { x = 0 y = 1 }
				semi_motorized = { x = 0 y = 2 }
				
				semi_motorized = { x = 1 y = 0 }
				semi_motorized = { x = 1 y = 1 }
				semi_motorized = { x = 1 y = 2 }
				
				artillery_brigade_mot = { x = 2 y = 0 }
				artillery_brigade_mot = { x = 2 y = 1 }
				artillery_brigade_mot = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ_car = { x = 0 y = 0 }
				engineer_mot = { x = 0 y = 1 }
				signal_company_mot = { x = 0 y = 2 }
				logistics_company_car = { x = 0 y = 3 }
			}
		}
	}
	ai_motorized_templates = yes
}

ai_motorized_templates/generic = {
	ai_motorized_templates/generic_small = yes 
}
ai_garrison_templates/generic = {
	ai_garrison_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_garrison_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_garrison_template value = 1 }
		
		division_template = {
			name = "Garrison Division"	
			priority = @GARRISON_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_garrison_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.9 }
				check_variable = { mtth:ai_num_of_military_factories > 30 }
				
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_garrison_template value = 1 }
			
		division_template = { # +1 lt inf, +signal
			name = "Garrison Division"	
			priority = @GARRISON_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				
				artillery_brigade = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				signal_company = { x = 0 y = 2 }
			}
		}
	}
}

ai_militia_templates/generic_small = {
	ai_militia_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_militia_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_militia_template value = 1 }
		
		division_template = {
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				militia = { x = 2 y = 0 }
				militia = { x = 2 y = 1 }
				militia = { x = 2 y = 2 }
				
			}
		}
		
		if = {
			limit = {
				check_variable = { ai_template_skip = 0 }
			}
			every_country_division = {
				change_division_template = {
					division_template = "Militia Division"
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_militia_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { mtth:ai_num_of_military_factories > 6 }
				check_variable = { ai_division_limit_ratio > 0.45 }
				
				ai_has_engineer = yes
				
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_militia_template value = 1 }
		
		division_template = { # +engineer
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				militia = { x = 2 y = 0 }
				militia = { x = 2 y = 1 }
				militia = { x = 2 y = 2 }
				
			}
			support = {
				engineer = { x = 0 y = 0 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_militia_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { mtth:ai_num_of_military_factories > 9 }
				check_variable = { ai_division_limit_ratio > 0.45 }
				check_variable = { field_strength > 0.9 }
				
				ai_has_artillery_brigade = yes
				
				check_variable = { field_strength > 0.92 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_militia_template value = 1 }
		
		division_template = { # +1 arty
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				militia = { x = 2 y = 0 }
				militia = { x = 2 y = 1 }
				militia = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
			}
			support = {
				engineer = { x = 0 y = 0 }
			}
		}
	}
	ai_militia_templates = yes
}

ai_militia_templates/generic_normal = {
	ai_militia_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_militia_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				ai_has_DIV_HQ = yes 
				ai_has_engineer = yes
				ai_has_recon_cav = yes
				
				ai_has_artillery_brigade = yes 
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_militia_template value = 1 }
		
		division_template = {
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				militia = { x = 2 y = 0 }
				militia = { x = 2 y = 1 }
				militia = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_militia_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
				check_variable = { field_strength > 0.9 }
				check_variable = { mtth:ai_num_of_military_factories > 8 }
				
				ai_has_signal_company = yes
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_militia_template value = 1 }
		
		division_template = { # +signal
			name = "Militia Division"	
			priority = @MILITIA_PRIO

			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 0 y = 2 }
				
				militia = { x = 1 y = 0 }
				militia = { x = 1 y = 1 }
				militia = { x = 1 y = 2 }
				
				militia = { x = 2 y = 0 }
				militia = { x = 2 y = 1 }
				militia = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}	
	ai_militia_templates = yes
}

ai_light_infantry_templates/generic_desert = {
	ai_light_infantry_templates = yes
	
	clear_temp_array = num_valid_templates
	add_to_temp_array = { num_valid_templates = 2 } #1
	add_to_temp_array = { num_valid_templates = 2 } #1
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_light_infantry_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_light_infantry_template value = 1 }
		
		division_template = {
			name = "Light Infantry Division"	
			priority = @LIGHT_INFANTRY_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				light_infantry = { x = 2 y = 2 }
				
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { mtth:ai_num_of_military_factories > 6 }
				check_variable = { ai_division_limit_ratio > 0.45 }
				
				ai_has_DIV_HQ = yes
				ai_has_engineer = yes
				
				check_variable = { field_strength > 0.9 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_light_infantry_template value = 1 }
		
		division_template = { # +DIV HQ, +engineer
			name = "Light Infantry Division"	
			priority = @LIGHT_INFANTRY_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				light_infantry = { x = 2 y = 2 }
				
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_light_infantry_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { mtth:ai_num_of_military_factories > 9 }
				check_variable = { ai_division_limit_ratio > 0.45 }
				check_variable = { field_strength > 0.9 }
				
				ai_has_artillery_brigade = yes
				
				check_variable = { field_strength > 0.92 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_light_infantry_template value = 1 }
		
		division_template = { # +2 arty, +desert support
			name = "Light Infantry Division"	
			priority = @LIGHT_INFANTRY_PRIO

			regiments = {
				light_infantry = { x = 0 y = 0 }
				light_infantry = { x = 0 y = 1 }
				light_infantry = { x = 0 y = 2 }
				
				light_infantry = { x = 1 y = 0 }
				light_infantry = { x = 1 y = 1 }
				light_infantry = { x = 1 y = 2 }
				
				light_infantry = { x = 2 y = 0 }
				light_infantry = { x = 2 y = 1 }
				light_infantry = { x = 2 y = 2 }
				
				artillery_brigade = { x = 3 y = 0 }
				artillery_brigade = { x = 3 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				desert_support = { x = 0 y = 2 }
			}
		}
	}
	ai_light_infantry_templates = yes
}

ai_mountaineer_templates/generic_small = {
	ai_mountaineer_templates = yes
	
	if = {
		limit = {
			NOT = { has_country_flag = ai_mountaineers_template }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { ai_division_limit_ratio > 0.35 }
				
				check_variable = { field_strength > 0.95 }
				
				ai_has_mountaineers = yes 
				ai_has_mountain_artillery_brigade = yes 
				
				ai_has_DIV_HQ = yes 
				ai_has_engineer = yes 
				ai_has_recon_cav = yes 
				
				#check_variable = { mtth:ai_num_of_military_factories > 20 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		set_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = {
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 1 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { field_strength > 0.9 }
				
				ai_has_signal_company = yes
				
				check_variable = { mtth:ai_num_of_military_factories > 26 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +signal
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = { flag = ai_mountaineers_template value = 2 }
			
			if = { limit = { check_variable = { ai_template_skip = 1 } } template_bypass = yes }
			else = {
				#CONDITIONS
				check_variable = { field_strength > 0.95 }
				
				check_variable = { mtth:ai_num_of_military_factories > 29 }
			}
		}
		set_temp_variable = { ai_has_added_template = 1 }
		modify_country_flag = { flag = ai_mountaineers_template value = 1 }
		
		division_template = { # +1 mountaineers, +1 mount arty
			name = "Mountaineers Division"	
			priority = @MOUNTAINEERS_PRIO

			regiments = {
				mountaineers = { x = 0 y = 0 }
				mountaineers = { x = 0 y = 1 }
				mountaineers = { x = 0 y = 2 }
				mountaineers = { x = 0 y = 3 }
				
				mountaineers = { x = 1 y = 0 }
				mountaineers = { x = 1 y = 1 }
				mountaineers = { x = 1 y = 2 }
				
				mountain_artillery_brigade = { x = 2 y = 0 }
				mountain_artillery_brigade = { x = 2 y = 1 }
				mountain_artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				DIV_HQ = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				recon_cav = { x = 0 y = 2 }
				signal_company = { x = 0 y = 3 }
			}
		}
	}
	ai_mountaineer_templates = yes
}
##########################################################################################################

ai_spawn_infantry_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Infantry Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_assault_infantry_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Assault Infantry Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_light_infantry_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Light Infantry Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_heavy_infantry_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Heavy Infantry Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_garrison_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Garrison Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_militia_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Militia Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_cavalry_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Cavalry Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_motorized_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Motorized Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_light_armor_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Light Armor Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_light_armor_alt_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Light Armor Division (alt)\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_medium_armor_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Medium Armor Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_medium_armor_alt_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Medium Armor Alt Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_heavy_armor_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Heavy Armor Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_heavy_armor_alt_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Heavy Armor Alt Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}
ai_spawn_marines_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Marines Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}

ai_spawn_mountaineer_division = {
	clamp_temp_variable = { var = start_xp min = 0 }
	clamp_temp_variable = { var = start_eq min = 0.01 }
	capital_scope = {
		meta_effect = {
			text = {
				create_unit = {
					division = "division_name = { is_name_ordered = yes name_order = 1 } division_template = \"Mountaineers Division\" start_experience_factor = [XP] start_equipment_factor = [EQ]"
					owner = PREV
					count = [NUM]
				}
			}
			XP = "[?start_xp]"
			EQ = "[?start_eq]"
			NUM = "[?num_spawns?1]"
		}
	}
}

d_ai_level_up_templates = {
	set_temp_variable = { ai_template_skip = 1 }
	meta_effect = {
		text = {
			d_ai_logic/[X] = yes 
		}
		X = "[?THIS.GetTag]"
	}
}
d_ai_unlock_all_templates = {
	set_temp_variable = { ai_template_skip = 1 }
	
	for_loop_effect = {
		end = 20
		
		meta_effect = {
			text = {
				d_ai_logic/[X] = yes 
			}
			X = "[?THIS.GetTag]"
		}
	}
}

ai_infantry_templates = {
	set_temp_variable = { r = token:role_infantry }
	set_temp_variable = { t = token:role_infantry_title }
	
	ai_template_alpha_omega = yes
}

ai_garrison_templates = {
	
	set_temp_variable = { r = token:role_garrison }
	set_temp_variable = { t = token:role_garrison_title }
	
	ai_template_alpha_omega = yes
}
ai_assault_infantry_templates = {
	set_temp_variable = { r = token:role_assault_infantry }
	set_temp_variable = { t = token:role_assault_infantry_title }
	
	ai_template_alpha_omega = yes
	
}
ai_light_infantry_templates = {
	set_temp_variable = { r = token:role_light_infantry }
	set_temp_variable = { t = token:role_light_infantry_title }
	
	ai_template_alpha_omega = yes
	
}
ai_heavy_infantry_templates = {
	set_temp_variable = { r = token:role_heavy_infantry }
	set_temp_variable = { t = token:role_heavy_infantry_title }
	
	ai_template_alpha_omega = yes
	
}
ai_militia_templates = {
	set_temp_variable = { r = token:role_militia }
	set_temp_variable = { t = token:role_militia_title }
	
	ai_template_alpha_omega = yes
	
}
ai_cavalry_templates = {
	set_temp_variable = { r = token:role_cavalry }
	set_temp_variable = { t = token:role_cavalry_title }
	
	ai_template_alpha_omega = yes
	
}
ai_light_armor_templates = {
	set_temp_variable = { r = token:role_light_armor }
	set_temp_variable = { t = token:role_light_armor_title }
	
	ai_template_alpha_omega = yes
	
}
ai_light_armor_alt_templates = {
	set_temp_variable = { r = token:role_light_armor_alt }
	set_temp_variable = { t = token:role_light_armor_alt_title }
	
	ai_template_alpha_omega = yes
	
}
ai_medium_armor_templates = {
	set_temp_variable = { r = token:role_medium_armor }
	set_temp_variable = { t = token:role_medium_armor_title }
	
	ai_template_alpha_omega = yes
	
}
ai_medium_armor_alt_templates = {
	set_temp_variable = { r = token:role_medium_armor_alt }
	set_temp_variable = { t = token:role_medium_armor_alt_title }
	
	ai_template_alpha_omega = yes
	
}
ai_heavy_armor_templates = {
	set_temp_variable = { r = token:role_heavy_armor }
	set_temp_variable = { t = token:role_heavy_armor_title }
	
	ai_template_alpha_omega = yes
	
}
ai_motorized_templates = {
	set_temp_variable = { r = token:role_motorized }
	set_temp_variable = { t = token:role_motorized_title }
	
	ai_template_alpha_omega = yes
	
}
ai_mountaineer_templates = {
	set_temp_variable = { r = token:role_mountaineers }
	set_temp_variable = { t = token:role_mountaineers_title }
	
	ai_template_alpha_omega = yes
	
}
ai_marine_templates = {
	set_temp_variable = { r = token:role_marines }
	set_temp_variable = { t = token:role_marines_title }
	
	ai_template_alpha_omega = yes
	
}

ai_template_alpha_omega = {

	if = { #These Effects fire at the start of any ai_XXXXXX_template/ effect
		limit = {
			NOT = { check_variable = { current_role_token = r } }
		}
		
		set_temp_variable = { current_role_token = r }
		set_temp_variable = { current_role_title = t }
		
		if = {
			limit = { #a previous role has unlocked a template. set the var to 0, and restore it once this role has finished its checks
				check_variable = { ai_has_added_template = 1 }
			}
			set_temp_variable = { save_ai_has_added_template = 1 }
			set_temp_variable = { ai_has_added_template = 0 }
		}
		
		if = {
			limit = {
				NOT = { is_in_array = { ai_roles = current_role_token } }
			}
			add_to_array = { ai_roles = current_role_token }
			add_to_array = { ai_roles_title = current_role_title }
		}
		
		if = {
			limit = {
				NOT = { 
					AND = {
						check_variable = { ai_template_skip = 1 }
						check_variable = { ai_template_skip@var:current_role_token = 0 }
					}
				}
			}
			#log = "CLEAR ARRAY [?current_role_token.GetTokenKey]"
			clear_temp_array = either_support
			clear_temp_array = either_regiment
			clear_temp_array = either_regiment_x
		}
		
	}
	else = { #these effects are fired at the end of any ai_XXXXXX_template/ effect
	
		if = {
			limit = { #new template added for the current role!
				check_variable = { ai_template_skip = 0 }
				check_variable = { ai_has_added_template = 1 }
			}
			set_temp_variable = { save_ai_has_added_template = 0 }
			
			add_to_array = { ai_template_unlocked@var:current_role_token = global.date }
			log = "[Root.GetTag] | [GetYear] [GetMonth] | TEMPLATE UNLOCKED | [?current_role_token.GetTokenKey]"
			
			# clear the either arrays if a new template got unlocked, since it will include all units
			
			if = {
				limit = {
					OR = {
						check_variable = { ai_either_support@var:current_role_token^num > 0 }
						check_variable = { ai_either_regiment@var:current_role_token^num > 0 }
					}
				}
				for_each_loop = {
					array = ai_either_support_tech@var:current_role_token
					
					remove_from_array = { ai_template_either_tech = v }
				}
				for_each_loop = {
					array = ai_either_regiment@var:current_role_token
					
					remove_from_array = { ai_template_either_tech = v }
				}
				
				clear_array = ai_either_support@var:current_role_token
				clear_array = ai_either_support_tech@var:current_role_token
				
				clear_array = ai_either_regiment@var:current_role_token
				clear_array = ai_either_regiment_tech@var:current_role_token
				clear_array = ai_either_regiment_x@var:current_role_token
			}
		}
		else_if = { #if no template got unlocked for this role, but another role previously unlocked one then restore the var
			limit = {
				check_variable = { save_ai_has_added_template = 1 }
			}
			set_temp_variable = { save_ai_has_added_template = 0 }
			set_temp_variable = { ai_has_added_template = 1 }
		}
		
		ai_update_template_either = yes #update template either mechanic

		set_temp_variable = { current_role_token = 0 }
		set_temp_variable = { current_role_title = 0 }
	}

}

ai_update_template_either = {
	if = {
		limit = {
			check_variable = { ai_template_skip = 0 }
			OR = {
				check_variable = { either_regiment^num > 0 }
				check_variable = { either_support^num > 0 }
			}
		}
		
		set_temp_variable = { has_template_either = 1 }
		
		meta_effect = {
			text = {
				set_division_template_lock = {
					division_template = "[X]"
					is_locked = yes
				}
			}
			X = "[?current_role_title.GetTokenLocalizedKey]"
		}
		for_each_loop = {
			array = either_support
			value = either_v
			
			set_temp_variable = { unit_current_num = unit_techs^num }
			if = {
				limit = {
					meta_trigger = {
						text = {
							ai_has_[X] = yes
						}
						X = "[?either_v.GetTokenKey]"
					}
				}
				#log = "Has support [?either_v.GetTokenKey]"
				add_to_temp_variable = { either_fullfilled = 1 }
				meta_effect = {
					text = {
						add_units_to_division_template = {
							template_name = "[ROLE]"
							support = {
								[X] = 0
							}
						}
					}
					ROLE = "[?current_role_title.GetTokenLocalizedKey]"
					X = "[?either_v.GetTokenKey]"
				}
				#log = "add [?either_v.GetTokenKey] to [?current_role_title.GetTokenLocalizedKey]"
			}
			else = {
				#log = "Does not have support [?either_v.GetTokenKey] in role [?current_role_token.GetTokenKey]"
				add_to_array = { ai_either_support@var:current_role_token = either_v }
				add_to_array = { ai_either_support_tech@var:current_role_token = unit_techs^unit_current_num }
				
				add_to_array = { ai_template_either_tech = unit_techs^unit_current_num }
				
				#log = "[?ai_either_support@var:current_role_token^num] ai_either_support num"
				#log = "[?ai_template_either_tech^num] ai_template_either_tech num"
			}
		}
		for_each_loop = {
			array = either_regiment
			value = either_vs
			
			set_temp_variable = { unit_current_num = unit_techs^num }
			set_temp_variable = { x_entry = either_regiment_x^i }
			if = {
				limit = {
					meta_trigger = {
						text = {
							ai_has_[X] = yes
						}
						X = "[?either_vs.GetTokenKey]"
					}
				}
				add_to_temp_variable = { either_fullfilled = 1 }
				meta_effect = {
					text = {
						add_units_to_division_template = {
							template_name = "[ROLE]"
							regiments = {
								[X] = [Y]
							}
						}
					}
					ROLE = "[?current_role_title.GetTokenLocalizedKey]"
					X = "[?either_vs.GetTokenKey]"
					Y = "[?x_entry]"
				}
			}
			else = {
				add_to_array = { ai_either_regiment@var:current_role_token = either_vs }
				add_to_array = { ai_either_regiment_tech@var:current_role_token = unit_techs^unit_current_num }
				add_to_array = { ai_either_regiment_x@var:current_role_token = x_entry }
				
				add_to_array = { ai_template_either_tech = unit_techs^unit_current_num }
				
				#log = "[?ai_either_regiment@var:current_role_token^num] ai_either_regiment num"
				#log = "[?ai_template_either_tech^num] ai_template_either_tech num"
			}
		}
		
		meta_effect = {
			text = {
				set_division_template_lock = {
					division_template = "[X]"
					is_locked = no
				}
			}
			X = "[?current_role_title.GetTokenLocalizedKey]"
		}
		
		if = {
			limit = {
				check_variable = { ai_either_regiment@var:current_role_token^num = 0 }
				check_variable = { ai_either_support@var:current_role_token^num = 0 }
			}
			
			#log = "[This.GetTag] | TEMPLATE | [?current_role_token.GetTokenKey] | TEMPLATE COMPLETE!"
		}
	}

}

ai_templates_change_starting_units = {
	country_lock_all_division_template = no
	
	every_country_division = {
		if = {
			limit = {
				division_has_battalion_in_template = ai_infantry
			}
			change_division_template = {
				division_template = "Infantry Division"
			}
		}
		else_if = {
			limit = {
				division_has_battalion_in_template = ai_light_infantry
			}
			change_division_template = {
				division_template = "Light Infantry Division"
			}
		}
		else_if = {
			limit = {
				division_has_battalion_in_template = ai_heavy_infantry
			}
			change_division_template = {
				division_template = "Heavy Infantry Division"
			}
		}
		else_if = {
			limit = {
				division_has_battalion_in_template = ai_mountaineers
			}
			change_division_template = {
				division_template = "Mountaineers Division"
			}
		}
		else_if = {
			limit = {
				division_has_battalion_in_template = ai_marines
			}
			change_division_template = {
				division_template = "Marines Division"
			}
		}
		else_if = {
			limit = {
				division_has_battalion_in_template = ai_garrison
			}
			change_division_template = {
				division_template = "Garrison Division"
			}
		}
		else_if = {
			limit = {
				division_has_battalion_in_template = ai_cavalry
			}
			change_division_template = {
				division_template = "Cavalry Division"
			}
		}
		else_if = {
			limit = {
				division_has_battalion_in_template = ai_motorized
			}
			change_division_template = {
				division_template = "Motorized Division"
			}
		}
		else_if = {
			limit = {
				division_has_battalion_in_template = ai_light_armor
			}
			change_division_template = {
				division_template = "Light Armor Division"
			}
		}
		else_if = {
			limit = {
				division_has_battalion_in_template = ai_medium_armor
			}
			change_division_template = {
				division_template = "Medium Armor Division"
			}
		}
		else_if = {
			limit = {
				division_has_battalion_in_template = ai_heavy_armor
			}
			change_division_template = {
				division_template = "Heavy Armor Division"
			}
		}
	}
}

ai_templates_on_end_effect = { #fires at the very end of ai_templates/TAG
	if = {
		limit = {
			check_variable = { ai_template_skip = 0 }
		}
			
		ai_update_division_production = yes 
		
		ai_update_needed_unit_research = yes
		
		if = {
			limit = {
				date < 1936.2.5
				has_country_flag = ai_country_logic
				NOT = {
					tag = NZL
					tag = MAN
					tag = SWE
					tag = BEL
					tag = HOL
					tag = CZE 
					tag = LIT
					tag = LAT
					tag = EST
					tag = SWI
					tag = PRC
					tag = POR
					tag = FIN
					tag = IRE
					tag = BRA
					tag = IRQ
					tag = NOR
					tag = MEX
					tag = ALB
					tag = DEN
					tag = ETH
					tag = NEP
					tag = MON
					tag = AFG
					tag = ARG
					tag = GXC
					tag = EGY
					tag = SDC
					tag = SIA
				}
			}
			meta_effect = {
				text = {
					ai_templates_startup/[X] = yes
				}
				X = "[Root.GetTag]"
			}
		}
			
		if = {
			limit = {
				date < 1936.1.2
			}
			set_temp_variable = { BASE:infantry 				= 0 }
			set_temp_variable = { BASE:assault_infantry 		= 0 }
			set_temp_variable = { BASE:militia 					= 0 }
			set_temp_variable = { BASE:light_infantry 			= 0 }
			set_temp_variable = { BASE:heavy_infantry 			= 0 }
			set_temp_variable = { BASE:garrison 				= 0 }
			set_temp_variable = { BASE:cavalry 					= 0 }
			set_temp_variable = { BASE:motorized 				= 0 }
			set_temp_variable = { BASE:light_armor 				= 0 }
			set_temp_variable = { BASE:light_armor_alt 			= 0 }
			set_temp_variable = { BASE:medium_armor 			= 0 }
			set_temp_variable = { BASE:medium_armor_alt 		= 0 }
			set_temp_variable = { BASE:heavy_armor 				= 0 }
			set_temp_variable = { BASE:heavy_armor_alt 			= 0 }
			set_temp_variable = { BASE:marines 					= 0 }
			set_temp_variable = { BASE:mountaineers 			= 0 }
		}
		
		if = {
			limit = {
				check_variable = { tech_trigger^num > 0 }
			}
				
			for_each_loop = {
				array = ai_designs
				value = actual_design
				break = none
				index = none_i
				
				if = {
					limit = {
						clear_temp_array = tech_trigger
						meta_trigger = {
							text = {
								HSD_[T]_[X]_button_trigger = yes
							}
							T = "[This.GetTag]"
							X = "[?actual_design.GetTokenKey]"
						}
					}
				}
				for_each_loop = {
					array = tech_trigger
					value = actual_tech
					break = none
					index = none_i
					
					set_technology = { var:actual_tech = 1 } 
				}
				
				meta_effect = {
					text = {
						HSD_[T]_[X]_button_effect = yes
						set_country_flag = HSD_[T]_[X]
					}
					T = "[This.GetTag]"
					X = "[?actual_design.GetTokenKey]"
				}
					
			}
		}
	}
}

ai_respawn_template = {
	if = {
		limit = {
			meta_trigger = {
				text = {
					has_country_flag = ai_[X]_template
				}
				X = "[?role_v.GetTokenLocalizedKey]"
			}
		}
		meta_effect = {
			text = {
				modify_country_flag = { flag = ai_[X]_template value = -1 }
			}
			X = "[?role_v.GetTokenLocalizedKey]"
		}
		
		set_temp_variable = { ai_template_skip = 1 }
		set_temp_variable = { ai_template_skip@var:role_v = 1 }
			
		set_temp_variable = { ai_ignore_air_production = 1 }
		set_temp_variable = { ai_ignore_deployment = 1 }
		set_temp_variable = { ai_ignore_research = 1 }
		set_temp_variable = { ai_ignore_naval_production = 1 }
		
		ai_update_division_templates = yes
		set_temp_variable = { ai_template_skip@var:role_v = 0 }
		
		set_temp_variable = { ai_template_skip = 0 }
		
		#clear_array = ai_either_regiment@var:role_v
		#clear_array = ai_either_regiment_tech@var:role_v
		#clear_array = ai_either_regiment_x@var:role_v
		#clear_array = ai_either_support@var:role_v
		#clear_array = ai_either_support_tech@var:role_v
		
		set_temp_variable = { current_role_title = ai_roles_title^role_index }
		ai_update_template_either = yes
		
		#log = "new template created [?current_role_title.GetTokenKey] [?role_index] index"
	}
	
}

template_tag_current_role = {
	if = {
		limit = {
			meta_trigger = {
				text = {
					has_template = "[X]"
				}
				X = "[?current_role_title.GetTokenLocalizedKey]"
			}
		}
		meta_effect = {
			text = {
				set_division_template_lock = { division_template = "[X]" is_locked = yes }
				add_units_to_division_template = {
					template_name = "[X]"
					support = {
						ai_tag = 1
					}
				}
				set_division_template_lock = { division_template = "[X]" is_locked = no }
			}
			X = "[?current_role_title.GetTokenLocalizedKey]"
		}
	}

	if = {
		limit = {
			meta_trigger = {
				text = {
					has_template = "[X] 2"
				}
				X = "[?current_role_title.GetTokenLocalizedKey]"
			}
		}
		meta_effect = {
			text = {
				set_division_template_lock = { division_template = "[X] 2" is_locked = yes }
				add_units_to_division_template = {
					template_name = "[X] 2"
					support = {
						ai_tag = 1
					}
				}
				set_division_template_lock = { division_template = "[X] 2" is_locked = no }
			}
			X = "[?current_role_title.GetTokenLocalizedKey]"
		}
		if = {
			limit = {
				meta_trigger = {
					text = {
						has_template = "[X] 3"
					}
					X = "[?current_role_title.GetTokenLocalizedKey]"
				}
			}
			meta_effect = {
				text = {
					set_division_template_lock = { division_template = "[X] 3" is_locked = yes }
					add_units_to_division_template = {
						template_name = "[X] 3"
						support = {
							ai_tag = 1
						}
					}
					set_division_template_lock = { division_template = "[X] 3" is_locked = no }
				}
				X = "[?current_role_title.GetTokenLocalizedKey]"
			}
			if = {
				limit = {
					meta_trigger = {
						text = {
							has_template = "[X] 4"
						}
						X = "[?current_role_title.GetTokenLocalizedKey]"
					}
				}
				meta_effect = {
					text = {
						set_division_template_lock = { division_template = "[X] 4" is_locked = yes }
						add_units_to_division_template = {
							template_name = "[X] 4"
							support = {
								ai_tag = 1
							}
						}
						set_division_template_lock = { division_template = "[X] 4" is_locked = no }
					}
					X = "[?current_role_title.GetTokenLocalizedKey]"
				}
				if = {
					limit = {
						meta_trigger = {
							text = {
								has_template = "[X] 5"
							}
							X = "[?current_role_title.GetTokenLocalizedKey]"
						}
					}
					meta_effect = {
						text = {
							set_division_template_lock = { division_template = "[X] 5" is_locked = yes }
							add_units_to_division_template = {
								template_name = "[X] 5"
								support = {
									ai_tag = 1
								}
							}
							set_division_template_lock = { division_template = "[X] 5" is_locked = no }
						}
						X = "[?current_role_title.GetTokenLocalizedKey]"
					}
					if = {
						limit = {
							meta_trigger = {
								text = {
									has_template = "[X] 6"
								}
								X = "[?current_role_title.GetTokenLocalizedKey]"
							}
						}
						meta_effect = {
							text = {
								set_division_template_lock = { division_template = "[X] 6" is_locked = yes }
								add_units_to_division_template = {
									template_name = "[X] 6"
									support = {
										ai_tag = 1
									}
								}
								set_division_template_lock = { division_template = "[X] 6" is_locked = no }
							}
							X = "[?current_role_title.GetTokenLocalizedKey]"
						}
					}
				}
			}
		}
	}			
}
template_force_upgrade = {
	every_country_division = {
		limit = {
			division_has_battalion_in_template = ai_tag
		}
		meta_effect = {
			text = {
				change_division_template = {
					division_template = "[ROLE]" 
				}
			}
			ROLE = "[?current_role_title.GetTokenLocalizedKey]"
		}
	}
	meta_effect = {
		text = {
			delete_unit_template_and_units = { division_template = "[X] 2" disband = yes }
			delete_unit_template_and_units = { division_template = "[X] 3" disband = yes }
			delete_unit_template_and_units = { division_template = "[X] 4" disband = yes }
			delete_unit_template_and_units = { division_template = "[X] 5" disband = yes }
			delete_unit_template_and_units = { division_template = "[X] 6" disband = yes }
		}
		X = "[?current_role_title.GetTokenLocalizedKey]"
	}
}
ui_ai_open_templates = {
	
	ai_allowed_template_units = yes 

	clear_array = ROOT.ai_template_entry

	every_state = {
		clear_array = ai_templates
		clear_array = ai_templates_diff
		clear_array = ai_templates_diff_to_last
		clear_array = ai_templates_either
		
		clear_array = ai_templates_support
	}
	
	for_each_loop = {
		array = ROOT.ai_roles
		value = rolesss
				
		if = {
			limit = {
				meta_trigger = {
					text = {
						has_country_flag = ai_[ROLE]_template
					}
					ROLE = "[?rolesss.GetTokenLocalizedKey]"
				}
			}
			
			set_temp_variable = { iteration = 0 }
			
			for_loop_effect = {
				end = 20
				
				add_to_temp_variable = { iteration = 1 }
				if = {
					limit = {
						meta_trigger = {
							text = {
								has_country_flag = { flag = ai_[ROLE]_template value = [X] }
							} 
							ROLE = "[?rolesss.GetTokenLocalizedKey]"
							X = "[?iteration]"
						}
					}
					meta_effect = {
						text = {
							set_variable = { ai_[ROLE]_template_backup = iteration }
						}
						ROLE = "[?rolesss.GetTokenLocalizedKey]"
					}
				}
			}
				
			meta_effect = {
				text = {
					clr_country_flag = ai_[ROLE]_template
				}
				ROLE = "[?rolesss.GetTokenLocalizedKey]"
			}
		}
		
		if = {
			limit = {
				NOT = { check_variable = { rolesss = current_role } }
			}
				
			meta_effect = {
				text = {
					set_country_flag = { flag = ai_[ROLE]_template value = 99 }
				}
				ROLE = "[?rolesss.GetTokenLocalizedKey]"
			}
		}
	}
	#########################################
	

	set_temp_variable = { ai_template_skip = 1 }
	set_temp_variable = { ai_template_skip@var:current_role = 1 }

	#log = "[?current_role.GetTokenKey] ROLE" 
	for_loop_effect = {
		end = 20
		
		set_temp_variable = { ai_has_added_template = 0 }
		
		ai_update_division_templates = yes
		
		if = {
			limit = {
				check_variable = { ai_has_added_template = 1 }
			}
				
			random_state = {
				limit = {
					NOT = { is_in_array = { ROOT.ai_template_entry = THIS } }
				}
				add_to_array = { ROOT.ai_template_entry = THIS }
				set_temp_variable = { last_state = THIS }
				add_to_temp_variable = { iteration = 1 }
			}
			
			#log = "TEMPLATE ID [?v]"

			for_each_loop = { #save regiment numbers
				array = units
				value = unit
				
				set_temp_variable = { before@var:unit = num_battalions_with_type@var:unit }
			}
			for_each_loop = { #save support numbers
				array = supports
				value = unit
				
				set_temp_variable = { before@var:unit = num_battalions_with_type@var:unit }
			}
			
			capital_scope = {
				meta_effect = {
					text = {
						if = {
							limit = {
								ROOT = { has_template = "[X]" }
							}
							create_unit = {
								division = "name = \"Check Unit Composition\" division_template = \"[X]\" start_experience_factor = 0.5"
								owner = ROOT
							}
						}
							
					}
					X = "[?ROOT.current_role_title.GetTokenLocalizedKey]"
				}
			}
			
			for_each_loop = { #save regiment numbers in extra array
				array = units
				value = unit
				
				set_temp_variable = { difference@var:unit = num_battalions_with_type@var:unit }
				subtract_from_temp_variable = { difference@var:unit = before@var:unit }
				
				if = {
					limit = {
						check_variable = { difference@var:unit > 0 }
					}
				#	log = "Unit [?unit.GetTokenKey] | Diff: [?difference@var:unit] [?iteration] iter"
					var:last_state = {
						#log = "[This.GetName] [?This]"
						add_to_array = { ai_templates = unit }
						add_to_array = { ai_templates_diff = difference@var:unit }
					}
				}
			}
			for_each_loop = { #save support numbers in extra array
				array = supports
				value = unit
				
				set_temp_variable = { difference@var:unit = num_battalions_with_type@var:unit }
				subtract_from_temp_variable = { difference@var:unit = before@var:unit }
				
				if = {
					limit = {
						check_variable = { difference@var:unit > 0 }
					}
				#	log = "Unit [?unit.GetTokenKey] | Diff: [?difference@var:unit] [?iteration] iter"
					var:last_state = {
						#log = "[This.GetName] [?This]"
						add_to_array = { ai_templates_support = unit }
					}
				}
			}
			
			var:last_state = { 
				for_each_loop = {
					array = either_regiment
					value = eiththtt
					
			
					if = {
						limit = {
							NOT = { is_in_array = { ai_templates = eiththtt } }
						}
						add_to_array = { ai_templates = eiththtt }
						add_to_array = { ai_templates_diff = 1 }
					}
					add_to_array = { ai_templates_either = eiththtt }
				}
				for_each_loop = {
					array = either_support
					value = eiththtt
			
					if = {
						limit = {
							NOT = { is_in_array = { ai_templates_support = eiththtt } }
						}
						add_to_array = { ai_templates_support = eiththtt }
						add_to_array = { ai_templates_support_diff = 1 }
					}
					add_to_array = { ai_templates_either = eiththtt }
				}
			}
			
			if = {
				limit = {
					var:last_state = {
						check_variable = { ai_templates^num = 0 }
						check_variable = { ai_templates_support^num = 0 }
					}
				}
				remove_from_array = { ai_template_entry = last_state }
			}
			#for_each_loop = {
			#	array = ai_roles
			#	value = rolesss
						
				meta_effect = {
					text = {
						delete_unit_template_and_units = {
							division_template = "[X]"
						}
					}
					X = "[?ROOT.current_role_title.GetTokenLocalizedKey]"
				}
			#}
		}
	}
	
	## RESTORE TEMPLATE FLAGS 
	
	for_each_loop = {
		array = ai_roles
		value = rolesss
			
		if = {
			limit = {
				meta_trigger = {
					text = {
						check_variable = { ai_[ROLE]_template_backup > 0 }
						set_temp_variable = { tttt = ai_[ROLE]_template_backup }
					} 
					ROLE = "[?rolesss.GetTokenLocalizedKey]"
				}
				#log = "[?rolesss.GetTokenKey] yes 2´backup"
			}
			
			meta_effect = {
				text = {
					set_country_flag = { flag = ai_[ROLE]_template value = [X] }
					clear_variable = ai_[ROLE]_template_backup
				}
				ROLE = "[?rolesss.GetTokenLocalizedKey]"
				X = "[?tttt]"
			}
			
		}
		else = {
			meta_effect = {
				text = {
					clr_country_flag = ai_[ROLE]_template
				}
				ROLE = "[?rolesss.GetTokenLocalizedKey]"
			}
		}
		
	}
	
}

# This effect copies currently used AI templates and adds adjective of country into its name
# So e.g. Britain would then receive "Polish Infantry Division" exiled template
ai_exile_change_template_names = {

	log = "[THIS.GetTag] | SWITCH TEMPLATE NAME FOR EXILE GOVERNMENT"
	ai_allowed_template_units_type = yes 
	
	for_each_loop = {
		array = supports
		value = unit
		
		set_temp_variable = { before@var:unit = num_battalions_with_type@var:unit }
	}
	for_each_loop = {
		array = units_infantry
		value = unit
		
		set_temp_variable = { before@var:unit = num_battalions_with_type@var:unit }
	}
	for_each_loop = {
		array = units_special
		value = unit
		
		set_temp_variable = { before@var:unit = num_battalions_with_type@var:unit }
	}
	for_each_loop = {
		array = units_artillery
		value = unit
		
		set_temp_variable = { before@var:unit = num_battalions_with_type@var:unit }
	}
	for_each_loop = {
		array = units_mobile
		value = unit
		
		set_temp_variable = { before@var:unit = num_battalions_with_type@var:unit }
	}
	for_each_loop = {
		array = units_armor
		value = unit
		
		set_temp_variable = { before@var:unit = num_battalions_with_type@var:unit }
	}
	
	for_each_loop = {
		array = ai_roles
		index = role_i

		set_temp_variable = { next_regiment_row = 0 }
		set_temp_variable = { num_regiment_switches = 0 }
		clear_temp_array = valid_supports
		clear_temp_array = valid_infantry
		clear_temp_array = valid_artillery
		clear_temp_array = valid_mobile
		clear_temp_array = valid_armor
		
		#log = "[?v.GetTokenKey] ROLE"
		delete_unit = { id = 378 }
		if = {
			limit = {
				meta_trigger = {
					text = {
						has_template = "[X]"
					}
					X = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
				}
			}
			capital_scope = {
				meta_effect = {
					text = {
						create_unit = {
							division = "name = \"Check Unit Composition\" division_template = \"[X]\" start_experience_factor = 0.5"
							owner = ROOT
							id = 378
						}
						set_temp_variable = { has_spawned_unit = 1 }
					}
					X = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
				}
			}
		}
		else_if = {
			limit = {
				meta_trigger = {
					text = {
						has_template = "[X] 2"
					}
					X = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
				}
			}
			capital_scope = {
				meta_effect = {
					text = {
						create_unit = {
							division = "name = \"Check Unit Composition\" division_template = \"[X] 2\" start_experience_factor = 0.5"
							owner = ROOT
							id = 378
						}
						set_temp_variable = { has_spawned_unit = 2 }
					}
					X = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
				}
			}
		}
		
		if = {
			limit = {
				check_variable = { has_spawned_unit > 0 }
			}
			for_each_loop = {
				array = supports
				value = unit
				
				if = {
					limit = { 
						check_variable = { num_battalions_with_type@var:unit > before@var:unit }
					}
					
					set_temp_variable = { t = num_battalions_with_type@var:unit }
					subtract_from_temp_variable = { t = before@var:unit }
					#log = "    SUPPORT Difference: [?unit.GetTokenKey] [?t] (Before: [?before@var:unit] / Now: [?num_battalions_with_type@var:unit])"
					
					add_to_temp_array = { valid_supports = unit }
				}
			}
			for_each_loop = {
				array = units_infantry
				value = unit
				
				if = {
					limit = { 
						check_variable = { num_battalions_with_type@var:unit > before@var:unit }
					}
					set_temp_variable = { t = num_battalions_with_type@var:unit }
					subtract_from_temp_variable = { t = before@var:unit }
					#log = "    INFANTRY Difference: [?unit.GetTokenKey] [?t]"
					
					for_loop_effect = {
						end = t
						
						add_to_temp_array = { valid_infantry = unit }
					}
				}
			}
			for_each_loop = {
				array = units_special
				value = unit
				
				if = {
					limit = { 
						check_variable = { num_battalions_with_type@var:unit > before@var:unit }
					}
					set_temp_variable = { t = num_battalions_with_type@var:unit }
					subtract_from_temp_variable = { t = before@var:unit }
					#log = "    SPECIAL Difference: [?unit.GetTokenKey] [?t]"
					
					for_loop_effect = {
						end = t
						
						add_to_temp_array = { valid_special = unit }
					}
				}
			}
			for_each_loop = {
				array = units_artillery
				value = unit
				
				if = {
					limit = { 
						check_variable = { num_battalions_with_type@var:unit > before@var:unit }
					}
					set_temp_variable = { t = num_battalions_with_type@var:unit }
					subtract_from_temp_variable = { t = before@var:unit }
					#log = "    ARTILLERY Difference: [?unit.GetTokenKey] [?t]"
					
					for_loop_effect = {
						end = t
						
						add_to_temp_array = { valid_artillery = unit }
					}
				}
			}
			for_each_loop = {
				array = units_mobile
				value = unit
				
				if = {
					limit = { 
						check_variable = { num_battalions_with_type@var:unit > before@var:unit }
					}
					set_temp_variable = { t = num_battalions_with_type@var:unit }
					subtract_from_temp_variable = { t = before@var:unit }
					#log = "    MOBILE Difference: [?unit.GetTokenKey] [?t]"
					
					for_loop_effect = {
						end = t
						
						add_to_temp_array = { valid_mobile = unit }
					}
				}
			}
			for_each_loop = {
				array = units_armor
				value = unit
				
				if = {
					limit = { 
						check_variable = { num_battalions_with_type@var:unit > before@var:unit }
					}
					set_temp_variable = { t = num_battalions_with_type@var:unit }
					subtract_from_temp_variable = { t = before@var:unit }
					#log = "    ARMOR Difference: [?unit.GetTokenKey] [?t]"
					
					for_loop_effect = {
						end = t
						
						add_to_temp_array = { valid_armor = unit }
					}
				}
			}
			
			delete_unit = { id = 378 }
			
			meta_effect = {
				text = {
					division_template = {
						name = "[X] [Y]"
						is_locked = yes
					}
				}
				X = "[Root.GetAdjective]"
				Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
			}
			
			for_each_loop = {
				array = valid_supports
				
				if = {
					limit = {
						check_variable = { i > 4 }
					}
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								support = {
									[U] = 1
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
					}
				}
				else = {
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								support = {
									[U] = 0
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
					}
				}
			}
			
			for_each_loop = {
				array = valid_infantry
				
				if = {
					limit = {
						check_variable = { i > 9 }
					}
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = 2
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
					}
					set_temp_variable = { next_regiment_row = 3 }
				}
				else_if = {
					limit = {
						check_variable = { i > 4 }
					}
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = 1
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
					}
					set_temp_variable = { next_regiment_row = 2 }
				}
				else = {
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = 0
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
					}
					set_temp_variable = { next_regiment_row = 1 }
				}
			}
			
			#log = "BEFORE valid_special = [?next_regiment_row]"
			for_each_loop = {
				array = valid_special
			
				set_temp_variable = { regiment_1 = next_regiment_row }
				add_to_temp_variable = { regiment_1 = 1 }
				
				set_temp_variable = { regiment_2 = next_regiment_row }
				add_to_temp_variable = { regiment_2 = 2 }
					
				if = {
					limit = {
						check_variable = { i > 9 }
					}
					set_temp_variable = { num_regiment_switches = 3 }
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = [R]
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
						R = "[?regiment_2]"
					}
					#log = "        ADD [?v.GetTokenKey] to [?regiment_2]"
				}
				else_if = {
					limit = {
						check_variable = { i > 4 }
					}
					set_temp_variable = { num_regiment_switches = 2 }
					
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = [R]
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
						R = "[?regiment_1]"
					}
					#log = "        ADD [?v.GetTokenKey] to [?regiment_1]"
				}
				else = {
					set_temp_variable = { num_regiment_switches = 1 }
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = [R]
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
						R = "[?next_regiment_row]"
					}
					#log = "        ADD [?v.GetTokenKey] to [?next_regiment_row]"
				}
			}
			
			add_to_temp_variable = { next_regiment_row = num_regiment_switches }
			set_temp_variable = { num_regiment_switches = 0 }
			#log = "BEFORE valid_mobile = [?next_regiment_row]"
			for_each_loop = {
				array = valid_mobile
			
				set_temp_variable = { regiment_1 = next_regiment_row }
				add_to_temp_variable = { regiment_1 = 1 }
				
				set_temp_variable = { regiment_2 = next_regiment_row }
				add_to_temp_variable = { regiment_2 = 2 }
					
				if = {
					limit = {
						check_variable = { i > 9 }
					}
					set_temp_variable = { num_regiment_switches = 3 }
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = [R]
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
						R = "[?regiment_2]"
					}
					#log = "        ADD [?v.GetTokenKey] to [?regiment_2]"
				}
				else_if = {
					limit = {
						check_variable = { i > 4 }
					}
					set_temp_variable = { num_regiment_switches = 2 }
					
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = [R]
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
						R = "[?regiment_1]"
					}
					#log = "        ADD [?v.GetTokenKey] to [?regiment_1]"
				}
				else = {
					set_temp_variable = { num_regiment_switches = 1 }
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = [R]
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
						R = "[?next_regiment_row]"
					}
					#log = "        ADD [?v.GetTokenKey] to [?next_regiment_row]"
				}
			}
			
			add_to_temp_variable = { next_regiment_row = num_regiment_switches }
			set_temp_variable = { num_regiment_switches = 0 }
			#log = "BEFORE valid_armor = [?next_regiment_row]"
			for_each_loop = {
				array = valid_armor
			
				set_temp_variable = { regiment_1 = next_regiment_row }
				add_to_temp_variable = { regiment_1 = 1 }
				
				set_temp_variable = { regiment_2 = next_regiment_row }
				add_to_temp_variable = { regiment_2 = 2 }
					
				if = {
					limit = {
						check_variable = { i > 9 }
					}
					set_temp_variable = { num_regiment_switches = 3 }
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = [R]
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
						R = "[?regiment_2]"
					}
					#log = "        ADD [?v.GetTokenKey] to [?regiment_2]"
				}
				else_if = {
					limit = {
						check_variable = { i > 4 }
					}
					set_temp_variable = { num_regiment_switches = 2 }
					
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = [R]
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
						R = "[?regiment_1]"
					}
					#log = "        ADD [?v.GetTokenKey] to [?regiment_1]"
				}
				else = {
					set_temp_variable = { num_regiment_switches = 1 }
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = [R]
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
						R = "[?next_regiment_row]"
					}
					#log = "        ADD [?v.GetTokenKey] to [?next_regiment_row]"
				}
			}
			
			add_to_temp_variable = { next_regiment_row = num_regiment_switches }
			set_temp_variable = { num_regiment_switches = 0 }
			#log = "BEFORE valid_artillery = [?next_regiment_row]"
			for_each_loop = {
				array = valid_artillery
			
				set_temp_variable = { regiment_1 = next_regiment_row }
				add_to_temp_variable = { regiment_1 = 1 }
				
				set_temp_variable = { regiment_2 = next_regiment_row }
				add_to_temp_variable = { regiment_2 = 2 }
					
				if = {
					limit = {
						check_variable = { i > 9 }
					}
					set_temp_variable = { num_regiment_switches = 3 }
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = [R]
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
						R = "[?regiment_2]"
					}
					#log = "        ADD [?v.GetTokenKey] to [?regiment_2]"
				}
				else_if = {
					limit = {
						check_variable = { i > 4 }
					}
					set_temp_variable = { num_regiment_switches = 2 }
					
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = [R]
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
						R = "[?regiment_1]"
					}
					#log = "        ADD [?v.GetTokenKey] to [?regiment_1]"
				}
				else = {
					set_temp_variable = { num_regiment_switches = 1 }
					meta_effect = {
						text = {
							add_units_to_division_template = {
								template_name = "[X] [Y]"
								regiments = {
									[U] = [R]
								}
							}
						}
						X = "[Root.GetAdjective]"
						Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
						U = "[?v.GetTokenKey]"
						R = "[?next_regiment_row]"
					}
					#log = "        ADD [?v.GetTokenKey] to [?next_regiment_row]"
				}
			}
			
			add_to_temp_variable = { next_regiment_row = num_regiment_switches }
			set_temp_variable = { num_regiment_switches = 0 }
		}
	}
	for_each_loop = {
		array = ai_roles
		index = role_i
		
		set_temp_variable = { current_role_title = ROOT.ai_roles_title^role_i }
		template_tag_current_role = yes
		
		meta_effect = {
			text = {
				every_country_division = {
					limit = {
						division_has_battalion_in_template = ai_tag
					}
					change_division_template = {
						division_template = "[X] [Y]"
					}
				}
				set_division_template_lock = {
					division_template = "[X] [Y]"
					is_locked = no
				}
			}
			X = "[Root.GetAdjective]"
			Y = "[?ROOT.ai_roles_title^role_i.GetTokenLocalizedKey]"
		}
		template_delete_tagged_role = yes
	}
	delete_unit_template_and_units = {
		division_template = "Suppression Division"
	}
}
template_delete_tagged_role = {
	meta_effect = {
		text = {	
			delete_unit_template_and_units = {
				division_template = "[X]"
			}
		}
		X = "[?current_role_title.GetTokenLocalizedKey]"
	}

	if = {
		limit = {
			meta_trigger = {
				text = {
					has_template = "[X] 2"
				}
				X = "[?current_role_title.GetTokenLocalizedKey]"
			}
		}
		meta_effect = {
			text = {
				delete_unit_template_and_units = {
					division_template = "[X] 2"
				}
			}
			X = "[?current_role_title.GetTokenLocalizedKey]"
		}
		if = {
			limit = {
				meta_trigger = {
					text = {
						has_template = "[X] 3"
					}
					X = "[?current_role_title.GetTokenLocalizedKey]"
				}
			}
			meta_effect = {
				text = {
					delete_unit_template_and_units = {
						division_template = "[X] 3"
					}
				}
				X = "[?current_role_title.GetTokenLocalizedKey]"
			}
			if = {
				limit = {
					meta_trigger = {
						text = {
							has_template = "[X] 4"
						}
						X = "[?current_role_title.GetTokenLocalizedKey]"
					}
				}
				meta_effect = {
					text = {
						delete_unit_template_and_units = {
							division_template = "[X] 4"
						}
					}
					X = "[?current_role_title.GetTokenLocalizedKey]"
				}
				if = {
					limit = {
						meta_trigger = {
							text = {
								has_template = "[X] 5"
							}
							X = "[?current_role_title.GetTokenLocalizedKey]"
						}
					}
					meta_effect = {
						text = {
							delete_unit_template_and_units = {
								division_template = "[X] 5"
							}
						}
						X = "[?current_role_title.GetTokenLocalizedKey]"
					}
					if = {
						limit = {
							meta_trigger = {
								text = {
									has_template = "[X] 6"
								}
								X = "[?current_role_title.GetTokenLocalizedKey]"
							}
						}
						meta_effect = {
							text = {
								delete_unit_template_and_units = {
									division_template = "[X] 6"
								}
							}
							X = "[?current_role_title.GetTokenLocalizedKey]"
						}
					}
				}
			}
		}
	}			
}

#########################################################
########################## EOF ##########################
#########################################################
