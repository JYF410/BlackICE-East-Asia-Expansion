
create_character_index = {
	set_temp_variable = { start_id = token:AFG_mohammed_shah }
	set_temp_variable = { end_id = token:ZXL_navy_chief }
	clear_temp_array = cc

	for_loop_effect = {
		start = start_id
		end = end_id
		
		if = {
			limit = {
				meta_trigger = {
					text = {
						has_character = [X]
					}
					X = "[?v.GetTokenKey]"
				}
			}
			
			meta_effect = {
				text = {
					[V] = { set_variable = { key = token:[V] } }
				}
				V = "[?v.GetTokenKey]"
			}
		}
	}
	set_temp_variable = { t = cc^num }
	subtract_from_temp_variable = { t = 1 }
	
	#set_variable = { c_index_start = cc^0 }
	#set_variable = { c_index_end = cc^t }
	
	#log = "[?cc^num] NUM"
	#log = "[?c_index_start] c_index_start"
	#log = "[?c_index_end] c_index_end"
}

update_unit_leader_army_ratios = {
	every_army_leader = {
		set_variable = { infantry_ratio = num_battalions_with_type@infantry }
		add_to_variable = { infantry_ratio = num_battalions_with_type@infantry_assault }
		add_to_variable = { infantry_ratio = num_battalions_with_type@ss_infantry }
		add_to_variable = { infantry_ratio = num_battalions_with_type@ss_infantry_assault }
		add_to_variable = { infantry_ratio = num_battalions_with_type@guards_infantry }
		add_to_variable = { infantry_ratio = num_battalions_with_type@guards_infantry_assault }
		add_to_variable = { infantry_ratio = num_battalions_with_type@light_infantry }
		add_to_variable = { infantry_ratio = num_battalions_with_type@ss_light_infantry }
		add_to_variable = { infantry_ratio = num_battalions_with_type@irregulars_unit }
		divide_variable = { infantry_ratio = num_battalions }
		if = { limit = { check_variable = { infantry_ratio = 0 } } clear_variable = infantry_ratio }
		
		set_variable = { motorized_ratio = num_battalions_with_type@motorized }
		add_to_variable = { motorized_ratio = num_battalions_with_type@motorized_assault }
		add_to_variable = { motorized_ratio = num_battalions_with_type@ss_motorized }
		add_to_variable = { motorized_ratio = num_battalions_with_type@ss_motorized_assault }
		add_to_variable = { motorized_ratio = num_battalions_with_type@guards_motorized }
		add_to_variable = { motorized_ratio = num_battalions_with_type@guards_motorized_assault }
		add_to_variable = { motorized_ratio = num_battalions_with_type@semi_motorized }
		add_to_variable = { motorized_ratio = num_battalions_with_type@semi_motorized_assault }
		add_to_variable = { motorized_ratio = num_battalions_with_type@ss_semi_motorized }
		add_to_variable = { motorized_ratio = num_battalions_with_type@ss_semi_motorized_assault }
		add_to_variable = { motorized_ratio = num_battalions_with_type@mechanized }
		add_to_variable = { motorized_ratio = num_battalions_with_type@mechanized_assault }
		add_to_variable = { motorized_ratio = num_battalions_with_type@ss_mechanized }
		add_to_variable = { motorized_ratio = num_battalions_with_type@ss_mechanized_assault }
		add_to_variable = { motorized_ratio = num_battalions_with_type@guards_mechanized }
		add_to_variable = { motorized_ratio = num_battalions_with_type@guards_mechanized_assault }
		add_to_variable = { motorized_ratio = num_battalions_with_type@motorcycle_infantry }
		divide_variable = { motorized_ratio = num_battalions }
		if = { limit = { check_variable = { motorized_ratio = 0 } } clear_variable = motorized_ratio }
		
		set_variable = { cavalry_ratio = num_battalions_with_type@cavalry }
		add_to_variable = { cavalry_ratio = num_battalions_with_type@ss_cavalry }
		add_to_variable = { cavalry_ratio = num_battalions_with_type@guards_cavalry }
		divide_variable = { cavalry_ratio = num_battalions }
		if = { limit = { check_variable = { cavalry_ratio = 0 } } clear_variable = cavalry_ratio }
	}		
}

unit_leader_level_up_effect = {
	
	if = {
		limit = {
			character = { is_army_leader = yes }
		}
		
		FROM = {
			set_temp_variable = { num_stat_gain = 3 }
			add_to_temp_variable = { num_stat_gain = modifier@army_leader_skill_per_level }
			add_to_temp_variable = { num_stat_gain = num_stat_gain_extra }
			
			set_temp_variable = { extra_skill_chance = modifier@army_leader_skill_chance }
			
			set_temp_variable = { no_extra_skill_chance = 1 }
			subtract_from_temp_variable = { no_extra_skill_chance = extra_skill_chance }
			
			if = {
				limit = {
					check_variable = { no_extra_skill_chance > 0 }
				}
				
				random_list = {
					seed = global.daily_random
					extra_skill_chance = {
						add_to_temp_variable = { num_stat_gain = 1 }
					}
					no_extra_skill_chance = { }
				}
			}
			else = {
				add_to_temp_variable = { num_stat_gain = 1 }
			}
			
		### BASE CHANCES
			set_temp_variable = { chance_mult_after_pick = 0.75 }
		
			set_temp_variable = { attack_skill_chance = 5 }
			set_temp_variable = { defense_skill_chance = 5 }
			set_temp_variable = { planning_skill_chance = 5 }
			set_temp_variable = { logistics_skill_chance = 5 }
			
		### COUNTRY MODIFIERS FOR CHANCES
			set_temp_variable = { attack_skill_chance_mult = 1 }
			set_temp_variable = { defense_skill_chance_mult = 1 }
			set_temp_variable = { planning_skill_chance_mult = 1 }
			set_temp_variable = { logistics_skill_chance_mult = 1 }
			
			add_to_temp_variable = { attack_skill_chance_mult = modifier@army_attack_skill_chance }
			add_to_temp_variable = { defense_skill_chance_mult = modifier@army_defense_skill_chance }
			add_to_temp_variable = { planning_skill_chance_mult = modifier@planning_skill_chance }
			add_to_temp_variable = { logistics_skill_chance_mult = modifier@logistics_skill_chance }
		}
		
		character = { 
		### UNIT LEADER MODIFIERS FOR CHANCES
			add_to_temp_variable = { attack_skill_chance_mult = leader_modifier@army_attack_skill_chance }
			add_to_temp_variable = { defense_skill_chance_mult = leader_modifier@army_defense_skill_chance }
			add_to_temp_variable = { planning_skill_chance_mult = leader_modifier@planning_skill_chance }
			add_to_temp_variable = { logistics_skill_chance_mult = leader_modifier@logistics_skill_chance }
			
			multiply_temp_variable = { attack_skill_chance = attack_skill_chance_mult }
			multiply_temp_variable = { defense_skill_chance = defense_skill_chance_mult }
			multiply_temp_variable = { planning_skill_chance = planning_skill_chance_mult }
			multiply_temp_variable = { logistics_skill_chance = logistics_skill_chance_mult }
			
			set_temp_variable = { random_seed = global.daily_random }
			
			for_loop_effect = {
				end = num_stat_gain
		
				random_list = {
					seed = random_seed
					attack_skill_chance = { 
						modifier = {
							factor = 0 
							check_variable = { attack_level = 10 }
						}
						
						add_attack = 1
						multiply_temp_variable = { attack_skill_chance = chance_mult_after_pick }
						add_to_variable = { attack_skill_gained = 1 }
					}
					defense_skill_chance = { 
						modifier = {
							factor = 0 
							check_variable = { defense_level = 10 }
						}
						
						add_defense = 1
						multiply_temp_variable = { defense_skill_chance = chance_mult_after_pick }
						add_to_variable = { defense_skill_gained = 1 }
					}
					planning_skill_chance = { 
						modifier = {
							factor = 0 
							check_variable = { planning_level = 10 }
						}
						
						add_planning = 1
						multiply_temp_variable = { planning_skill_chance = chance_mult_after_pick }
						add_to_variable = { planning_skill_gained = 1 }
					}
					logistics_skill_chance = { 
						modifier = {
							factor = 0 
							check_variable = { logistics_level = 10 }
						}
						
						add_logistics = 1
						multiply_temp_variable = { logistics_skill_chance = chance_mult_after_pick }
						add_to_variable = { logistics_skill_gained = 1 }
						
					}
				} 
			
				randomize_temp_variable = random_seed
			}
			
			unit_leader_event = generic.20
			unit_leader_event = generic.21
		}
	}
	else_if = {
		limit = {
			character = { is_navy_leader = yes }
		}
		
		FROM = {
			set_temp_variable = { num_stat_gain = 3 }
			add_to_temp_variable = { num_stat_gain = modifier@navy_leader_skill_per_level }
			add_to_temp_variable = { num_stat_gain = num_stat_gain_extra }
			
			set_temp_variable = { extra_skill_chance = modifier@navy_leader_skill_chance }
			
			set_temp_variable = { no_extra_skill_chance = 1 }
			subtract_from_temp_variable = { no_extra_skill_chance = extra_skill_chance }
			
			if = {
				limit = {
					check_variable = { no_extra_skill_chance > 0 }
				}
				
				random_list = {
					seed = global.daily_random
					extra_skill_chance = {
						add_to_temp_variable = { num_stat_gain = 1 }
					}
					no_extra_skill_chance = { }
				}
			}
			else = {
				add_to_temp_variable = { num_stat_gain = 1 }
			}
			
		### BASE CHANCES
			set_temp_variable = { chance_mult_after_pick = 0.75 }
		
			set_temp_variable = { attack_skill_chance = 5 }
			set_temp_variable = { defense_skill_chance = 5 }
			set_temp_variable = { maneuver_skill_chance = 5 }
			set_temp_variable = { coordination_skill_chance = 5 }
			
		### COUNTRY MODIFIERS FOR CHANCES
			set_temp_variable = { attack_skill_chance_mult = 1 }
			set_temp_variable = { defense_skill_chance_mult = 1 }
			set_temp_variable = { maneuver_skill_chance_mult = 1 }
			set_temp_variable = { coordination_skill_chance_mult = 1 }
			
			add_to_temp_variable = { attack_skill_chance_mult = modifier@navy_attack_skill_chance }
			add_to_temp_variable = { defense_skill_chance_mult = modifier@navy_defense_skill_chance }
			add_to_temp_variable = { maneuver_skill_chance_mult = modifier@maneuver_skill_chance }
			add_to_temp_variable = { coordination_skill_chance_mult = modifier@coordination_skill_chance }
		}
		
		character = { 
		### UNIT LEADER MODIFIERS FOR CHANCES
			add_to_temp_variable = { attack_skill_chance_mult = leader_modifier@navy_attack_skill_chance }
			add_to_temp_variable = { defense_skill_chance_mult = leader_modifier@navy_defense_skill_chance }
			add_to_temp_variable = { maneuver_skill_chance_mult = leader_modifier@maneuver_skill_chance }
			add_to_temp_variable = { coordination_skill_chance_mult = leader_modifier@coordination_skill_chance }
			
			multiply_temp_variable = { attack_skill_chance = attack_skill_chance_mult }
			multiply_temp_variable = { defense_skill_chance = defense_skill_chance_mult }
			multiply_temp_variable = { maneuver_skill_chance = maneuver_skill_chance_mult }
			multiply_temp_variable = { coordination_skill_chance = coordination_skill_chance_mult }
			
			set_temp_variable = { random_seed = global.daily_random }
			
			for_loop_effect = {
				end = num_stat_gain
		
				random_list = {
					seed = random_seed
					attack_skill_chance = { 
						modifier = {
							factor = 0 
							check_variable = { attack_level = 10 }
						}
						
						add_attack = 1
						multiply_temp_variable = { attack_skill_chance = chance_mult_after_pick }
						add_to_variable = { attack_skill_gained = 1 }
					}
					defense_skill_chance = { 
						modifier = {
							factor = 0 
							check_variable = { defense_level = 10 }
						}
						
						add_defense = 1
						multiply_temp_variable = { defense_skill_chance = chance_mult_after_pick }
						add_to_variable = { defense_skill_gained = 1 }
					}
					maneuver_skill_chance = { 
						modifier = {
							factor = 0 
							check_variable = { maneuvering_level = 10 }
						}
						
						add_maneuver = 1
						multiply_temp_variable = { maneuver_skill_chance = chance_mult_after_pick }
						add_to_variable = { maneuver_skill_gained = 1 }
					}
					coordination_skill_chance = { 
						modifier = {
							factor = 0 
							check_variable = { coordination_level = 10 }
						}
						
						add_coordination = 1
						multiply_temp_variable = { coordination_skill_chance = chance_mult_after_pick }
						add_to_variable = { coordination_skill_gained = 1 }
						
					}
				} 
			
				randomize_temp_variable = random_seed
			}
			
			unit_leader_event = generic.20
			unit_leader_event = generic.21
		}
	}
}
unit_leader_level_up_chance_breakdown = {
	
	if = {
		limit = {
			character = {
				is_army_leader = yes
			}
		}
		set_temp_variable = { attack_skill_chance = 5 }
		set_temp_variable = { defense_skill_chance = 5 }
		set_temp_variable = { planning_skill_chance = 5 }
		set_temp_variable = { logistics_skill_chance = 5 }
			
	### COUNTRY MODIFIERS FOR CHANCES
		set_temp_variable = { attack_skill_chance_mult = 1 }
		set_temp_variable = { defense_skill_chance_mult = 1 }
		set_temp_variable = { planning_skill_chance_mult = 1 }
		set_temp_variable = { logistics_skill_chance_mult = 1 }
			
		add_to_temp_variable = { attack_skill_chance_mult = modifier@army_attack_skill_chance }
		add_to_temp_variable = { defense_skill_chance_mult = modifier@army_defense_skill_chance }
		add_to_temp_variable = { planning_skill_chance_mult = modifier@planning_skill_chance }
		add_to_temp_variable = { logistics_skill_chance_mult = modifier@logistics_skill_chance }
			
		character = { 
		### UNIT LEADER MODIFIERS FOR CHANCES
			add_to_temp_variable = { attack_skill_chance_mult = leader_modifier@army_attack_skill_chance }
			add_to_temp_variable = { defense_skill_chance_mult = leader_modifier@army_defense_skill_chance }
			add_to_temp_variable = { planning_skill_chance_mult = leader_modifier@planning_skill_chance }
			add_to_temp_variable = { logistics_skill_chance_mult = leader_modifier@logistics_skill_chance }
				
			multiply_temp_variable = { attack_skill_chance = attack_skill_chance_mult }
			multiply_temp_variable = { defense_skill_chance = defense_skill_chance_mult }
			multiply_temp_variable = { planning_skill_chance = planning_skill_chance_mult }
			multiply_temp_variable = { logistics_skill_chance = logistics_skill_chance_mult }
		}
		
		set_temp_variable = { total_dice = attack_skill_chance }
		add_to_temp_variable = { total_dice = defense_skill_chance }
		add_to_temp_variable = { total_dice = planning_skill_chance }
		add_to_temp_variable = { total_dice = logistics_skill_chance }
		
		divide_temp_variable = { attack_skill_chance = total_dice }
		divide_temp_variable = { defense_skill_chance = total_dice }
		divide_temp_variable = { planning_skill_chance = total_dice }
		divide_temp_variable = { logistics_skill_chance = total_dice }
		
		custom_effect_tooltip = army_leader_level_up_chance_tt
	}
	else_if = {
		limit = {
			character = {
				is_navy_leader = yes
			}
		}
		set_temp_variable = { attack_skill_chance = 5 }
		set_temp_variable = { defense_skill_chance = 5 }
		set_temp_variable = { maneuver_skill_chance = 5 }
		set_temp_variable = { coordination_skill_chance = 5 }
			
	### COUNTRY MODIFIERS FOR CHANCES
		set_temp_variable = { attack_skill_chance_mult = 1 }
		set_temp_variable = { defense_skill_chance_mult = 1 }
		set_temp_variable = { maneuver_skill_chance_mult = 1 }
		set_temp_variable = { coordination_skill_chance_mult = 1 }
			
		add_to_temp_variable = { attack_skill_chance_mult = modifier@army_attack_skill_chance }
		add_to_temp_variable = { defense_skill_chance_mult = modifier@army_defense_skill_chance }
		add_to_temp_variable = { maneuver_skill_chance_mult = modifier@maneuver_skill_chance }
		add_to_temp_variable = { coordination_skill_chance_mult = modifier@coordination_skill_chance }
			
		character = { 
		### UNIT LEADER MODIFIERS FOR CHANCES
			add_to_temp_variable = { attack_skill_chance_mult = leader_modifier@army_attack_skill_chance }
			add_to_temp_variable = { defense_skill_chance_mult = leader_modifier@army_defense_skill_chance }
			add_to_temp_variable = { maneuver_skill_chance_mult = leader_modifier@maneuver_skill_chance }
			add_to_temp_variable = { coordination_skill_chance_mult = leader_modifier@coordination_skill_chance }
				
			multiply_temp_variable = { attack_skill_chance = attack_skill_chance_mult }
			multiply_temp_variable = { defense_skill_chance = defense_skill_chance_mult }
			multiply_temp_variable = { maneuver_skill_chance = maneuver_skill_chance_mult }
			multiply_temp_variable = { coordination_skill_chance = coordination_skill_chance_mult }
		}
		
		set_temp_variable = { total_dice = attack_skill_chance }
		add_to_temp_variable = { total_dice = defense_skill_chance }
		add_to_temp_variable = { total_dice = maneuver_skill_chance }
		add_to_temp_variable = { total_dice = coordination_skill_chance }
		
		divide_temp_variable = { attack_skill_chance = total_dice }
		divide_temp_variable = { defense_skill_chance = total_dice }
		divide_temp_variable = { maneuver_skill_chance = total_dice }
		divide_temp_variable = { coordination_skill_chance = total_dice }
		
		custom_effect_tooltip = navy_leader_level_up_chance_tt
	}
}

display_unit_leader_details = {
	if = {
		limit = {
			is_army_leader = yes
		}
		if = {
			limit = {
				is_assigned = yes
			}
			custom_effect_tooltip = is_army_leader_assigned_title
		}
		else = {
			custom_effect_tooltip = is_army_leader_title
		}
		custom_effect_tooltip = attack_skill_display_tt
		custom_effect_tooltip = defense_skill_display_tt
		custom_effect_tooltip = planning_skill_display_tt
		custom_effect_tooltip = logistics_skill_display_tt
	}
	else_if = {
		limit = {
			is_navy_leader = yes
		}
		if = {
			limit = {
				is_assigned = yes
			}
			custom_effect_tooltip = is_navy_leader_assigned_title
		}
		else = {
			custom_effect_tooltip = is_navy_leader_title
		}
		custom_effect_tooltip = attack_skill_display_tt
		custom_effect_tooltip = defense_skill_display_tt
		custom_effect_tooltip = maneuver_skill_display_tt
		custom_effect_tooltip = coordination_skill_display_tt
	}
}

advisor_ideology_on_add = {

	if = {
		limit = {
			has_character_flag = conservatism
		}
		
		custom_effect_tooltip = IDEOLOGY_CONSERVATISM_ADVISOR
		hidden_effect = { OWNER = { add_to_variable = { num_advisor@conservatism = 0.01 } } }
	}
	if = {
		limit = {
			has_character_flag = socialism
		}
		
		custom_effect_tooltip = IDEOLOGY_SOCIALISM_ADVISOR
		hidden_effect = { OWNER = { add_to_variable = { num_advisor@socialism = 0.01 } } }
	}
	if = {
		limit = {
			has_character_flag = liberalism
		}
		
		custom_effect_tooltip = IDEOLOGY_LIBERALISM_ADVISOR
		hidden_effect = { OWNER = { add_to_variable = { num_advisor@liberalism = 0.01 } } }
	}
	if = {
		limit = {
			has_character_flag = agrarianism
		}
		
		custom_effect_tooltip = IDEOLOGY_AGRARIANISM_ADVISOR
		hidden_effect = { OWNER = { add_to_variable = { num_advisor@agrarianism = 0.01 } } }
	}
	if = {
		limit = {
			has_character_flag = neutrality
		}
		
		custom_effect_tooltip = IDEOLOGY_NEUTRALITY_ADVISOR
		hidden_effect = { OWNER = { add_to_variable = { num_advisor@neutrality = 0.01 } } }
	}
	if = {
		limit = {
			has_character_flag = monarchism
		}
		
		custom_effect_tooltip = IDEOLOGY_MONARCHISM_ADVISOR
		hidden_effect = { OWNER = { add_to_variable = { num_advisor@monarchism = 0.01 } } }
	}
	if = {
		limit = {
			has_character_flag = fascism
		}
		
		custom_effect_tooltip = IDEOLOGY_FASCISM_ADVISOR
		hidden_effect = { OWNER = { add_to_variable = { num_advisor@fascism = 0.01 } } }
	}
	if = {
		limit = {
			has_character_flag = communism
		}
		
		custom_effect_tooltip = IDEOLOGY_COMMUNISM_ADVISOR
		hidden_effect = { OWNER = { add_to_variable = { num_advisor@communism = 0.01 } } }
	}
	if = {
		limit = {
			has_character_flag = anti_communist
		}
		
		custom_effect_tooltip = IDEOLOGY_ANTI_COMMUNIST_ADVISOR
		hidden_effect = { OWNER = { add_to_variable = { num_advisor@communism = -0.01 } } }
	}
	if = {
		limit = {
			has_character_flag = anti_fascist
		}
		
		custom_effect_tooltip = IDEOLOGY_ANTI_FASCIST_ADVISOR
		hidden_effect = { OWNER = { add_to_variable = { num_advisor@fascism = -0.01 } } }
	}
	if = {
		limit = {
			has_character_flag = apolitical
		}
		
		custom_effect_tooltip = IDEOLOGY_APOLITICAL_ADVISOR
		hidden_effect = { OWNER = { add_to_variable = { num_advisor_apolitical = 0.01 } } }
	}
	
}

advisor_on_add_effect = {
	OWNER = { 
		set_temp_variable = { target = PREV }
		add_to_array = { assigned_advisor@var:slot = character } 
		
		#log = "ADD_ADVISOR [This.GetTag] | [GetMonth] [GetYear] | [?target.GetName] ([?target]) | [?character.GetTokenKey] ([?character]) ADD"
	}
	
	if = {
		limit = {
			has_character_flag = ideology
		}
		advisor_ideology_on_add = yes
	}
}

advisor_on_remove_effect = {
	OWNER = { 
		set_temp_variable = { target = PREV }
		remove_from_array = { assigned_advisor@var:slot = character } 
		
		#log = "REMOVE_ADVISOR | [This.GetTag] | [GetMonth] [GetYear] | Target: [?target.GetName] ([?target]) | [?character.GetTokenKey] ([?character]) REMOVE"
	}
	
	if = {
		limit = {
			has_character_flag = ideology
		}
		hidden_effect = {
			if = {
				limit = {
					has_character_flag = conservatism
				}
				
				OWNER = { subtract_from_variable = { num_advisor@conservatism = 0.01 } }
			}
			if = {
				limit = {
					has_character_flag = socialism
				}
				
				OWNER = { subtract_from_variable = { num_advisor@socialism = 0.01 } }
			}
			if = {
				limit = {
					has_character_flag = liberalism
				}
				
				OWNER = { subtract_from_variable = { num_advisor@liberalism = 0.01 } }
			}
			if = {
				limit = {
					has_character_flag = neutrality
				}
				
				OWNER = { subtract_from_variable = { num_advisor@neutrality = 0.01 } }
			}
			if = {
				limit = {
					has_character_flag = monarchism
				}
				
				OWNER = { subtract_from_variable = { num_advisor@monarchism = 0.01 } }
			}
			if = {
				limit = {
					has_character_flag = fascism
				}
				
				OWNER = { subtract_from_variable = { num_advisor@fascism = 0.01 } }
			}
			if = {
				limit = {
					has_character_flag = communism
				}
				
				OWNER = { subtract_from_variable = { num_advisor@communism = 0.01 } }
			}
			if = {
				limit = {
					has_character_flag = anti_communist
				}
				
				OWNER = { add_to_variable = { num_advisor@communism = 0.01 } }
			}
			if = {
				limit = {
					has_character_flag = anti_fascist
				}
				
				OWNER = { add_to_variable = { num_advisor@fascism = 0.01 } }
			}
			if = {
				limit = {
					has_character_flag = apolitical
				}
				
				OWNER = { subtract_from_variable = { num_advisor_apolitical = 0.01 } }
			}
		}
	}
}

head_of_state_on_add_effect = {
	set_temp_variable = { slot = token:head_of_state }
	
	hidden_effect = {
		OWNER = {
			set_country_flag = has_head_of_state
		}
		
	}
	advisor_on_add_effect = yes
}
head_of_state_on_remove_effect = {
	set_temp_variable = { slot = token:head_of_state }
	
	OWNER = { clr_country_flag = has_head_of_state }
	
	advisor_on_remove_effect = yes
}

foreign_minister_on_add_effect = {
	set_temp_variable = { slot = token:foreign_minister }
	
	hidden_effect = {
		OWNER = {
			set_country_flag = has_foreign_minister
			if = {
				limit = {
					NOT = {
						has_game_rule = {
							rule = allow_ai_foreign_ministers
							option = disable_all_foreign_ministers
						}	
					}
					OR = {
						is_ai = no
						has_game_rule = {
							rule = allow_ai_foreign_ministers
							option = ai_foreign_ministers
						}
						AND = {
							has_game_rule = {
								rule = allow_ai_foreign_ministers
								option = ai_foreign_ministers_major
							}
							is_major = yes
						}
					}
				}
				country_event = { id = foreign_minister.1 days = 20 random_days = 60 }
			}	
		}
	}
	advisor_on_add_effect = yes	
}
foreign_minister_on_remove_effect = {
	set_temp_variable = { slot = token:foreign_minister }
	
	OWNER = { clr_country_flag = has_foreign_minister }
	
	advisor_on_remove_effect = yes
}

interior_minister_on_add_effect = {
	set_temp_variable = { slot = token:interior_minister }
	
	hidden_effect = {
		OWNER = {
			set_country_flag = has_interior_minister
		}	
	}
	advisor_on_add_effect = yes
}
interior_minister_on_remove_effect = {
	set_temp_variable = { slot = token:interior_minister }
	
	OWNER = { clr_country_flag = has_interior_minister }
	
	advisor_on_remove_effect = yes
}

intel_minister_on_add_effect = {
	set_temp_variable = { slot = token:intel_minister }
	
	hidden_effect = {
		OWNER = {
			set_country_flag = has_intel_minister
		}
	}
	advisor_on_add_effect = yes
}
intel_minister_on_remove_effect = {
	set_temp_variable = { slot = token:intel_minister }
	
	OWNER = { clr_country_flag = has_intel_minister }
	
	advisor_on_remove_effect = yes
}

economic_minister_on_add_effect = {
	set_temp_variable = { slot = token:economic_minister }
	
	hidden_effect = {
		OWNER = {
			if = {
				limit = {
					has_country_flag = has_economic_minister
				}
				
				modify_country_flag = { flag = has_economic_minister value = 1 }
				
			}
			else = {
				set_country_flag = has_economic_minister
			}
		}
	}
	advisor_on_add_effect = yes	
}
economic_minister_on_remove_effect = {
	set_temp_variable = { slot = token:economic_minister }
	
	hidden_effect = {
		OWNER = {
			if = {
				limit = {
					has_country_flag = { flag = has_economic_minister value > 1 }
				}
				modify_country_flag = { flag = has_economic_minister value = -1 }
			}
			else = {
				clr_country_flag = has_economic_minister
			}
		}
	}
	advisor_on_remove_effect = yes
}

political_advisor_on_add_effect = {
	set_temp_variable = { slot = token:political_advisor }
	
	hidden_effect = {
		OWNER = {
			set_country_flag = has_political_advisor
		}
	}
	advisor_on_add_effect = yes	
}
political_advisor_on_remove_effect = {
	set_temp_variable = { slot = token:political_advisor }
	
	OWNER = { clr_country_flag = has_political_advisor }
	
	advisor_on_remove_effect = yes
}

domestic_minister_on_add_effect = {
	set_temp_variable = { slot = token:domestic_minister }
	
	hidden_effect = {
		OWNER = {
			if = {
				limit = {
					has_country_flag = has_domestic_minister
				}
				modify_country_flag = { flag = has_domestic_minister value = 1 }
			}
			else = {
				set_country_flag = has_domestic_minister
			}
		}
	}
	advisor_on_add_effect = yes
}
domestic_minister_on_remove_effect = {
	set_temp_variable = { slot = token:domestic_minister }
	
	hidden_effect = {
		OWNER = {
			if = {
				limit = {
					has_country_flag = { flag = has_domestic_minister value = 2 }
				}
				modify_country_flag = { flag = has_domestic_minister value = -1 }
			}
			else = {
				clr_country_flag = has_domestic_minister
			}
		}
	}
	advisor_on_remove_effect = yes
}

influence_minister_on_add_effect = {
	set_temp_variable = { slot = token:influence_minister }
	
	hidden_effect = {
		OWNER = {
			set_country_flag = has_influence_minister
		}
	}
	
	if = {
		limit = {
			date > 1936.1.2
		}
			
		set_original_capital = yes
		
		if = {
			limit = {
				has_trait = royalist_reformer
			}
			OWNER = {
				unlock_decision_category_tooltip = monarchism_on_the_rise
			
				activate_targeted_decision = {
					target = var:original_capital
					decision = ignite_the_monarch_civil_war
				}
				activate_targeted_decision = {
					target = var:original_capital
					decision = open_up_political_discourse_monarchism
				}
				activate_targeted_decision = {
					target = var:original_capital
					decision = discredit_government_monarchism
				}
				activate_targeted_decision = {
					target = var:original_capital
					decision = hold_the_monarch_national_referendum
				}
			}
		}
		else_if = {
			limit = {
				has_trait = fascist_demagogue
			}
			OWNER = {
				unlock_decision_category_tooltip = fascism_on_the_rise
			
				activate_targeted_decision = {
					target = var:original_capital
					decision = ignite_the_fascist_civil_war
				}
				activate_targeted_decision = {
					target = var:original_capital
					decision = open_up_political_discourse_fascism
				}
				activate_targeted_decision = {
					target = var:original_capital
					decision = discredit_government_fascism
				}
				activate_targeted_decision = {
					target = var:original_capital
					decision = hold_the_fascist_national_referendum
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_trait = conservative_reformer
					has_trait = liberal_reformer
					has_trait = socialist_reformer
				}
			}
			OWNER = {
				unlock_decision_category_tooltip = democratic_on_the_rise
			
				activate_targeted_decision = {
					target = var:original_capital
					decision = ignite_the_democratic_civil_war
				}
				activate_targeted_decision = {
					target = var:original_capital
					decision = open_up_political_discourse_democratic
				}
				activate_targeted_decision = {
					target = var:original_capital
					decision = discredit_government_democratic
				}
				activate_targeted_decision = {
					target = var:original_capital
					decision = hold_the_democratic_national_referendum
				}
			}
		}
		else_if = {
			limit = {
				has_trait = communist_revolutionary
			}
			OWNER = {
				unlock_decision_category_tooltip = communism_on_the_rise
			
				activate_targeted_decision = {
					target = var:original_capital
					decision = ignite_the_communist_civil_war
				}
				activate_targeted_decision = {
					target = var:original_capital
					decision = open_up_political_discourse_communist
				}
				activate_targeted_decision = {
					target = var:original_capital
					decision = discredit_government_communism
				}
				activate_targeted_decision = {
					target = var:original_capital
					decision = hold_the_communist_national_referendum
				}
			}
		}
	}
	advisor_on_add_effect = yes	
}
influence_minister_on_remove_effect = {
	set_temp_variable = { slot = token:influence_minister }
	
	OWNER = { clr_country_flag = has_influence_minister }
	
	advisor_on_remove_effect = yes
}


supreme_commander_on_add_effect = {
	set_temp_variable = { slot = token:supreme_commander }
	
	OWNER = { set_country_flag = has_supreme_commander }
	
	advisor_on_add_effect = yes	
}
supreme_commander_on_remove_effect = {
	set_temp_variable = { slot = token:supreme_commander }
	
	OWNER = { clr_country_flag = has_supreme_commander }
	
	advisor_on_remove_effect = yes
}

army_chief_on_add_effect = {
	set_temp_variable = { slot = token:army_chief }
	
	OWNER = { 
		set_country_flag = has_army_chief
	}
	
	advisor_on_add_effect = yes	
}
army_chief_on_remove_effect = {
	set_temp_variable = { slot = token:army_chief }
	
	OWNER = { clr_country_flag = has_army_chief }
	
	advisor_on_remove_effect = yes
}

air_chief_on_add_effect = {
	set_temp_variable = { slot = token:air_chief }
	
	OWNER = {
		set_country_flag = has_air_chief
	}
	
	advisor_on_add_effect = yes
}
air_chief_on_remove_effect = {
	set_temp_variable = { slot = token:air_chief }
	
	OWNER = { clr_country_flag = has_air_chief }
	
	advisor_on_remove_effect = yes
}

navy_chief_on_add_effect = {
	set_temp_variable = { slot = token:navy_chief }
	
	OWNER = {
		set_country_flag = has_navy_chief
	}
	
	advisor_on_add_effect = yes
}
navy_chief_on_remove_effect = {
	set_temp_variable = { slot = token:navy_chief }
	
	OWNER = { clr_country_flag = has_navy_chief }
	
	advisor_on_remove_effect = yes
}

high_command_on_add_effect = {
	set_temp_variable = { slot = token:high_command }
	
	if = {
		limit = {
			high_command_is_army = yes
		}
		
		OWNER = {
			if = {
				limit = {
					has_country_flag = has_high_command_army 
				}
				modify_country_flag = { flag = has_high_command_army value = 1 }
				hidden_effect = {
					remove_ideas = high_command_army_1
					add_ideas = high_command_army_2
				}
			}
			else = {
				set_country_flag = has_high_command_army
				hidden_effect = {
					add_ideas = high_command_army_1
				}
			}
			
			if = {
				limit = {
					OR = {
						has_country_flag = { flag = has_high_command_army value = 3 }
						NOT = { has_country_flag = has_army_chief }
					}
				}
				
				hidden_effect = {
					meta_effect = {
						text = {
							remove_ideas = [X]_high_command
						}
						X = "[?character.GetTokenKey]"
					}
					
					set_temp_variable = { cost_return = 150 }
					
					set_temp_variable = { mod = modifier@high_command_cost_factor }
					add_to_temp_variable = { mod = 1 }
					multiply_temp_variable = { cost_return = mod }
					
					set_temp_variable = { mod = modifier@army_advisor_cost_factor }
					add_to_temp_variable = { mod = 1 }
					multiply_temp_variable = { cost_return = mod }
					
					add_political_power = cost_return
				}
			}
			else = {
				hidden_effect = { PREV = { advisor_on_add_effect = yes } }
			}
			effect_tooltip = {	
				advisor_on_add_effect = yes
			}
		}
		
	
		if = { limit = { OWNER = { has_country_flag = { flag = has_high_command_army value = 2 } } }
			custom_effect_tooltip = "advisor_limit_reached_warning"
		}
		if = { limit = { OWNER = { NOT = { has_country_flag = has_army_chief } } }
			custom_effect_tooltip = "advisor_limit_army_chief"
		}
			
	}
	else_if = {
		limit = {
			high_command_is_air = yes
		}
		
		OWNER = {
			if = {
				limit = {
					has_country_flag = has_high_command_air
				}
				modify_country_flag = { flag = has_high_command_air value = 1 }
				hidden_effect = {
					swap_ideas = {
						remove_idea = high_command_air_1
						add_idea = high_command_air_2
					}
				}
			}
			else = {
				set_country_flag = has_high_command_air
				hidden_effect = {
					add_ideas = high_command_air_1
				}
			}
			
			if = {
				limit = {
					OR = {
						has_country_flag = { flag = has_high_command_air value = 3 }
						NOT = { has_country_flag = has_air_chief }
					}
				}
				
				hidden_effect = {
					meta_effect = {
						text = {
							remove_ideas = [X]_high_command
						}
						X = "[?character.GetTokenKey]"
					}
					set_temp_variable = { cost_return = 150 }
					
					set_temp_variable = { mod = modifier@high_command_cost_factor }
					add_to_temp_variable = { mod = 1 }
					multiply_temp_variable = { cost_return = mod }
					
					set_temp_variable = { mod = modifier@air_advisor_cost_factor }
					add_to_temp_variable = { mod = 1 }
					multiply_temp_variable = { cost_return = mod }
					
					add_political_power = cost_return
				}
			}
			else = {
				hidden_effect = { PREV = { advisor_on_add_effect = yes } }
			}
			effect_tooltip = {	
				advisor_on_add_effect = yes
			}
		}
		
		if = { limit = { OWNER = { has_country_flag = { flag = has_high_command_air value = 2 } } }
			custom_effect_tooltip = "advisor_limit_reached_warning"
		}
		if = { limit = { OWNER = { NOT = { has_country_flag = has_air_chief } } }
			custom_effect_tooltip = "advisor_limit_air_chief"
		}
	}
	else_if = {
		limit = {
			high_command_is_navy = yes
		}
		
		OWNER = {
			if = {
				limit = {
					has_country_flag = has_high_command_navy
				}
				modify_country_flag = { flag = has_high_command_navy value = 1 }
				hidden_effect = {
					swap_ideas = {
						remove_idea = high_command_navy_1
						add_idea = high_command_navy_2
					}
				}
			}
			else = {
				set_country_flag = has_high_command_navy
				hidden_effect = {
					add_ideas = high_command_navy_1
				}
			}
			
			if = {
				limit = {
					OR = {
						has_country_flag = { flag = has_high_command_navy value = 3 }
						NOT = { has_country_flag = has_navy_chief }
					}
				}
				
				hidden_effect = {
					meta_effect = {
						text = {
							remove_ideas = [X]_high_command
						}
						X = "[?character.GetTokenKey]"
					}
					
					set_temp_variable = { cost_return = 150 }
					
					set_temp_variable = { mod = modifier@high_command_cost_factor }
					add_to_temp_variable = { mod = 1 }
					multiply_temp_variable = { cost_return = mod }
					
					set_temp_variable = { mod = modifier@navy_advisor_cost_factor }
					add_to_temp_variable = { mod = 1 }
					multiply_temp_variable = { cost_return = mod }
					
					add_political_power = cost_return
				}
			}
			else = {
				hidden_effect = { PREV = { advisor_on_add_effect = yes } }
			}
			effect_tooltip = {	
				advisor_on_add_effect = yes
			}
		}
		
		if = { limit = { OWNER = { has_country_flag = { flag = has_high_command_navy value = 2 } } }
			custom_effect_tooltip = "advisor_limit_reached_warning"
		}
		if = { limit = { OWNER = { NOT = { has_country_flag = has_navy_chief } } }
			custom_effect_tooltip = "advisor_limit_navy_chief"
		}
	}
	
}

high_command_on_remove_effect = {
	set_temp_variable = { slot = token:high_command }

	hidden_effect = {
		if = {
			limit = {
				high_command_is_army = yes
			}
			
			OWNER = {
				if = {
					limit = {
						has_country_flag = { flag = has_high_command_army value > 1 }
					}
					modify_country_flag = { flag = has_high_command_army value = -1 }
					swap_ideas = {
						remove_idea = high_command_army_2
						add_idea = high_command_army_1
					}
				}
				else = {
					clr_country_flag = has_high_command_army
					remove_ideas = high_command_army_1
				}
			}
		}
		else_if = {
			limit = {
				high_command_is_air = yes
			}
			
			OWNER = {
				if = {
					limit = {
						has_country_flag = { flag = has_high_command_air value > 1 }
					}
					modify_country_flag = { flag = has_high_command_air value = -1 }
					swap_ideas = {
						remove_idea = high_command_air_2
						add_idea = high_command_air_1
					}
				}
				else = {
					clr_country_flag = has_high_command_air
					remove_ideas = high_command_air_1
				}
			}
		}
		else_if = {
			limit = {
				high_command_is_navy = yes
			}
			
			OWNER = {
				if = {
					limit = {
						has_country_flag = { flag = has_high_command_navy value > 1 }
					}
					modify_country_flag = { flag = has_high_command_navy value = -1 }
					swap_ideas = {
						remove_idea = high_command_navy_2
						add_idea = high_command_navy_1
					}
				}
				else = {
					clr_country_flag = has_high_command_navy
					remove_ideas = high_command_navy_1
				}
			}
		}
	}
	
	advisor_on_remove_effect = yes
}

theorist_on_add_effect = {
	set_temp_variable = { slot = token:theorist }
	
	if = {
		limit = {
			theorist_is_army = yes
		}
		
		OWNER = {
			if = {
				limit = {
					has_country_flag = has_theorist_army 
				}
				modify_country_flag = { flag = has_theorist_army value = 1 }
			}
			else = {
				set_country_flag = has_theorist_army
			}
			
			if = {
				limit = {
					OR = {
						has_country_flag = { flag = has_theorist_army value = 3 }
						NOT = { has_country_flag = has_army_chief }
					}
				}
				
				hidden_effect = {
					meta_effect = {
						text = {
							remove_ideas = [X]_theorist
						}
						X = "[?character.GetTokenKey]"
					}
					
					set_temp_variable = { cost_return = 150 }
					
					set_temp_variable = { mod = modifier@theorist_cost_factor }
					add_to_temp_variable = { mod = 1 }
					multiply_temp_variable = { cost_return = mod }
					
					set_temp_variable = { mod = modifier@army_advisor_cost_factor }
					add_to_temp_variable = { mod = 1 }
					multiply_temp_variable = { cost_return = mod }
					
					add_political_power = cost_return
				}
			}
			else = {
				hidden_effect = { PREV = { advisor_on_add_effect = yes } }
			}
		}
	
		effect_tooltip = {	
			advisor_on_add_effect = yes
		}
		if = { limit = { OWNER = { has_country_flag = { flag = has_theorist_army value = 2 } } }
			custom_effect_tooltip = "advisor_limit_reached_warning"
		}
		if = { limit = { OWNER = { NOT = { has_country_flag = has_army_chief } } }
			custom_effect_tooltip = "advisor_limit_army_chief"
		}
			
	}
	else_if = {
		limit = {
			theorist_is_air = yes
		}
		
		OWNER = {
			if = {
				limit = {
					has_country_flag = has_theorist_air
				}
				modify_country_flag = { flag = has_theorist_air value = 1 }
			}
			else = {
				set_country_flag = has_theorist_air
			}
			
			if = {
				limit = {
					OR = {
						has_country_flag = { flag = has_theorist_air value = 3 }
						NOT = { has_country_flag = has_air_chief }
					}
				}
				
				hidden_effect = {
					meta_effect = {
						text = {
							remove_ideas = [X]_theorist
						}
						X = "[?character.GetTokenKey]"
					}
					set_temp_variable = { cost_return = 150 }
					
					set_temp_variable = { mod = modifier@theorist_cost_factor }
					add_to_temp_variable = { mod = 1 }
					multiply_temp_variable = { cost_return = mod }
					
					set_temp_variable = { mod = modifier@air_advisor_cost_factor }
					add_to_temp_variable = { mod = 1 }
					multiply_temp_variable = { cost_return = mod }
					
					add_political_power = cost_return
				}
			}
			else = {
				hidden_effect = { PREV = { advisor_on_add_effect = yes } }
			}
		}
		effect_tooltip = {	
			advisor_on_add_effect = yes
		}
		
		if = { limit = { OWNER = { has_country_flag = { flag = has_theorist_air value = 2 } } }
			custom_effect_tooltip = "advisor_limit_reached_warning"
		}
		if = { limit = { OWNER = { NOT = { has_country_flag = has_air_chief } } } 
			custom_effect_tooltip = "advisor_limit_air_chief"
		}
			
	}
	else_if = {
		limit = {
			theorist_is_navy = yes
		}
		
		OWNER = {
			if = {
				limit = {
					has_country_flag = has_theorist_navy
				}
				modify_country_flag = { flag = has_theorist_navy value = 1 }
			}
			else = {
				set_country_flag = has_theorist_navy
			}
			
			if = {
				limit = {
					OR = {
						has_country_flag = { flag = has_theorist_navy value = 3 }
						NOT = { has_country_flag = has_navy_chief }
					}
				}
				
				hidden_effect = {
					meta_effect = {
						text = {
							remove_ideas = [X]_theorist
						}
						X = "[?character.GetTokenKey]"
					}
					set_temp_variable = { cost_return = 150 }
					
					set_temp_variable = { mod = modifier@theorist_cost_factor }
					add_to_temp_variable = { mod = 1 }
					multiply_temp_variable = { cost_return = mod }
					
					set_temp_variable = { mod = modifier@navy_advisor_cost_factor }
					add_to_temp_variable = { mod = 1 }
					multiply_temp_variable = { cost_return = mod }
					
					add_political_power = cost_return
				}
			}
			else = {
				hidden_effect = { PREV = { advisor_on_add_effect = yes } }
			}
		}
		effect_tooltip = {	
			advisor_on_add_effect = yes
		}
		
		if = { limit = { OWNER = { has_country_flag = { flag = has_theorist_navy value = 2 } } }
			custom_effect_tooltip = "advisor_limit_reached_warning"
		}
		if = { limit = { OWNER = { NOT = { has_country_flag = has_navy_chief } } }
			custom_effect_tooltip = "advisor_limit_navy_chief"
		}
			
	}

}

theorist_on_remove_effect = {
	set_temp_variable = { slot = token:theorist }
	
	hidden_effect = {
		if = {
			limit = {
				theorist_is_army = yes
			}
			
			OWNER = {
				if = {
					limit = {
						has_country_flag = { flag = has_theorist_army value > 1 }
					}
					modify_country_flag = { flag = has_theorist_army value = -1 }
				}
				else = {
					clr_country_flag = has_theorist_army
				}
			}
		
		}
		else_if = {
			limit = {
				theorist_is_air = yes
			}
			
			OWNER = {
				if = {
					limit = {
						has_country_flag = { flag = has_theorist_air value > 1 }
					}
					modify_country_flag = { flag = has_theorist_air value = -1 }
				}
				else = {
					clr_country_flag = has_theorist_air
				}
			}
			
		}
		else_if = {
			limit = {
				theorist_is_navy = yes
			}
			
			OWNER = {
				if = {
					limit = {
						has_country_flag = { flag = has_theorist_navy value > 1 }
					}
					modify_country_flag = { flag = has_theorist_navy value = -1 }
				}
				else = {
					clr_country_flag = has_theorist_navy
				}
			}
			
		}
	}
	
	advisor_on_remove_effect = yes
}

generate_generic_advisors = {
	set_country_flag = has_generic_characters

	generate_generic_arab_advisors = yes 
	generate_generic_china_advisors = yes 
	if = {
		limit = {
			OR = {
				tag = AFG 
				tag = BRA
				tag = COS
				tag = DOM
				tag = ECU
				tag = EHA
				tag = FRI
				tag = INS
				tag = LEB
				tag = LIT
				tag = MAL
				tag = MON
				tag = OMA
				tag = PGR
				tag = SDC
				tag = SIA
				tag = SKC
				tag = TIB
				tag = XIA
				tag = YEM
				tag = YUT
			}
			NOT = {
				any_character = {
					is_character_slot = head_of_state 
					has_trait = elder_statesman
				}
			}
		}
		
		if = { 
			limit = { is_ai = yes
				OR = {
					#always = yes
					tag = EGY #list of ai countries which use this advisor
					tag = BRA
					tag = MON
					tag = PGR
					tag = SDC
					tag = SIA
					tag = XIA
					tag = YUT
				}
			}
			generate_character = { token_base = generic_head_of_state }
			add_to_array = { generic_characters = token:generic_head_of_state }
			
		}
		else_if = { 
			limit = {  
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = head_of_state } } } }
			}
			
			generate_character = { token_base = generic_head_of_state }
			add_to_array = { generic_characters = token:generic_head_of_state }
		}
	}
	
	
	if = {
		limit = {
			OR = {
				tag = BMP
				tag = CHL
				tag = CUB
				tag = EGY
				tag = ELS
				tag = GUA
				tag = LAT
				tag = LIB
				tag = LUX
				tag = MEN
				tag = MOR
				tag = PAN
				tag = PRU
				tag = SCC
				tag = SHX
				tag = SIK
				tag = SYR
				tag = TUN
				tag = XSM
				tag = YUN
				tag = ZXL
				tag = YUN
				tag = RGR
			}
			NOT = {
				any_character = {
					#is_character_slot = head_of_state 
					has_trait = popular_figurehead
				}
			}
		}
			
		if = { limit = { is_ai = yes
				OR = {
					#always = yes
					tag = CIV #list of ai countries which use this advisor
					tag = EGY
					tag = SCC
					tag = SHX
					tag = SIK
					tag = XSM
					tag = YUT
					tag = RGR
				}
			}
		
			generate_character = { token_base = generic_head_of_state_2}
			add_to_array = { generic_characters = token:generic_head_of_state_2 }
			
		}
		else_if = { 
			limit = {  
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = head_of_state } } } }
			}
			
			generate_character = { token_base = generic_head_of_state_2 }
			add_to_array = { generic_characters = token:generic_head_of_state_2 }
			
		}
			
	}
	
	### foreign ministers ###
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = AUS
				tag = BOL
				tag = CHL
				tag = CUB
				tag = EHA
				tag = ELS
				tag = GXC
				tag = HON
				tag = IRE
				tag = LUX
				tag = MAL
				tag = MEX
				tag = NIC
				tag = PAR
				tag = PGR
				tag = PRC
				tag = SDC
				tag = SHX
				tag = SKC
				tag = TAN
				tag = YUG
				tag = YUT
				tag = SIA
			}
			NOT = {
				any_character = {
					is_character_slot = foreign_minister 
					has_trait = popular_figurehead
				}
			}
		}
		
		if = { limit = { is_ai = yes
				OR = {
					#always = yes
					tag = PGR #list of ai countries which use this advisor
					tag = PRC
					tag = SDC
					tag = SIA
				}
			}
			
			generate_character = { token_base = generic_foreign_minister}
			add_to_array = { generic_characters = token:generic_foreign_minister }
			
		}
		else_if = { 
			limit = {  
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = foreign_minister } } } }
			}
		
			generate_character = { token_base = generic_foreign_minister }
			add_to_array = { generic_characters = token:generic_foreign_minister }
			
		}
		
	}
	
	
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = BMP
				tag = BOL
				tag = COS
				tag = EHA
				tag = ETH
				tag = HAI
				tag = INS
				tag = LIB
				tag = LUX
				tag = MEN
				tag = MON
				tag = NOR
				tag = PER
				tag = PHI
				tag = SAF
				tag = SDC
				tag = SIK
				tag = SWE
				tag = TUR
				tag = YUN
				tag = ZXL
			}
			NOT = {
				any_character = {
					is_character_slot = foreign_minister 
					has_trait = ideological_crusader
				}
			}
		}
		
		if = { limit = { is_ai = yes
				OR = {
					#always = yes
					tag = PHI #list of ai countries which use this advisor
					tag = SIK
				}
			}
			
			generate_character = { token_base = generic_foreign_minister_2}
			add_to_array = { generic_characters = token:generic_foreign_minister_2 }
			
		}
		else_if = { 
			limit = {  
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = foreign_minister } } } }
			}
		
			generate_character = { token_base = generic_foreign_minister_2 }
			add_to_array = { generic_characters = token:generic_foreign_minister_2 }
			
		}
			
			
	}
	
	
	if = {
		limit = {
			OR = {
				tag = ARG
				tag = BMP
				tag = BUL
				tag = COS
				tag = ELS
				tag = GRE
				tag = HOL
				tag = INS
				tag = LIT
				tag = MAL
				tag = MEX
				tag = NIC
				tag = PAN
				tag = PGR
				tag = POL
				tag = SCC
				tag = SHX
				tag = SKC
				tag = TAN
				tag = VEN
				tag = YUT
				tag = ZXL
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = foreign_minister 
					has_trait = apologetic_clerk
				}
			}
		}
		
		if = { limit = { is_ai = yes
				OR = {
					#always = yes
					tag = MEX #list of ai countries which use this advisor
					tag = SHX
					tag = RGR
				}
			}
			
			generate_character = { token_base = generic_foreign_minister_3}
			add_to_array = { generic_characters = token:generic_foreign_minister_3 }
			
		}
		else_if = { 
			limit = {  
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = foreign_minister } } } }
			}
		
			generate_character = { token_base = generic_foreign_minister_3 }
			add_to_array = { generic_characters = token:generic_foreign_minister_3 }
			
		}
				
	}
	
	### interior minister ###
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = AUS
				tag = BMP
				tag = BRA
				tag = BUR
				tag = CHL
				tag = COS
				tag = CUB
				tag = DOM
				tag = EHA
				tag = ELS
				tag = ETH
				tag = GRE
				tag = GXC
				tag = HON
				tag = IRE
				tag = LAT
				tag = LUX
				tag = MEN
				tag = NEP
				tag = NOR
				tag = PAN
				tag = PGR
				tag = POL
				tag = PRU
				tag = SDC
				tag = SHX
				tag = SKC
				tag = SWI
				tag = TAN
				tag = TUR
				tag = VEN
				tag = XIA
				tag = YUT
				tag = ZXL
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = interior_minister 
					has_trait = efficient_sociopath
				}
			}
		}
		
		if = { limit = { is_ai = yes
				OR = {
					#always = yes
					tag = SDC #list of ai countries which use this advisor
					tag = SHX
					tag = SWI
					tag = XIA
					tag = YUT
					tag = RGR
				}
			}
			
			generate_character = { token_base = generic_interior_minister}
			add_to_array = { generic_characters = token:generic_interior_minister }
			
		}
		else_if = { 
			limit = {
                OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = interior_minister } } } }
			}
			
			generate_character = { token_base = generic_interior_minister }
			add_to_array = { generic_characters = token:generic_interior_minister }
		}
			
	}
	
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = BHU
				tag = BOL
				tag = BRA
				tag = BUR
				tag = CHL
				tag = CRO
				tag = CZE
				tag = DOM
				tag = ECU
				tag = EHA
				tag = EST
				tag = FRI
				tag = GUA
				tag = HAI
				tag = INS
				tag = JOR
				tag = LIB
				tag = MAL
				tag = MON
				tag = NIC
				tag = NOR
				tag = PAR
				tag = PGR
				tag = PRC
				tag = SCC
				tag = SDC
				tag = SIA
				tag = SKC
				tag = SWI
				tag = TIB
				tag = URG
				tag = VEN
				tag = XSM
				tag = YUT
			}
			NOT = {
				any_character = {
					is_character_slot = interior_minister 
					has_trait = backroom_backstabber
				}
			}
		}
		
		if = { limit = { is_ai = yes
				OR = {
					#always = yes
					tag = CIV #list of ai countries which use this advisor
					tag = BRA
					tag = NOR
					tag = PGR
					tag = SCC
				}
			}
			
			generate_character = { token_base = generic_interior_minister_2}
			add_to_array = { generic_characters = token:generic_interior_minister_2 }
		}
		else_if = { 
			limit = {  
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = interior_minister } } } }
			}
		
			generate_character = { token_base = generic_interior_minister_2 }
			add_to_array = { generic_characters = token:generic_interior_minister_2 }
		}
			
	}
	
	if = {
		limit = {
			OR = {
				tag = ARG
				tag = BHU
				tag = BOL
				tag = BUL
				tag = CAN
				tag = COS
				tag = CUB
				tag = DEN
				tag = ECU
				tag = ELS
				tag = EST
				tag = FRI
				tag = GUA
				tag = HAI
				tag = INS
				tag = LAT
				tag = LUX
				tag = MAL
				tag = NEP
				tag = NIC
				tag = PAN
				tag = PAR
				tag = PHI
				tag = PRU
				tag = SCC
				tag = SHX
				tag = SIK
				tag = SWE
				tag = TAN
				tag = TIB
				tag = URG
				tag = XIA
				tag = YUN
				tag = ZXL
			}
			NOT = {
				any_character = {
					is_character_slot = interior_minister 
					has_trait = hearts_and_minds
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
			
			generate_character = {
				token_base = generic_interior_minister_3
			}
			add_to_array = { generic_characters = token:generic_interior_minister_3 }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = interior_minister } } } }
			}
		
			generate_character = {
				token_base = generic_interior_minister_3
			}
			add_to_array = { generic_characters = token:generic_interior_minister_3 }
		}
			
	}
	### intel minister ###
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = ARG
				tag = AUS
				tag = BHU
				tag = BOL
				tag = BRA
				tag = CHL
				tag = COL
				tag = CUB
				tag = DOM
				tag = ELS
				tag = HON
				tag = LIB
				tag = LUX
				tag = PAN
				tag = PAR
				tag = PHI
				tag = PRU
				tag = SIA
				tag = SWI
				tag = TAN
				tag = TIB
				tag = URG
				tag = VEN
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = intel_minister 
					has_trait = dismal_enigma
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = AUS
					tag = BRA
					tag = PHI
					tag = SIA
					tag = SWI
					tag = RGR
                }
            }
			
			generate_character = {
				token_base = generic_intel_minister
			}
			add_to_array = { generic_characters = token:generic_intel_minister }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = intel_minister } } } }
			}
		
			generate_character = {
				token_base = generic_intel_minister
			}
			add_to_array = { generic_characters = token:generic_intel_minister }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = BEL
				tag = BMP
				tag = BUR
				tag = COS
				tag = CRO
				tag = DEN
				tag = ECU
				tag = EHA
				tag = EST
				tag = FRI
				tag = GUA
				tag = HAI
				tag = INS
				tag = LAT
				tag = LIT
				tag = MAL
				tag = MEX
				tag = NEP
				tag = NIC
				tag = NOR
				tag = NZL
			}
			NOT = {
				any_character = {
					is_character_slot = intel_minister 
					has_trait = codebreaker
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = DEN
					tag = MEX
					tag = NOR
                }
            }
				
			generate_character = {
				token_base = generic_intel_minister_4
			}
			add_to_array = { generic_characters = token:generic_intel_minister_4 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = intel_minister } } } }
			}
	
			generate_character = {
				token_base = generic_intel_minister_4 
			}
			add_to_array = { generic_characters = token:generic_intel_minister_4 }
		}
			
	}
	if = {
		limit = {
			has_dlc = "La Resistance"
			OR = {
				tag = AFG
				tag = AUS
				tag = BHU
				tag = BRA
				tag = BUR
				tag = CHL
				tag = COL
				tag = CZE
				tag = DEN
				tag = DOM
				tag = ECU
				tag = EHA
				tag = ELS
				tag = GXC
				tag = FRI
				tag = HAI
				tag = IRQ
				tag = LAT
				tag = LIB
				tag = LIT
				tag = MAL
				tag = NIC
				tag = NOR
				tag = PAN
				tag = PAR
				tag = PGR
				tag = PHI
				tag = PRU
				tag = SCC
				tag = SDC
				tag = SHX
				tag = SIA
				tag = SWI
				tag = TAN
				tag = URG
				tag = VEN
				tag = YUG
				tag = YUN
				tag = ZXL
			}
			NOT = {
				any_character = {
					is_character_slot = intel_minister 
					has_trait = head_of_intelligence
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_intel_minister_2
			}
			add_to_array = { generic_characters = token:generic_intel_minister_2 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = intel_minister } } } }
			}
		
			generate_character = {
				token_base = generic_intel_minister_2 
			}
			add_to_array = { generic_characters = token:generic_intel_minister_2 }
		}
			
	}
	if = {
		limit = {
			has_dlc = "La Resistance"
			OR = {
				tag = ALB
				tag = ARG
				tag = BMP
				tag = BOL
				tag = COS
				tag = CRO
				tag = CUB
				tag = EST
				tag = GRE
				tag = GUA
				tag = HOL
				tag = HON
				tag = INS
				tag = LUX
				tag = MEN
				tag = MEX
				tag = MON
				tag = NEP
				tag = NZL
				tag = RAJ
				tag = SAF
				tag = SKC
				tag = SWI
				tag = TIB
				tag = XIA
				tag = XSM
				tag = YUT
			}
			NOT = {
				any_character = {
					is_character_slot = intel_minister 
					has_trait = security_expert
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_intel_minister_3
			}
			add_to_array = { generic_characters = token:generic_intel_minister_3 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = intel_minister } } } }
			}
		
			generate_character = {
				token_base = generic_intel_minister_3 
			}
			add_to_array = { generic_characters = token:generic_intel_minister_3 }
		}
			
	}
	### Economic Minsters ####
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = ARG
				tag = BHU
				tag = CHL
				tag = COS
				tag = CUB
				tag = ECU
				tag = EST
				tag = FRI
				tag = HAI
				tag = JOR
				tag = LEB
				tag = LUX
				tag = MAR
				tag = MEN
				tag = NEP
				tag = NOR
				tag = PAN
				tag = PRU
				tag = SIA
				tag = SYR
				tag = URG
			}
			NOT = {
				any_character = {
					is_character_slot = economic_minister 
					has_trait = capitalist
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_economic_1
			}
			add_to_array = { generic_characters = token:generic_economic_1 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = economic_minister } } } }
			}
		
			generate_character = {
				token_base = generic_economic_1 
			}
			add_to_array = { generic_characters = token:generic_economic_1 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = ARG
				tag = BHU
				tag = CHL
				tag = COS
				tag = CZE
				tag = EGY
				tag = EHA
				tag = EST
				tag = GUA
				tag = HON
				tag = JOR
				tag = LEB
				tag = LUX
				tag = MEX
				tag = NEP
				tag = NOR
				tag = PAR
				tag = PRU
				tag = SIA
				tag = TAN
				tag = URG
				
				tag = RGR #im not so cruel after all
			}
			NOT = {
				any_character = {
					is_character_slot = economic_minister 
					has_trait = administrative_genius
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = MEX
					tag = NOR
					tag = SIA
					tag = RGR
					tag = ARG
                }
            }
				
			generate_character = {
				token_base = generic_economic_2
			}
			add_to_array = { generic_characters = token:generic_economic_2 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = economic_minister } } } }
			}
		
			generate_character = {
				token_base = generic_economic_2 
			}
			add_to_array = { generic_characters = token:generic_economic_2 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = AUS
				tag = BMP
				tag = COL
				tag = COS
				tag = DEN
				tag = ECU
				tag = EHA
				tag = ETH
				tag = GUA
				tag = HON
				tag = JOR
				tag = LEB
				tag = MAL
				tag = MON
				tag = NEP
				tag = NOR
				tag = PAR
				tag = PRU
				tag = SIA
				tag = TUN
				tag = URG
			}
			NOT = {
				any_character = {
					is_character_slot = economic_minister 
					has_trait = econ_interventionist
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_economic_3
			}
			add_to_array = { generic_characters = token:generic_economic_3 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = economic_minister } } } }
			}
		
			generate_character = {
				token_base = generic_economic_3 
			}
			add_to_array = { generic_characters = token:generic_economic_3 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = AUS
				tag = BOL
				tag = COL
				tag = CRO
				tag = DEN
				tag = EGY
				tag = EHA
				tag = ETH
				tag = GUA
				tag = INS
				tag = LAT
				tag = LIB
				tag = MAL
				tag = MOR
				tag = NEP
				tag = OMA
				tag = PAR
				tag = SWI
				tag = TUN
				tag = VEN
			}
			NOT = {
				any_character = {
					is_character_slot = economic_minister 
					has_trait = public_works_focus
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = AUS
                }
            }
			
			generate_character = {
				token_base = generic_economic_4
			}
			add_to_array = { generic_characters = token:generic_economic_4 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = economic_minister } } } }
			}
		
			generate_character = {
				token_base = generic_economic_4 
			}
			add_to_array = { generic_characters = token:generic_economic_4 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = AUS
				tag = BOL
				tag = COL
				tag = CUB
				tag = DOM
				tag = EUC
				tag = EHA
				tag = GUA
				tag = INS
				tag = LAT
				tag = LIB
				tag = MAR
				tag = MOR
				tag = NIC
				tag = OMA
				tag = PHI
				tag = SAU
				tag = SYR
				tag = TUN
				tag = VEN
			}
			NOT = {
				any_character = {
					is_character_slot = economic_minister 
					has_trait = free_marketer
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = PHI
                }
            }
				
			generate_character = {
				token_base = generic_economic_5
			}
			add_to_array = { generic_characters = token:generic_economic_5 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = economic_minister } } } }
			}
		
			generate_character = {
				token_base = generic_economic_5 
			}
			add_to_array = { generic_characters = token:generic_economic_5 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = BHU
				tag = BRA
				tag = COL
				tag = CUB
				tag = DOM
				tag = EGY
				tag = ELS
				tag = FRI
				tag = HAI
				tag = INS
				tag = LAT
				tag = LIB
				tag = MAR
				tag = MOR
				tag = NIC
				tag = OMA
				tag = PHI
				tag = SYR
				tag = TUN
				tag = YEM
				
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = economic_minister 
					has_trait = rail_baron
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_economic_6
			}
			add_to_array = { generic_characters = token:generic_economic_6 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = economic_minister } } } }
			}
			
			generate_character = {
				token_base = generic_economic_6 
			}
			add_to_array = { generic_characters = token:generic_economic_6 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ARG
				tag = BUR
				tag = CHL
				tag = COS
				tag = DOM
				tag = EGY
				tag = EST
				tag = FRI
				tag = HAI
				tag = INS
				tag = LEB
				tag = LIT
				tag = MAR
				tag = MOR
				tag = NIC
				tag = PAN
				tag = PHI
				tag = SAU
				tag = SYR
				tag = URG
				tag = YEM
				
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = economic_minister 
					has_trait = war_industrialist
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = PHI
					tag = RGR
					tag = ARG
                }
            }
				
			generate_character = {
				token_base = generic_economic_7
			}
			add_to_array = { generic_characters = token:generic_economic_7 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = economic_minister } } } }
			}
		
			generate_character = {
				token_base = generic_economic_7 
			}
			add_to_array = { generic_characters = token:generic_economic_7 }
		}
			
	}
	### Political Advisors ###
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = AUS
				tag = BOL
				tag = BUR
				tag = COL
				tag = CUB
				tag = DOM
				tag = ECU
				tag = ELS
				tag = FIN
				tag = GUA
				tag = HAI
				tag = IRE
				tag = LIB
				tag = MAL
				tag = NIC
				tag = PAN
				tag = PGR
				tag = PRU
				tag = SIA
				tag = SWI
				tag = URG
				tag = XSM
				tag = YUN
				
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = political_advisor 
					has_trait = sympathetic_judge
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_political_1
			}
			add_to_array = { generic_characters = token:generic_political_1 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = political_advisor } } } }
			}
		
			generate_character = {
				token_base = generic_political_1 
			}
			add_to_array = { generic_characters = token:generic_political_1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = ARG
				tag = BMP
				tag = BUL
				tag = CHL
				tag = COS
				tag = CZE
				tag = EHA
				tag = ELS
				tag = FRA
				tag = GUA
				tag = HAI
				tag = JOR
				tag = LIB
				tag = MEN
				tag = NOR
				tag = PAR
				tag = PHI
				tag = SCC
				tag = SKC
				tag = TAN
				tag = URG
				tag = XSM
			}
			NOT = {
				any_character = {
					is_character_slot = political_advisor 
					has_trait = righthand_man
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CZE
					tag = NOR
					tag = BUL
                }
            }
				
			generate_character = {
				token_base = generic_political
			}
			add_to_array = { generic_characters = token:generic_political }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = political_advisor } } } }
			}
		
			generate_character = {
				token_base = generic_political 
			}
			add_to_array = { generic_characters = token:generic_political }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = AUS
				tag = BOL
				tag = BUR
				tag = COL
				tag = CUB
				tag = DOM
				tag = ECU
				tag = EST
				tag = FRI
				tag = HON
				tag = INS
				tag = LAT
				tag = LUX
				tag = MEN
				tag = NOR
				tag = PAR
				tag = POL
				tag = SDC
				tag = SPR
				tag = TUR
				tag = VEN
				tag = YUG
				tag = YUN
				
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = political_advisor 
					has_trait = black_marketeer
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
					tag = CIV
					tag = RGR
                }
            }
			
			generate_character = {
				token_base = generic_political_2
			}
			add_to_array = { generic_characters = token:generic_political_2 }

		}
		else_if = {
			limit = {
				 OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = political_advisor } } } }
			}
			
			generate_character = {
				token_base = generic_political_2 
			}
			add_to_array = { generic_characters = token:generic_political_2 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = BHU
				tag = BRA
				tag = CHL
				tag = COS
				tag = CZE
				tag = EHA
				tag = EST
				tag = FRI
				tag = GXC
				tag = INS
				tag = LAT
				tag = MAL
				tag = MON
				tag = PAN
				tag = PGR
				tag = POL
				tag = SHX
				tag = SWE
				tag = TUR
				tag = VEN
				tag = YUG
				tag = MEN
			}
			NOT = {
				any_character = {
					is_character_slot = political_advisor 
					has_trait = speechwriter
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = GXC
                }
            }
			
			generate_character = {
				token_base = generic_political_3
			}
			add_to_array = { generic_characters = token:generic_political_3 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = political_advisor } } } }
			}
			generate_character = {
				token_base = generic_political_3 
			}
			add_to_array = { generic_characters = token:generic_political_3 }

		}
			
	}
	### Domestic ###
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = ALB
				tag = AUS
				tag = BHU
				tag = BOL
				tag = BUR
				tag = CHL
				tag = COS
				tag = CUB
				tag = DEN
				tag = EHA
				tag = ELS
				tag = FRI
				tag = GRE
				tag = GXC
				tag = HON
				tag = INS
				tag = JOR
				tag = LAT
				tag = LIT
				tag = MAL
				tag = MEN
				tag = MEX
				tag = MON
				tag = NIC
				tag = NOR
				tag = PAN
				tag = PAR
				tag = PRU
				tag = SIA
				tag = TAN
				tag = TIB
				tag = URG
				tag = XSM
				tag = ZXL
			}
			NOT = {
				any_character = {
					is_character_slot = domestic_minister 
					has_trait = trade_minister
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = AUS
					tag = DEN
					tag = MEX
					tag = NOR
					tag = SIA
					tag = SIK
                }
            }
			
			generate_character = {
				token_base = generic_domestic_1
			}
			add_to_array = { generic_characters = token:generic_domestic_1 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
			}
			generate_character = {
				token_base = generic_domestic_1 
			}
			add_to_array = { generic_characters = token:generic_domestic_1 }
		}
	}
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = ALB
				tag = AUS
				tag = BHU
				tag = BRA
				tag = BUR
				tag = COL
				tag = COS
				tag = CUB		
				tag = ECU
				tag = EHA
				tag = EST
				tag = FRI
				tag = GRE
				tag = HAI
				tag = INS
				tag = JOR
				tag = LIB
				tag = LIT
				tag = MEN
				tag = MON
				tag = NIC
				tag = PAN
				tag = PER
				tag = POL
				tag = SIA
				tag = TAN
				tag = TIB
				tag = VEN
				tag = YUG
				
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = domestic_minister 
					has_trait = domestminster_farms
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = AUS
					tag = BRA
					tag = RGR
                }
            }
			
			generate_character = {
				token_base = generic_domestic_2
			}
			add_to_array = { generic_characters = token:generic_domestic_2 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
			}
				
			generate_character = {
				token_base = generic_domestic_2 
			}
			add_to_array = { generic_characters = token:generic_domestic_2 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = ARG
				tag = AUS
				tag = BMP
				tag = BRA
				tag = BUR
				tag = COL
				tag = COS
				tag = CZE
				tag = DOM
				tag = ECU
				tag = EHA
				tag = EST
				tag = FRI
				tag = GUA
				tag = HAI
				tag = JOR
				tag = LIB
				tag = LUX
				tag = MAL
				tag = MEN
				tag = NEP
				tag = NIC
				tag = NOR
				tag = PAN
				tag = PGR
				tag = PRC
				tag = SIA
				tag = TAN
				tag = TIB
				tag = VEN
				tag = YUN
				
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = domestic_minister 
					has_trait = domestminster_education
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_domestic_3
			}
			add_to_array = { generic_characters = token:generic_domestic_3 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
			}

			generate_character = {
				token_base = generic_domestic_3 
			}
			add_to_array = { generic_characters = token:generic_domestic_3 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = ARG
				tag = AUS
				tag = BOL
				tag = BRA
				tag = CHL
				tag = COL
				tag = CRO
				tag = DOM
				tag = ECU
				tag = ELS
				tag = EST
				tag = GUA
				tag = HON
				tag = INS
				tag = LAT
				tag = LIB
				tag = LUX
				tag = MAL
				tag = MEX
				tag = NEP
				tag = PHI
				tag = PAR
				tag = SAF
				tag = SKC
				tag = TAN
				tag = TIB
				tag = VEN
				
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = domestic_minister 
					has_trait = transport_minster
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = BRA
					tag = MEX
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_domestic_4
			}
			add_to_array = { generic_characters = token:generic_domestic_4 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
			}

			generate_character = {
				token_base = generic_domestic_4 
			}
			add_to_array = { generic_characters = token:generic_domestic_4 }
		}
			
	}

	if = {
		limit = {
			OR = {
				tag = ALB		
				tag = BHU
				tag = BOL
				tag = BRA
				tag = CHL
				tag = COL
				tag = CUB
				tag = DEN
				tag = DOM
				tag = ECU
				tag = ELS
				tag = EST
				tag = GUA
				tag = HAI
				tag = HON
				tag = LAT
				tag = LIB
				tag = LUX
				tag = MEX
				tag = NEP
				tag = NOR
				tag = PAR
				tag = PHI
				tag = PRU
				tag = SDC
				tag = SWI
				tag = TIB
				tag = URG
				tag = VEN
			}
			NOT = {
				any_character = {
					is_character_slot = domestic_minister 
					has_trait = open_immigration
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_domestic_5
			}
			add_to_array = { generic_characters = token:generic_domestic_5 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
			}
	
			generate_character = {
				token_base = generic_domestic_5 
			}
			add_to_array = { generic_characters = token:generic_domestic_5 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = ARG
				tag = BHU
				tag = BOL
				tag = BUR
				tag = CHL
				tag = COS
				tag = CUB
				tag = DEN
				tag = DOM
				tag = EHA
				tag = ELS
				tag = FRI
				tag = GUA
				tag = HON
				tag = LAT
				tag = LIT
				tag = LUX
				tag = MEX
				tag = NIC
				tag = PAN
				tag = PAR
				tag = PHI
				tag = PRU
				tag = SHX
				tag = SWI
				tag = TIB
				tag = URG
				tag = XIA
			}
			NOT = {
				any_character = {
					is_character_slot = domestic_minister 
					has_trait = domestminster_health
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = DEN
					tag = PHI
                }
            }
				
			generate_character = {
				token_base = generic_domestic_6
			}
			add_to_array = { generic_characters = token:generic_domestic_6 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
			}
	
			generate_character = {
				token_base = generic_domestic_6 
			}
			add_to_array = { generic_characters = token:generic_domestic_6 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = FRI
				tag = ARG
				tag = DEN
				tag = GRE
				tag = HAI
				tag = INS
				tag = MAL
				tag = NOR
				tag = PHI
				tag = POR
				tag = SIA
				tag = URG
				tag = YUT
			}
			NOT = {
				any_character = {
					is_character_slot = domestic_minister 
					has_trait = domestminster_fish
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = GRE
					tag = NOR
					tag = PHI
					tag = POR
					tag = SIA
                }
            }
				
			generate_character = {
				token_base = generic_domestic_7
			}
			add_to_array = { generic_characters = token:generic_domestic_7 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
			}
	
			generate_character = {
				token_base = generic_domestic_7 
			}
			add_to_array = { generic_characters = token:generic_domestic_7 }

		}
			
	}
	### Influence Ministers ###
	if = {
		limit = {
			is_dynamic_country = no
			NOT = {
				any_character = {
					is_character_slot = political_advisor 
					has_trait = journalist
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = AUS
					tag = PGR
					tag = POL
					tag = POR
					tag = SIK
					tag = TUR
					tag = XSM
					tag = YUG
					tag = YUN
                }
            }
				
			generate_character = {
				token_base = generic_journalist
			}
			add_to_array = { generic_characters = token:generic_journalist }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = political_advisor } } } }
			}
	
			generate_character = {
				token_base = generic_journalist 
			}
			add_to_array = { generic_characters = token:generic_journalist }
		}
			
	}
	if = {
		limit = {
			#is_interesting = no
			# avoid generic advisors in temporary countries
			can_switch_to_communism = yes
			is_dynamic_country = no
			NOT = {
				any_character = {
					is_character_slot = influence_minister 
					has_trait = communist_revolutionary
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_communist_revolutionary
			}
			add_to_array = { generic_characters = token:generic_communist_revolutionary }

		}
		else_if = {
			limit = {
				is_ai = no
			}
	
			generate_character = {
				token_base = generic_communist_revolutionary 
			}
			add_to_array = { generic_characters = token:generic_communist_revolutionary }
		}
			
	}

	if = {
		limit = {
			#is_interesting = no
			is_dynamic_country = no
			can_switch_to_socialism = yes
			NOT = {
				any_character = {
					is_character_slot = influence_minister 
					has_trait = socialist_reformer
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_socialist_reformer
			}
			add_to_array = { generic_characters = token:generic_socialist_reformer }

		}
		else_if = {
			limit = {
				is_ai = no
			}

			generate_character = {
				token_base = generic_socialist_reformer 
			}
			add_to_array = { generic_characters = token:generic_socialist_reformer }
		}
			
	}
	if = {
		limit = {
			#is_interesting = no
			is_dynamic_country = no
			can_switch_to_conservatism = yes
			NOT = {
				any_character = {
					is_character_slot = influence_minister 
					has_trait = conservative_reformer
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_conservative_reformer
			}
			add_to_array = { generic_characters = token:generic_conservative_reformer }

		}
		else_if = {
			limit = {
				is_ai = no
			}

			generate_character = {
				token_base = generic_conservative_reformer 
			}
			add_to_array = { generic_characters = token:generic_conservative_reformer }
		}
			
	}
	if = {
		limit = {
			#is_interesting = no
			is_dynamic_country = no
			can_switch_to_liberalism = yes
			NOT = {
				any_character = {
					is_character_slot = influence_minister 
					has_trait = liberal_reformer
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_liberal_reformer
			}
			add_to_array = { generic_characters = token:generic_liberal_reformer }

		}
		else_if = {
			limit = {
				is_ai = no
			}
	
			generate_character = {
				token_base = generic_liberal_reformer 
			}
			add_to_array = { generic_characters = token:generic_liberal_reformer }
		}
			
	}
	if = {
		limit = {
			#is_interesting = no
			is_dynamic_country = no
			can_switch_to_monarchism = yes
			NOT = {
				any_character = {
					is_character_slot = influence_minister 
					has_trait = royalist_reformer
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_royalist_reformer
			}
			add_to_array = { generic_characters = token:generic_royalist_reformer }

		}
		else_if = {
			limit = {
				is_ai = no
			}

			generate_character = {
				token_base = generic_royalist_reformer 
			}
			add_to_array = { generic_characters = token:generic_royalist_reformer }
		}
			
	}
	if = {
		limit = {
			#is_interesting = no
			is_dynamic_country = no
			can_switch_to_neutrality = yes
			NOT = {
				any_character = {
					is_character_slot = influence_minister 
					has_trait = staunch_traditionalist
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_staunch_traditionalist
			}
			add_to_array = { generic_characters = token:generic_staunch_traditionalist }

		}
		else_if = {
			limit = {
				is_ai = no
			}
	
			generate_character = {
				token_base = generic_staunch_traditionalist 
			}
			add_to_array = { generic_characters = token:generic_staunch_traditionalist }
		}
			
	}
	if = {
		limit = {
			#is_interesting = no
			is_dynamic_country = no
			can_switch_to_fascism = yes
			NOT = {
				any_character = {
					is_character_slot = influence_minister 
					has_trait = fascist_demagogue
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_fascist_demagogue
			}
			add_to_array = { generic_characters = token:generic_fascist_demagogue }

		}
		else_if = {
			limit = {
				is_ai = no
			}
			
			generate_character = {
				token_base = generic_fascist_demagogue 
			}
			add_to_array = { generic_characters = token:generic_fascist_demagogue }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = ALB
				tag = ARG
				tag = AST
				tag = AUS
				tag = BEL
				tag = BHU
				tag = BMP
				tag = BOL
				tag = BRA
				tag = BUL
				tag = BUR
				tag = CAN
				tag = CHI
				tag = CHL
				tag = COL
				tag = COS
				tag = CRO
				tag = CUB
				tag = CZE
				tag = DEN
				tag = DOM
				tag = ECU
				tag = EGY
				tag = EHA
				tag = ELS
				tag = ENG
				tag = EST
				tag = ETH
				tag = FIN
				tag = FRA
				tag = FRI
				tag = GRE
				tag = GUA
				tag = GXC
				tag = HAI
				tag = HOL
				tag = HON
				tag = HUN
				tag = INS
				tag = IRE
				tag = ITA
				tag = JAP
				tag = LAT
				tag = LEB
				tag = LIB
				tag = LIT
				tag = LUX
				tag = MAL
				tag = MAN
				tag = MAR
				tag = MEN
				tag = MEX
				tag = MON
				tag = MOR
				tag = YUG
				tag = USA
			}
			NOT = {
				any_character = {
					is_character_slot = influence_minister 
					has_trait = steady_peace
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CZE
					tag = DEN
					tag = FIN
					tag = GRE
					tag = GXC
					tag = HUN
					tag = IRE
					tag = MEX
					tag = MON
                }
            }
				
			generate_character = {
				token_base = generic_steady_peace
			}
			add_to_array = { generic_characters = token:generic_steady_peace }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = influence_minister } } } }
			}

			generate_character = {
				token_base = generic_steady_peace 
			}
			add_to_array = { generic_characters = token:generic_steady_peace }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = NEP
				tag = NIC
				tag = NOR
				tag = NZL
				tag = OMA
				tag = PAN
				tag = PAR
				tag = PER
				tag = PGR
				tag = PHI
				tag = POL
				tag = POR
				tag = PRC
				tag = PRU
				tag = RAJ
				tag = RGR
				tag = ROM
				tag = SAF
				tag = SAU
				tag = SCC
				tag = SDC
				tag = SHX
				tag = SIA
				tag = SKC
				tag = SOV
				tag = SPR
				tag = SWE
				tag = SWI
				tag = SYR
				tag = TAN
				tag = TIB
				tag = TUN
				tag = TUR
				tag = URG
				tag = USA
				tag = VEN
				tag = VIC
				tag = WJW
				tag = XIA
				tag = XSM
				tag = YEM
				tag = YUG
				tag = YUN
				tag = YUT
				tag = ZXL
				tag = AFG
				tag = ALB
				tag = ARG
				tag = AST
				tag = AUS
				tag = BEL
				tag = BHU
				tag = BMP
				tag = BOL
				tag = BRA
				tag = BUL
				tag = BUR
				tag = CAN
				tag = CHI
				tag = CHL
				tag = GER
			}
			NOT = {
				any_character = {
					is_character_slot = influence_minister 
					has_trait = angry_warrior
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = BEL
					tag = BRA
					tag = CAN
					tag = NOR
					tag = NZL
					tag = PER
					tag = PGR
					tag = PHI
					tag = POL
					tag = POR
					tag = PRC
					tag = SAF
					tag = SCC
					tag = SDC
					tag = SHX
					tag = SWE
					tag = SWI
					tag = USA
					tag = XIA
					tag = XSM
					tag = YUG
					tag = YUN
					tag = YUT
					tag = BUL
					tag = RGR
                }
            }
			
			generate_character = {
				token_base = generic_angry_warrior
			}
			add_to_array = { generic_characters = token:generic_angry_warrior }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = influence_minister } } } }
			}

			generate_character = {
				token_base = generic_angry_warrior 
			}
			add_to_array = { generic_characters = token:generic_angry_warrior }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = NEP
				tag = NIC
				tag = NOR
				tag = NZL
				tag = OMA
				tag = PAN
				tag = PAR
				tag = PER
				tag = PGR
				tag = PHI
				tag = POL
				tag = POR
				tag = PRC
				tag = PRU
				tag = RAJ
				tag = RGR
				tag = ROM
				tag = SAF
				tag = SAU
				tag = SCC
				tag = SDC
				tag = FRA
				tag = FRI
				tag = GER
				tag = GRE
				tag = GUA
				tag = GXC
				tag = HAI
				tag = HOL
				tag = HON
				tag = HUN
				tag = INS
				tag = IRE
				tag = ITA
				tag = JAP
				tag = LAT
				tag = LEB
				tag = LIB
				tag = LIT
				tag = LUX
				tag = MAL
				tag = MAN
				tag = MAR
				tag = MEN
				tag = MEX
				tag = MON
				tag = MOR
			}
			NOT = {
				any_character = {
					is_character_slot = influence_minister 
					has_trait = political_fearmonger
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_political_fearmonger
			}
			add_to_array = { generic_characters = token:generic_political_fearmonger }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = influence_minister } } } }
			}

			generate_character = {
				token_base = generic_political_fearmonger 
			}
			add_to_array = { generic_characters = token:generic_political_fearmonger }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ENG
				tag = PGR
				tag = PHI
				tag = POL
				tag = POR
				tag = PRC
				tag = PRU
				tag = RAJ
				tag = RGR
				tag = ROM
				tag = SAF
				tag = SAU
				tag = SCC
				tag = SDC
				tag = SHX
				tag = SIA
				tag = SKC
				tag = SOV
				tag = SPR
				tag = SWE
				tag = SWI
				tag = SYR
				tag = TAN
				tag = TIB
				tag = TUN
				tag = TUR
				tag = URG
				tag = USA
				tag = VEN
				tag = VIC
				tag = WJW
				tag = XIA
				tag = XSM
				tag = YEM
				tag = YUG
				tag = YUN
				tag = YUT
				tag = ZXL
				tag = AFG
				tag = ALB
				tag = ARG
				tag = AST
				tag = AUS
				tag = BEL
				tag = INS
				tag = IRE
				tag = ITA
				tag = JAP
				tag = JOR
				tag = LAT
				tag = LEB
				tag = LIB
				tag = LIT
				tag = LUX
				tag = MAL
				tag = MAN
				tag = MAR
				tag = MEN
				tag = MEX
				tag = MON
				tag = MOR
			}
			NOT = {
				any_character = {
					is_character_slot = influence_minister 
					has_trait = protector_weak
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
					tag = RGR
                }
			}
				
			generate_character = {
				token_base = generic_protector_weak
			}
			add_to_array = { generic_characters = token:generic_protector_weak }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = influence_minister } } } }
			}

			generate_character = {
				token_base = generic_protector_weak 
			}
			add_to_array = { generic_characters = token:generic_protector_weak }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = RAJ
				tag = RGR
				tag = ROM
				tag = SAF
				tag = SAU
				tag = SCC
				tag = SDC
				tag = SHX
				tag = SIA
				tag = SKC
				tag = SOV
				tag = SPR
				tag = SWE
				tag = SWI
				tag = SYR
				tag = TAN
				tag = TIB
				tag = TUN
				tag = TUR
				tag = URG
				tag = USA
				tag = VEN
				tag = VIC
				tag = WJW
				tag = XIA
				tag = XSM
				tag = YEM
				tag = YUG
				tag = YUN
				tag = YUT
				tag = ZXL
				tag = AFG
				tag = ALB
				tag = ARG
				tag = AST
				tag = AUS
				tag = BEL
				tag = BHU
				tag = LEB
				tag = LIB
				tag = LIT
				tag = LUX
				tag = MAL
				tag = MAN
				tag = MAR
				tag = MEN
				tag = MEX
				tag = MON
				tag = GER
				tag = YUG
				tag = ENG
			}
			NOT = {
				any_character = {
					is_character_slot = influence_minister 
					has_trait = unyeilding_defender
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = AUS
					tag = RAJ
					tag = SIA
					tag = TUR
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_unyeilding_defender
			}
			add_to_array = { generic_characters = token:generic_unyeilding_defender }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = influence_minister } } } }
			}
	
			generate_character = {
				token_base = generic_unyeilding_defender 
			}
			add_to_array = { generic_characters = token:generic_unyeilding_defender }
		}
			
	}
	### Supreme Commander ###
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = AUS
				tag = BMP	
				tag = CAN
				tag = COS
				tag = CZE
				tag = EHA
				tag = FRI
				tag = GUA
				tag = IRE
				tag = LEB
				tag = MAL
				tag = MEN
				tag = MON
				tag = NIC
				tag = PAN
				tag = PGR
				tag = PRU
				tag = SAU
				tag = SHX
				tag = SKC
				tag = SWE
				tag = TAN
				tag = TUR
				tag = XIA
				tag = YUG
				tag = ZXL
				tag = NZL
				
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = supreme_commander 
					has_trait = supreme_com_organizer
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = AUS
					tag = CAN
					tag = IRE
					tag = MON
					tag = SWE
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_supreme_commander
			}
			add_to_array = { generic_characters = token:generic_supreme_commander }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = supreme_commander } } } }
			}

			generate_character = {
				token_base = generic_supreme_commander 
			}
			add_to_array = { generic_characters = token:generic_supreme_commander }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = BEL
				tag = BHU
				tag = CHL
				tag = CRO
				tag = DEN
				tag = ECU
				tag = ELS
				tag = GRE
				tag = HON
				tag = JOR
				tag = LIB
				tag = MAN
				tag = MEX
				tag = MOR
				tag = NOR
				tag = PAR
				tag = PHI
				tag = RAJ
				tag = SCC
				tag = SIA
				tag = SWI
				tag = TIB
				tag = URG
				tag = XSM
				tag = YUN
				tag = NZL
				
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = supreme_commander 
					has_trait = supreme_com_planner
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = MAN
					tag = MEX
					tag = NOR
					tag = NZL
					tag = PHI
					tag = RAJ
					tag = SIA
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_supreme_commander_1
			}
			add_to_array = { generic_characters = token:generic_supreme_commander_1 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = supreme_commander } } } }
			}

			generate_character = {
				token_base = generic_supreme_commander_1 
			}
			add_to_array = { generic_characters = token:generic_supreme_commander_1 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ARG
				tag = BOL
				tag = BUR
				tag = COL
				tag = CUB
				tag = DOM
				tag = EGY
				tag = EST
				tag = GUA
				tag = INS
				tag = LAT
				tag = LUX
				tag = MAR
				tag = NEP
				tag = OMA
				tag = POL
				tag = SAF
				tag = SDC
				tag = SIK
				tag = SYR
				tag = TUN
				tag = VEN
				tag = YEM
				tag = YUT
			}
			NOT = {
				any_character = {
					is_character_slot = supreme_commander 
					has_trait = supreme_com_reformer
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_supreme_commander_2
			}
			add_to_array = { generic_characters = token:generic_supreme_commander_2 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = supreme_commander } } } }
			}

			generate_character = {
				token_base = generic_supreme_commander_2 
			}
			add_to_array = { generic_characters = token:generic_supreme_commander_2 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AST
				tag = BRA
				tag = BUL
				tag = CHI
				tag = ETH
				tag = FIN
				tag = HAI
				tag = HOL
				tag = IRQ
				tag = LIT
				tag = PER
				tag = SPR
				tag = AFG
				tag = AUS
				tag = BMP	
				tag = CAN
				tag = COS
				tag = CZE
				tag = EHA
				tag = FRI
				tag = GUA
				tag = IRE
				tag = LEB
				tag = MAL
				tag = MEN
				tag = MON
				tag = NIC
				tag = PAN
				tag = PGR
				tag = PRU
				tag = SAU
				tag = SHX
				tag = SKC
				tag = SWE
				tag = TAN
				tag = TUR
				tag = XIA
				tag = YUG
				tag = ZXL
				tag = ALB
				tag = BEL
				tag = BHU
				tag = CHL
				tag = CRO
				tag = DEN
				tag = ECU
				tag = ELS
				tag = GRE
				tag = HON
				tag = JOR
				tag = LIB
				tag = MAN
				tag = MEX
				tag = MOR
				tag = NOR
				tag = PAR
				tag = PHI
				tag = RAJ
				tag = SCC
				tag = SIA
				tag = SWI
				tag = TIB
				tag = URG
				tag = XSM
				tag = YUN
				tag = ARG
				tag = BOL
				tag = BUR
				tag = COL
				tag = CUB
				tag = DOM
				tag = EGY
				tag = EST
				tag = GUA
				tag = INS
				tag = LAT
				tag = LUX
				tag = MAR
				tag = NEP
				tag = OMA
				tag = POL
				tag = SAF
				tag = SDC
				tag = SIK
				tag = SYR
				tag = TUN
				tag = VEN
				tag = YEM
				tag = YUT
			}
			NOT = {
				any_character = {
					is_character_slot = supreme_commander 
					has_trait = supreme_com_old_guard
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = AST
					tag = BEL
					tag = CZE
					tag = DEN
					tag = POL
					tag = SAF
					tag = SIK
					tag = SWI
					tag = TUR
					tag = YUG
                }
            }
				
			generate_character = {
				token_base = generic_supreme_commander_3
			}
			add_to_array = { generic_characters = token:generic_supreme_commander_3 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = supreme_commander } } } }
			}

			generate_character = {
				token_base = generic_supreme_commander_3 
			}
			add_to_array = { generic_characters = token:generic_supreme_commander_3 }
		}
			
	}
	### Army Chief ###
	if = {
		limit = {
			OR = {
				tag = BMP
				tag = BUL
				tag = COS
				tag = EGY
				tag = EHA
				tag = ETH
				tag = FRI
				tag = INS
				tag = JOR
				tag = LEB
				tag = MAL
				tag = MAN
				tag = MAR
				tag = MEN
				tag = MOR
				tag = PGR
				tag = ROM
				tag = SCC
				tag = SDC
				tag = SKC
				tag = SYR
				tag = TUN
				tag = YUT
				
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = army_chief 
					OR = {
						has_trait = army_chief_planning_1
						has_trait = army_chief_planning_2
						has_trait = army_chief_planning_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_army_chief
			}
			add_to_array = { generic_characters = token:generic_army_chief }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = army_chief } } } }
			}
	
			generate_character = {
				token_base = generic_army_chief 
			}
			add_to_array = { generic_characters = token:generic_army_chief }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = COS
				tag = EGY
				tag = EHA
				tag = ETH
				tag = INS
				tag = JOR
				tag = LEB
				tag = MAL
				tag = MAR
				tag = MOR
				tag = PGR
				tag = SDC
				tag = SKC
				tag = SYR
				tag = TUN
			}
			NOT = {
				any_character = {
					is_character_slot = army_chief 
					OR = {
						has_trait = army_chief_defensive_1
						has_trait = army_chief_defensive_2
						has_trait = army_chief_defensive_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = PGR
					tag = SDC
                }
            }
				
			generate_character = {
				token_base = generic_army_chief_1
			}
			add_to_array = { generic_characters = token:generic_army_chief_1 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = army_chief } } } }
			}
	
			generate_character = {
				token_base = generic_army_chief_1 
			}
			add_to_array = { generic_characters = token:generic_army_chief_1 }
		}
			
	}
	### Navy Chief ###
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = BHU
				tag = ETH
				tag = JOR
				tag = MEN
				tag = MON
				tag = ECR
				tag = PRC
				tag = SCC
				tag = SIK
				tag = SKC
				tag = TAN
				tag = XIA
				tag = ZXL
				tag = RGR
			}
		} 
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = MON
					tag = SCC
					tag = SIK
					tag = RGR
                }
            }
				
			generate_character = { #ceremonial_navy
				token_base = generic_navy_chief
			}
			add_to_array = { generic_characters = token:generic_navy_chief }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = navy_chief } } } }
			}
	
			generate_character = {
				token_base = generic_navy_chief 
			}
			add_to_array = { generic_characters = token:generic_navy_chief }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = BMP
				tag = BUR
				tag = EHA
				tag = EGY
				tag = LEB
				tag = MAN
				tag = MAR
				tag = INS
				tag = PGR
				tag = SYR
				tag = TUN
			}
			NOT = {
				any_character = {
					is_character_slot = navy_chief 
					OR = {
						has_trait = navy_chief_maneuver_1
						has_trait = navy_chief_maneuver_2
						has_trait = navy_chief_maneuver_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = MAN
                }
            }
				
			generate_character = {
				token_base = generic_navy_chief_1
			}
			add_to_array = { generic_characters = token:generic_navy_chief_1 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = navy_chief } } } }
			}				
			generate_character = {
				token_base = generic_navy_chief_1 
			}
			add_to_array = { generic_characters = token:generic_navy_chief_1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = BMP
				tag = COS
				tag = EGY
				tag = FRI
				tag = MAL
				tag = MAN
				tag = MOR
				tag = INS
				tag = SDC
				tag = SYR
				tag = YUG
			}
			NOT = {
				any_character = {
					is_character_slot = navy_chief 
					OR = {
						has_trait = navy_chief_decisive_battle_1
						has_trait = navy_chief_decisive_battle_2
						has_trait = navy_chief_decisive_battle_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_navy_chief_2
			}
			add_to_array = { generic_characters = token:generic_navy_chief_2 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = navy_chief } } } }
			}
	
			generate_character = {
				token_base = generic_navy_chief_2 
			}
			add_to_array = { generic_characters = token:generic_navy_chief_2 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = BUR
				tag = COS
				tag = EHA
				tag = LEB
				tag = MAL
				tag = MAR
				tag = MOR
				tag = PGR
				tag = SDC
				tag = TUN
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = navy_chief 
					OR = {
						has_trait = navy_chief_commerce_raiding_1
						has_trait = navy_chief_commerce_raiding_2
						has_trait = navy_chief_commerce_raiding_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = PGR
					tag = SDC
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_navy_chief_3
			}
			add_to_array = { generic_characters = token:generic_navy_chief_3 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = navy_chief } } } }
			}

			generate_character = {
				token_base = generic_navy_chief_3 
			}
			add_to_array = { generic_characters = token:generic_navy_chief_3 }
		}
			
	}
	### Air Chief ###
	if = {
		limit = {
			OR = {
				tag = BMP
				tag = BUR
				tag = EGY
				tag = ETH
				tag = INS
				tag = LEB
				tag = MAL
				tag = MAR
				tag = MEN
				tag = SCC
				tag = SDC
				tag = SKC
				tag = TUN
				tag = XIA
				tag = SYR
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = air_chief 
					OR = {
						has_trait = air_chief_safety_1
						has_trait = air_chief_safety_2
						has_trait = air_chief_safety_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = SCC
					tag = SDC
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_air_chief
			}
			add_to_array = { generic_characters = token:generic_air_chief }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = air_chief } } } }
			}

			generate_character = {
				token_base = generic_air_chief 
			}
			add_to_array = { generic_characters = token:generic_air_chief }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = BMP
				tag = COS
				tag = EHA
				tag = ETH
				tag = JOR
				tag = LEB
				tag = MAN
				tag = MAR
				tag = MOR
				tag = SCC
				tag = SDC
				tag = SYR
				tag = TUN
				tag = YUT
				tag = PGR
				tag = SKC
				tag = SYR
			}
			NOT = {
				any_character = {
					is_character_slot = air_chief 
					OR = {
						has_trait = air_chief_night_operations_1
						has_trait = air_chief_night_operations_2
						has_trait = air_chief_night_operations_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = PGR
                }
            }
				
			generate_character = {
				token_base = generic_air_chief_1
			}
			add_to_array = { generic_characters = token:generic_air_chief_1 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = air_chief } } } }
			}

			generate_character = {
				token_base = generic_air_chief_1 
			}
			add_to_array = { generic_characters = token:generic_air_chief_1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = BUR
				tag = COS
				tag = EGY
				tag = EHA
				tag = INS
				tag = JOR
				tag = MAL
				tag = MAN
				tag = MEN
				tag = MOR
				tag = SKC
				tag = SYR
				tag = XIA
				tag = ZXL
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = air_chief 
					OR = {
						has_trait = air_chief_all_weather_1
						has_trait = air_chief_all_weather_2
						has_trait = air_chief_all_weather_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_air_chief_2
			}
			add_to_array = { generic_characters = token:generic_air_chief_2 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = air_chief } } } }
			}
	
			generate_character = {
				token_base = generic_air_chief_2 
			}
			add_to_array = { generic_characters = token:generic_air_chief_2 }

		}
			
	}

	##     ## ####  ######   ##     ##     ######   #######  ##     ## ##     ##    ###    ##    ## ########  
	##     ##  ##  ##    ##  ##     ##    ##    ## ##     ## ###   ### ###   ###   ## ##   ###   ## ##     ## 
	##     ##  ##  ##        ##     ##    ##       ##     ## #### #### #### ####  ##   ##  ####  ## ##     ## 
	#########  ##  ##   #### #########    ##       ##     ## ## ### ## ## ### ## ##     ## ## ## ## ##     ## 
	##     ##  ##  ##    ##  ##     ##    ##       ##     ## ##     ## ##     ## ######### ##  #### ##     ## 
	##     ##  ##  ##    ##  ##     ##    ##    ## ##     ## ##     ## ##     ## ##     ## ##   ### ##     ## 
	##     ## ####  ######   ##     ##     ######   #######  ##     ## ##     ## ##     ## ##    ## ########  

	set_temp_variable = { advisor_num = 0 }
	every_character = {
		limit = {
			is_character_slot = high_command
		}
		add_to_temp_variable = { advisor_num = 1 }
	}
	
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = AUS
				tag = CAN
				tag = COS
				tag = EGY
				tag = EHA
				tag = ETH
				tag = LEB
				tag = MAL
				tag = MAR
				tag = MOR
				tag = NEP
				tag = PAR
				tag = SCC
				tag = TAN
			}
			NOT = {
				any_character = {
					is_character_slot = high_command 
					OR = {
						has_trait = army_entrenchment_1
						has_trait = army_entrenchment_2
						has_trait = army_entrenchment_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
					#TODO_SOL uuugh i fucking hate characters by now, add in limit check
                }
            }
				
			generate_character = {
				token_base = generic_high_command
			}
			add_to_array = { generic_characters = token:generic_high_command }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 4 } } }
			}
	
			generate_character = {
				token_base = generic_high_command
			}
			add_to_array = { generic_characters = token:generic_high_command }
			add_to_temp_variable = { advisor_num = 1 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = BUR
				tag = CAN
				tag = COS
				tag = ETH
				tag = JOR
				tag = LEB
				tag = MAL
				tag = MOR
				tag = PAR
				tag = SCC
				tag = SKC
				tag = TUN
				tag = ZXL
			}
			NOT = {
				any_character = {
					is_character_slot = high_command 
					OR = {
						has_trait = army_artillery_1
						has_trait = army_artillery_2
						has_trait = army_artillery_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_high_command_1
			}
			add_to_array = { generic_characters = token:generic_high_command_1 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 4 } } }
			}

			generate_character = {
				token_base = generic_high_command_1 
			}
			add_to_array = { generic_characters = token:generic_high_command_1 }
			add_to_temp_variable = { advisor_num = 1 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = BOL
				tag = BUR
				tag = CZE
				tag = EGY
				tag = EHA
				tag = GUA
				tag = MAL
				tag = JOR
				tag = MAR
				tag = MON
				tag = PGR
				tag = SDC
				tag = TAN
				tag = INS
			}
			NOT = {
				any_character = {
					is_character_slot = high_command 
					OR = {
						has_trait = army_infantry_1
						has_trait = army_infantry_2
						has_trait = army_infantry_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = PGR
					tag = SDC
                }
            }
				
			generate_character = {
				token_base = generic_high_command_2
			}
			add_to_array = { generic_characters = token:generic_high_command_2 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 4 } } }
			}

			generate_character = {
				token_base = generic_high_command_2 
			}
			add_to_array = { generic_characters = token:generic_high_command_2 }
			add_to_temp_variable = { advisor_num = 1 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = BOL
				tag = BUR
				tag = COL
				tag = EHA
				tag = ETH
				tag = FRI
				tag = GUA
				tag = JOR
				tag = LUX
				tag = MON
				tag = PGR
				tag = SDC
				tag = SKC
				tag = TUN
				tag = ZXL
				tag = INS
			}
			NOT = {
				any_character = {
					is_character_slot = high_command 
					OR = {
						has_trait = army_command_1
						has_trait = army_command_2
						has_trait = army_command_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_high_command_3
			}
			add_to_array = { generic_characters = token:generic_high_command_3 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 4 } } }
			}

			generate_character = {
				token_base = generic_high_command_3 
			}
			add_to_array = { generic_characters = token:generic_high_command_3 }
			add_to_temp_variable = { advisor_num = 1 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ARG
				tag = BMP
				tag = BUL
				tag = CUB
				tag = DOM
				tag = EST
				tag = FIN
				tag = HAI
				tag = IRE
				tag = LIT
				tag = NIC
				tag = PHI
				tag = SAF
				tag = VEN
				tag = COS
				tag = EHA
				tag = ETH
				tag = JOR
				tag = LEB
				tag = MAL
				tag = MAR
				tag = NEP
				tag = PGR
				tag = SDC
				tag = SKC
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = high_command 
					OR = {
						has_trait = air_bomber_interception_1
						has_trait = air_bomber_interception_2
						has_trait = air_bomber_interception_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = PGR
					tag = PHI
					tag = SDC
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_high_command_4
			}
			add_to_array = { generic_characters = token:generic_high_command_4 }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 4 } } }
			}
	
			generate_character = {
				token_base = generic_high_command_4 
			}
			add_to_array = { generic_characters = token:generic_high_command_4 }
			add_to_temp_variable = { advisor_num = 1 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = COS
				tag = ETH
				tag = SDC
				tag = SIK
				tag = DEN
				tag = HOL
				tag = LAT
				tag = MAN
				tag = NOR
				tag = POL
				tag = SWI
				tag = XIA
				tag = COS
				tag = ECR
				tag = EGY
				tag = FRI
				tag = MON
				tag = MOR
				tag = PGR
				tag = SDC
				tag = SYR
				tag = INS
			}
			NOT = {
				any_character = {
					is_character_slot = high_command 
					OR = {
						has_trait = air_air_combat_training_1
						has_trait = air_air_combat_training_2
						has_trait = air_air_combat_training_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = MAN
					tag = SCC
					tag = SWI
                }
            }
				
			generate_character = {
				token_base = generic_high_command_9
			}
			add_to_array = { generic_characters = token:generic_high_command_9 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 4 } } }
			}
				
			generate_character = {
				token_base = generic_high_command_9 
			}
			add_to_array = { generic_characters = token:generic_high_command_9 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AUS
				tag = BMP
				tag = CAN
				tag = COL
				tag = CRO
				tag = GRE
				tag = GXC
				tag = HON
				tag = LIB
				tag = MEN
				tag = NZL
				tag = POR
				tag = TUR
				tag = CZE
				tag = EHA
				tag = LUX
				tag = SCC
				tag = SKC
				tag = TAN
				tag = TUN
			}
			NOT = {
				any_character = {
					is_character_slot = high_command 
					OR = {
						has_trait = air_air_superiority_1
						has_trait = air_air_superiority_2
						has_trait = air_air_superiority_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
			
			generate_character = {
				token_base = generic_high_command_5
			}
			add_to_array = { generic_characters = token:generic_high_command_5 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 4 } } }
			}
				
			generate_character = {
				token_base = generic_high_command_5 
			}
			add_to_array = { generic_characters = token:generic_high_command_5 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ARG
				tag = BUL
				tag = CAN
				tag = OMA
				tag = DEN
				tag = ECU
				tag = EST
				tag = GRE
				tag = INS
				tag = LIT
				tag = MAN
				tag = NIC
				tag = PAN
				tag = POR
				tag = SYR
				tag = VEN
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = high_command 
					OR = {
						has_trait = navy_anti_submarine_1
						has_trait = navy_anti_submarine_2
						has_trait = navy_anti_submarine_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_high_command_6
			}
			add_to_array = { generic_characters = token:generic_high_command_6 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 4 } } }
			}
				
			generate_character = {
				token_base = generic_high_command_6
			}
			add_to_array = { generic_characters = token:generic_high_command_6 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = BEL
				tag = BRA
				tag = CHL
				tag = CUB
				tag = EGY
				tag = FIN
				tag = HAI
				tag = IRE
				tag = MAL
				tag = MAR
				tag = NOR
				tag = PHI
				tag = RAJ
				tag = TUN
				tag = YUG
				tag = ETH
			}
			NOT = {
				any_character = {
					is_character_slot = high_command 
					OR = {
						has_trait = navy_fleet_logistics_1
						has_trait = navy_fleet_logistics_2
						has_trait = navy_fleet_logistics_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_high_command_7
			}
			add_to_array = { generic_characters = token:generic_high_command_7 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 4 } } }
			}
				
			generate_character = {
				token_base = generic_high_command_7
			}
			add_to_array = { generic_characters = token:generic_high_command_7 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = BEL
				tag = BMP
				tag = CAN
				tag = COS
				tag = DOM
				tag = ELS
				tag = FRI
				tag = HON
				tag = LAT
				tag = MAL
				tag = MOR
				tag = NZL
				tag = POL
				tag = SAF
				tag = TUR
				tag = LEB
				tag = INS
			}
			NOT = {
				any_character = {
					is_character_slot = high_command 
					OR = {
						has_trait = navy_screen_1
						has_trait = navy_screen_2
						has_trait = navy_screen_3
					}
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = NZL
                }
            }
				
			generate_character = {
				token_base = generic_high_command_8
			}
			add_to_array = { generic_characters = token:generic_high_command_8 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 4 } } }
			}
				
			generate_character = {
				token_base = generic_high_command_8 
			}
			add_to_array = { generic_characters = token:generic_high_command_8 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}

	set_temp_variable = { advisor_num = 0 }
	every_character = {
		limit = {
			is_character_slot = theorist
		}
		add_to_temp_variable = { advisor_num = 1 }
	}
	
	######## ##     ## ########  #######  ########  ####  ######  ########  ######  
	   ##    ##     ## ##       ##     ## ##     ##  ##  ##    ##    ##    ##    ## 
	   ##    ##     ## ##       ##     ## ##     ##  ##  ##          ##    ##       
	   ##    ######### ######   ##     ## ########   ##   ######     ##     ######  
	   ##    ##     ## ##       ##     ## ##   ##    ##        ##    ##          ## 
	   ##    ##     ## ##       ##     ## ##    ##   ##  ##    ##    ##    ##    ## 
	   ##    ##     ## ########  #######  ##     ## ####  ######     ##     ######  

	if = {
		limit = {
			OR = {
				tag = BHU
				tag = BUR
				tag = COS
				tag = EGY
				tag = ETH
				tag = JOR
				tag = LEB
				tag = MAL
				tag = SYR
				tag = INS
				tag = MAR
				tag = MOR
				tag = SKC
				tag = TUN
				tag = AST
			}
			NOT = {
				any_character = {
					is_character_slot = theorist 
					has_trait = military_theorist
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = SIK
                }
            }
				
			generate_character = {
				token_base = generic_theorist_1
			}
			add_to_array = { generic_characters = token:generic_theorist_1 }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 3 } } }
			}
				
			generate_character = {
				token_base = generic_theorist_1 
			}
			add_to_array = { generic_characters = token:generic_theorist_1 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = ALB
				tag = ARG
				tag = AST
				tag = AUS
				tag = BHU
				tag = BMP
				tag = BOL
				tag = BRA
				tag = BUL
				tag = BUR
				tag = CAN
				tag = CHL
				tag = COL
				tag = COS
				tag = CRO
				tag = CUB
				tag = CZE
				tag = DEN
				tag = DOM
				tag = ECU
				tag = EGY
				tag = EHA
				tag = ELS
				tag = EST
				tag = ETH
				tag = FIN
				tag = FRI
				tag = GRE
				tag = GUA
				tag = HAI
				tag = HOL
				tag = HON
				tag = INS
				tag = IRE
				tag = IRQ
				tag = JOR
				tag = LAT
				tag = LEB
				tag = LIB
				tag = LIT
				tag = LUX
				tag = MAL
				tag = MAR
				tag = MEN
				tag = MEX
				tag = MON
				tag = MOR
				tag = NEP
				tag = NIC
				tag = NOR
				tag = NZL
				tag = PAN
				tag = PAR
				tag = PER
				tag = PGR
				tag = PHI
				tag = POL
				tag = POR
				tag = PRU
				tag = ROM
				tag = SAF
				tag = SAU
				tag = SWE
				tag = SIK
				tag = TUR
				tag = YUG
				tag = URG
				tag = VEN
				tag = SWI
				tag = SYR
				tag = XIA
				tag = YUG
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = theorist 
					has_trait = air_warfare_theorist
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = PGR
					tag = SIK
					tag = TUR
					tag = RGR
                }
            }
			
			generate_character = {
				token_base = generic_theorist_2
			}
			add_to_array = { generic_characters = token:generic_theorist_2 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 3 } } }
			}
			generate_character = {
				token_base = generic_theorist_2 
			}
			add_to_array = { generic_characters = token:generic_theorist_2 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ARG
				tag = AST
				tag = BMP
				tag = BOL
				tag = BRA
				tag = BUL
				tag = CAN
				tag = CHL
				tag = COL
				tag = COS
				tag = CUB
				tag = DEN
				tag = DOM
				tag = ECU
				tag = EGY
				tag = ELS
				tag = EST
				tag = FIN
				tag = FRI
				tag = GRE
				tag = GUA
				tag = HAI
				tag = HON
				tag = INS
				tag = IRE
				tag = LAT
				tag = LEB
				tag = LIB
				tag = LIT
				tag = MAL
				tag = MAR
				tag = MEX
				tag = MOR
				tag = NIC
				tag = NOR
				tag = NZL
				tag = OMA
				tag = PAN
				tag = PER
				tag = PHI
				tag = POL
				tag = POR
				tag = PRU
				tag = RAJ
				tag = SAF
				tag = SAU
				tag = TUR
				tag = YUG
				tag = URG
				tag = VEN
				tag = RGR
			}
			NOT = {
				any_character = {
					is_character_slot = theorist 
					has_trait = naval_theorist
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
					tag = RGR
                }
            }
				
			generate_character = {
				token_base = generic_theorist_3
			}
			add_to_array = { generic_characters = token:generic_theorist_3 }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 3 } } }
			}
				
			generate_character = {
				token_base = generic_theorist_3 
			}
			add_to_array = { generic_characters = token:generic_theorist_3 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = ALB
				tag = EST
				tag = INS
				tag = NZL
				tag = PAR
				tag = SIA
				tag = TUN
				tag = URG
				tag = TUR
				tag = YUG
			}
			NOT = {
				any_character = {
					is_character_slot = theorist 
					has_trait = naval_aviation_pioneer
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_theorist_4
			}
			add_to_array = { generic_characters = token:generic_theorist_4 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 3 } } }
			}
				
			generate_character = {
				token_base = generic_theorist_4 
			}
			add_to_array = { generic_characters = token:generic_theorist_4 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AST
				tag = COL
				tag = DEN
				tag = MAL
				tag = PER
				tag = SAF
				tag = SYR
				tag = VEN
				tag = YEM
			}
			NOT = {
				any_character = {
					is_character_slot = theorist 
					has_trait = submarine_specialist
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = AST
                }
            }
				
			generate_character = {
				token_base = generic_theorist_5
			}
			add_to_array = { generic_characters = token:generic_theorist_5 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 3 } } }
			}
				
			generate_character = {
				token_base = generic_theorist_5 
			}
			add_to_array = { generic_characters = token:generic_theorist_5 }
			add_to_temp_variable = { advisor_num = 1 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = AUS
				tag = BHU
				tag = BMP
				tag = BUR
				tag = COS
				tag = EST
				tag = LIT
				tag = MON
				tag = SCC
				tag = SHX
				tag = SKC
				tag = SYR
				tag = TAN
				tag = TUR
				tag = XIA
				tag = YUN
			}
			NOT = {
				any_character = {
					is_character_slot = theorist 
					has_trait = command_expert
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_theorist_6
			}
			add_to_array = { generic_characters = token:generic_theorist_6 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 3 } } }
			}
				
			generate_character = {
				token_base = generic_theorist_6 
			}
			add_to_array = { generic_characters = token:generic_theorist_6 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = AFG
				tag = AUS
				tag = BHU
				tag = BMP
				tag = BUR
				tag = CRO
				tag = CZE
				tag = LAT
				tag = NEP
				tag = PAR
				tag = SDC
				tag = SAF
				tag = SHX
				tag = SKC
				tag = SWI
				tag = TAN
				tag = TUN
				tag = XSM
				tag = YUG
				tag = YUT
				tag = AST
			}
			NOT = {
				any_character = {
					is_character_slot = theorist 
					has_trait = brigade_doctrine_expert
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_theorist_7
			}
			add_to_array = { generic_characters = token:generic_theorist_7 }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 3 } } }
			}				
			generate_character = {
				token_base = generic_theorist_7 
			}
			add_to_array = { generic_characters = token:generic_theorist_7 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = BHU
				tag = BUR
				tag = COS
				tag = EGY
				tag = ETH
				tag = JOR
				tag = LEB
				tag = MAL
				tag = SYR
				tag = INS
				tag = MAR
				tag = MOR
				tag = TUN
				tag = AFG
				tag = ALB
				tag = ARG
				tag = AUS
				tag = BHU
				tag = BMP
				tag = BOL
				tag = BUL
				tag = BUR
				tag = CHL
				tag = COL
				tag = COS		
				tag = CRO
				tag = CUB
				tag = CZE
				tag = DEN
				tag = DOM
				tag = ECU
				tag = EGY
				tag = EHA
				tag = ELS
				tag = EST
				tag = ETH
				tag = FIN
				tag = FRI
				tag = GRE
				tag = GUA
				tag = GXC
				tag = HAI
				tag = HOL
				tag = HON
				tag = HUN
				tag = INS
				tag = IRE
				tag = IRQ
				tag = JOR
				tag = LAT
				tag = LEB
				tag = LIB
				tag = LIT
				tag = LUX
				tag = MAL
				tag = MAN
				tag = MAR
				tag = MEN
				tag = MEX
				tag = MON
				tag = MOR
				tag = NEP
				tag = NIC
				tag = NOR
				tag = OMA
				tag = PAN
				tag = PAR
				tag = PGR
				tag = PHI
				tag = POL
				tag = POR
				tag = PRC
				tag = PRU
				tag = RAJ
				tag = ROM
				tag = SAU
				tag = SCC
				tag = SDC
				tag = SHX
				
			}
			NOT = {
				any_character = {
					is_character_slot = theorist 
					has_trait = ww1_theorist
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = AUS
					tag = CZE
					tag = BUL
					tag = DEN
					tag = FIN
					tag = GRE
					tag = HOL
					tag = IRE #eeh, it doesnt need it but better than naval
					tag = IRQ
					tag = MAN
					tag = MEX
					tag = MON
					tag = NOR
					tag = PHI
					tag = POL
					tag = POR
					tag = PGR
					tag = PRC
					tag = SCC
					tag = SDC
					tag = SHX
                }
            }
				
			generate_character = {
				token_base = generic_theorist_8
			}
			add_to_array = { generic_characters = token:generic_theorist_8 }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 3 } } }
			}
	
			generate_character = {
				token_base = generic_theorist_8 
			}
			add_to_array = { generic_characters = token:generic_theorist_8 }
			add_to_temp_variable = { advisor_num = 1 }
		}
			
	}
	if = {
		limit = {
			OR = {
				tag = EHA
				tag = PGR
				tag = SDC
				tag = SKC
				tag = POL
				tag = CZE
				tag = EST
				tag = GRE
				tag = IRQ
				tag = MON
				tag = SCC
				tag = SWI
				tag = TUR
				tag = XIA
				tag = XSM
				tag = ZXL
			}
			NOT = {
				any_character = {
					is_character_slot = theorist 
					has_trait = defence_theorist
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = SWI
					tag = TUR
                }
            }
				
			generate_character = {
				token_base = generic_theorist_10
			}
			add_to_array = { generic_characters = token:generic_theorist_10 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 3 } } }
			}
				
			generate_character = {
				token_base = generic_theorist_10 
			}
			add_to_array = { generic_characters = token:generic_theorist_10 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}
	if = {
		limit = {
			OR = {
				tag = EHA
				tag = PGR
				tag = SDC
				tag = FIN
				tag = GUA
				tag = IRQ
				tag = JOR
				tag = LUX
				tag = SAF
				tag = SIA
				tag = SWI
				tag = TAN
				tag = TUN
				tag = URG
				tag = YEM
			}
			NOT = {
				any_character = {
					is_character_slot = theorist 
					has_trait = attack_theorist
				}
			}
		}
		
		if = { limit = { is_ai = yes
                OR = {
                    #always = yes
                    tag = CIV
                }
            }
				
			generate_character = {
				token_base = generic_theorist_11
			}
			add_to_array = { generic_characters = token:generic_theorist_11 }

		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes check_variable = { advisor_num < 3 } } }
			}
				
			generate_character = {
				token_base = generic_theorist_11 
			}
			add_to_array = { generic_characters = token:generic_theorist_11 }
			add_to_temp_variable = { advisor_num = 1 }

		}
			
	}
	
	for_each_loop = {
		array = generic_characters
		
		meta_effect = {
			text = {
				[X] = { set_variable = { key = token:[X] } }
			}
			X = "[?v.GetTokenKey]"
		}
	}
	clear_array = generic_characters
				
}

generate_generic_arab_advisors = {
	
	#------------------------------------------------------------------------------------
	#------------------------------------------------------------------------------------
	### ARAB GENERIC ADVISORS
	
	if = {
		limit = {
			OR = {
				tag = SAU
				tag = YEM
				tag = OMA
				tag = LEB
				tag = SYR		 
				tag = PAL
				tag = MAR
				tag = MOR
				tag = TUN
				tag = EGY #countries up to this point get all advisors
				
				tag = ETH #these ones only get some advisors
				tag = JOR
				tag = IRQ
			}
		}
			
		# Characters shared by the Arab countries
		
		if = {
			limit = {
				NOT = { 
					tag = ETH 
					tag = JOR 
					tag = IRQ
				}
			}
			
			generate_character = {
				token_base = arab_foreign_advice
			}
				
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = Arab_spy1
				}
				add_to_array = { generic_characters = token:Arab_spy1 }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = intel_minister } } } }
				}
					
				generate_character = {
					token_base = Arab_spy1 
				}
				add_to_array = { generic_characters = token:Arab_spy1 }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = Arab_spy2
				}
				add_to_array = { generic_characters = token:Arab_spy2 }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = intel_minister } } } }
				}
					
				generate_character = {
					token_base = Arab_spy2 
				}
				add_to_array = { generic_characters = token:Arab_spy2 }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = Arab_interior
				}
				add_to_array = { generic_characters = token:Arab_interior }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = interior_minister } } } }
				}
					
				generate_character = {
					token_base = Arab_interior 
				}
				add_to_array = { generic_characters = token:Arab_interior }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = Arab_hearts
				}
				add_to_array = { generic_characters = token:Arab_hearts }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = interior_minister } } } }
				}
					
				generate_character = {
					token_base = Arab_hearts 
				}
				add_to_array = { generic_characters = token:Arab_hearts }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = arab_warmonger
				}
				add_to_array = { generic_characters = token:arab_warmonger }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = political_advisor } } } }
				}
					
				generate_character = {
					token_base = arab_warmonger 
				}
				add_to_array = { generic_characters = token:arab_warmonger }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = arab_theorist
				}
				add_to_array = { generic_characters = token:arab_theorist }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = theorist } } } }
				}
					
				generate_character = {
					token_base = arab_theorist 
				}
				add_to_array = { generic_characters = token:arab_theorist }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = arab_farm_minister
				}
				add_to_array = { generic_characters = token:arab_farm_minister }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
				}
					
				generate_character = {
					token_base = arab_farm_minister 
				}
				add_to_array = { generic_characters = token:arab_farm_minister }

			}
				
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = arab_schools_minister
				}
				add_to_array = { generic_characters = token:arab_schools_minister }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
				}
					
				generate_character = {
					token_base = arab_schools_minister 
				}
				add_to_array = { generic_characters = token:arab_schools_minister }

			}
				
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = arab_industry_minister
				}
				add_to_array = { generic_characters = token:arab_industry_minister }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
				}
					
				generate_character = {
					token_base = arab_industry_minister 
				}
				add_to_array = { generic_characters = token:arab_industry_minister }

			}
				
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = arab_trade_minister
				}
				add_to_array = { generic_characters = token:arab_trade_minister }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
				}
					
				generate_character = {
					token_base = arab_trade_minister 
				}
				add_to_array = { generic_characters = token:arab_trade_minister }

			}
		}
		if = {
			limit = {
				NOT = { 
					tag = IRQ
				}
			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = Arab_decrpt
				}
				add_to_array = { generic_characters = token:Arab_decrpt }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = intel_minister } } } }
				}
					
				generate_character = {
					token_base = Arab_decrpt 
				}
				add_to_array = { generic_characters = token:Arab_decrpt }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						tag = CIV #TODO
						#always = yes
					}
				}
					
				generate_character = {
					token_base = Arab_encrpt
				}
				add_to_array = { generic_characters = token:Arab_decrpt }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = intel_minister } } } }
				}
					
				generate_character = {
					token_base = Arab_encrpt 
				}
				add_to_array = { generic_characters = token:Arab_decrpt }

			}
		}
		if = {
			limit = {
				NOT = { 
					tag = ETH 
				}
			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = Arab_tough_negotiator
				}
				add_to_array = { generic_characters = token:Arab_tough_negotiator }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = foreign_minister } } } }
				}
					
				generate_character = {
					token_base = Arab_tough_negotiator 
				}
				add_to_array = { generic_characters = token:Arab_tough_negotiator }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = EGY
					}
				}
					
				generate_character = {
					token_base = Arab_nice_guy
				}
				add_to_array = { generic_characters = token:Arab_nice_guy }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = foreign_minister } } } }
				}
					
				generate_character = {
					token_base = Arab_nice_guy 
				}
				add_to_array = { generic_characters = token:Arab_nice_guy }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = arab_high_command
				}
				add_to_array = { generic_characters = token:arab_high_command }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = high_command } } } }
				}
					
				generate_character = {
					token_base = arab_high_command 
				}
				add_to_array = { generic_characters = token:arab_high_command }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = arab_high_command_1
				}
				add_to_array = { generic_characters = token:arab_high_command_1 }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = high_command } } } }
				}
					
				generate_character = {
					token_base = arab_high_command_1 
				}
				add_to_array = { generic_characters = token:arab_high_command_1 }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = IRQ
					}
				}
					
				generate_character = {
					token_base = arab_guy1
				}
				add_to_array = { generic_characters = token:arab_guy1 }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = influence_minister } } } }
				}
					
				generate_character = {
					token_base = arab_guy1 
				}
				add_to_array = { generic_characters = token:arab_guy1 }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = arab_guy2
				}
				add_to_array = { generic_characters = token:arab_guy2 }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = influence_minister } } } }
				}
					
				generate_character = {
					token_base = arab_guy2 
				}
				add_to_array = { generic_characters = token:arab_guy2 }

			}
			
			if = { limit = { is_ai = yes
					OR = {
						#always = yes
						tag = CIV
					}
				}
					
				generate_character = {
					token_base = arab_guy3
				}
				add_to_array = { generic_characters = token:arab_guy3 }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = influence_minister } } } }
				}
					
				generate_character = {
					token_base = arab_guy3 
				}
				add_to_array = { generic_characters = token:arab_guy3 }

			}
		}
	}
	
}

generate_generic_china_advisors = {
	#------------------------------------------------------------------------------------
	#------------------------------------------------------------------------------------
	### CHINA GENERIC ADVISORS
	
	if = {
		limit = {
			is_chinese_nations/TAG = yes
		}
			
		if = { limit = { is_ai = yes
				OR = {
					tag = CHI
					tag = GXC
					tag = PGR
					tag = SCC
					tag = SDC
					tag = SHX
					tag = SIK
					tag = XIA
					tag = XSM
				}
			}
				
			generate_character = { #black_marketeer
				token_base = CHI_zhang_xiaolin
			}
			add_to_array = { generic_characters = token:CHI_zhang_xiaolin }
			
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = intel_minister } } } }
			}
			generate_character = { #black_marketeer
				token_base = CHI_zhang_xiaolin
			}
			add_to_array = { generic_characters = token:CHI_zhang_xiaolin }
		}
					
			
		if = { limit = { is_ai = yes 
				NOT = { tag = SIK }
				OR = {
					tag = GXC
					tag = PGR
					tag = XIA
					tag = XSM
				}
			}
				
			generate_character = { #economic_minister, devout
				token_base = CHI_fang_juehui
			}
			add_to_array = { generic_characters = token:CHI_fang_juehui }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = economic_minister } } } }
			}
			generate_character = {
				token_base = CHI_fang_juehui
			}
			add_to_array = { generic_characters = token:CHI_fang_juehui }
		}
		
		if = { limit = { is_ai = yes
				NOT = { tag = SIK }
				OR = {
					tag = CIV
				}
			}
				
			generate_character = { #economic_minister, guns_over_butter_advocate
				token_base = CHI_huang_jilu
			}
			add_to_array = { generic_characters = token:CHI_huang_jilu }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = economic_minister } } } }
			}
			generate_character = {
				token_base = CHI_huang_jilu
			}
			add_to_array = { generic_characters = token:CHI_huang_jilu }
		}
		
		if = { limit = { is_ai = yes
				NOT = { tag = SIK }
				OR = {
					tag = GXC
					tag = PGR
					tag = PRC
					tag = XIA
					tag = XSM
					tag = YUN
					tag = YUT
				}
			}
				
			generate_character = { #economic_minister, war_industrialist
				token_base = CHI_miao_peicheng
			}
			add_to_array = { generic_characters = token:CHI_miao_peicheng }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = economic_minister } } } }
			}
			generate_character = {
				token_base = CHI_miao_peicheng
			}
			add_to_array = { generic_characters = token:CHI_miao_peicheng }
		}
		
		if = { limit = { is_ai = yes
				OR = {
					tag = GXC
				}
			}

			generate_character = { #domestic_minister, domestminster_science
				token_base = CHI_wang_luyi
			}
			add_to_array = { generic_characters = token:CHI_wang_luyi }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
			}
			generate_character = {
				token_base = CHI_wang_luyi
			}
			add_to_array = { generic_characters = token:CHI_wang_luyi }
		}
		
		if = { limit = { is_ai = yes
				OR = {
					tag = GXC
					tag = PGR
					tag = PRC
					tag = XIA
				}
			}

			generate_character = { #domestic_minister, trade_minister
				token_base = CHI_zhou_qigang
			}
			add_to_array = { generic_characters = token:CHI_zhou_qigang }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
			}
			generate_character = {
				token_base = CHI_zhou_qigang
			}
			add_to_array = { generic_characters = token:CHI_zhou_qigang }
		}
		
		if = { limit = { is_ai = yes
				OR = {
					tag = PGR
					tag = PRC
					tag = SDC
				}
				NOT = {
					any_character = {
						is_character_slot = high_command
						OR = {
							has_trait = army_logistics_1
							has_trait = army_logistics_2
							has_trait = army_logistics_3
						}
					}
				}
			}

			generate_character = { #high_command, army_logistics_1
				token_base = china_high_command
			}
			add_to_array = { generic_characters = token:china_high_command }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = high_command } } } }
			}
			generate_character = {
				token_base = china_high_command
			}
			add_to_array = { generic_characters = token:china_high_command }
		}
		
		if = { limit = { is_ai = yes
				OR = {
					tag = PGR
					tag = SDC
					tag = SIK
					tag = XIA
					tag = XSM
					tag = YUN
				}
				NOT = {
					any_character = {
						is_character_slot = theorist 
						has_trait = guerilla_warfare_expert
					}
				}
			}

			generate_character = { #theorist, guerilla_warfare_expert
				token_base = china_theorist
			}
			add_to_array = { generic_characters = token:china_theorist }
		}
		else_if = {
			limit = {
				OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = theorist } } } }
			}
			generate_character = {
				token_base = china_theorist
			}
			add_to_array = { generic_characters = token:china_theorist }
		}
		
		if = {
			limit = {
				NOT = { tag = CHI }
			}
				
			if = { limit = { is_ai = yes
					OR = {
						tag = PGR
						tag = PRC
					}
				}

				generate_character = { #domestic_minister, domestminster_education
					token_base = CHI_fang_zhi
				}
				add_to_array = { generic_characters = token:CHI_fang_zhi }

			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = domestic_minister } } } }
				}
				generate_character = {
					token_base = CHI_fang_zhi
				}
				add_to_array = { generic_characters = token:CHI_fang_zhi }
			}
			
			if = { limit = { is_ai = yes
					OR = {
						tag = GXC
						tag = PGR
						tag = SCC
						tag = SDC
						tag = SHX
						tag = XIA
						tag = XSM
						tag = YUN
						tag = YUT
					}
				}

				generate_character = { #supreme_commander, supreme_com_outmatched
					token_base = CHI_fang_zhi_sc
				}
				add_to_array = { generic_characters = token:CHI_fang_zhi_sc }
			}
			else_if = {
				limit = {
					OR = { is_ai = no AND = { is_ai = yes NOT = { any_character = { is_character_slot = supreme_commander } } } }
				}
				generate_character = {
					token_base = CHI_fang_zhi_sc
				}
				add_to_array = { generic_characters = token:CHI_fang_zhi_sc }
			}
			
		}
	} 
}


d_character_print_amount = {
	every_possible_country = {
		set_temp_variable = { t = 0 }
		set_temp_variable = { unit_leaders = 0 }
		set_temp_variable = { party_leaders = 0 }
		set_temp_variable = { advisors = 0 }
		every_character = {
			add_to_temp_variable = { t = 1 }
			
			if = {
				limit = { is_advisor = yes }
				
				add_to_temp_variable = { advisors = 1 }
			}
			if = {
				limit = { is_unit_leader = yes }
				
				add_to_temp_variable = { unit_leaders = 1 }
			}
			if = {
				limit = { can_be_country_leader = yes }
				
				add_to_temp_variable = { party_leaders = 1 }
			}
		}
		if = {
			limit = {
				exists = yes
			}
			log = "[This.GetTag] | [?t] CHARACTERS | [?advisors] Advisors | [?unit_leaders] Unit Leaders | [?party_leaders] Party Leaders"
		}
		else = {
			log = "IDLE [This.GetTag] | [?t] CHARACTERS | [?advisors] Advisors | [?unit_leaders] Unit Leaders | [?party_leaders] Party Leaders"
		}
	}
}

d_character_print_empty_characters = {
	every_country = {
		every_character = {
			limit = {
				is_advisor = no
				is_unit_leader = no
				can_be_country_leader = no
				is_country_leader = no #this trigger is still fucking useless
			}
			log = "[Prev.GetTag] | [This.GetName] IS EMPTY!"
		}
	}
}

d_character_validate_advisor_tokens = {
	every_country = {
		every_character = {
			limit = {
				is_advisor = yes
			}
			if = {
				limit = {
					is_character_slot = head_of_state
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_head_of_state }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = foreign_minister
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_foreign_minister }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = interior_minister
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_interior_minister }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = intel_minister
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_intel_minister }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = economic_minister
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_economic_minister }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = political_advisor
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_political_advisor }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = domestic_minister
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_domestic_minister }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = influence_minister
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_influence_minister }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = supreme_commander
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_supreme_commander }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = army_chief
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_army_chief }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = air_chief
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_air_chief }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = navy_chief
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_navy_chief }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = high_command
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_high_command }
					}
					X = "[?t.GetTokenKey]"
				}
			}
			if = {
				limit = {
					is_character_slot = theorist
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						PREV = { add_ideas = [X]_theorist }
					}
					X = "[?t.GetTokenKey]"
				}
			}
		}
		
	}
}

d_character_print_missing_advisor_key = {
	every_country = {
		every_character = {
			limit = {
				is_advisor = no
				NOT = { has_variable = key }
			}
			add_to_temp_variable = { total = 1 }
			log = "[Prev.GetTag] | [This.GetName] HAS NO 'KEY' VARIABLE"
		}
		
	}
	log = "[?total] TOTAL CHARACTERS MISSING KEY"
}

remove_advisor_roless = {
	if = {
		limit = {
			is_advisor = yes
		}
	
		if = {
			limit = {
				is_character_slot = head_of_state
			}
			remove_advisor_role = { slot = head_of_state }
		}
		if = {
			limit = {
				is_character_slot = foreign_minister
			}
			remove_advisor_role = { slot = foreign_minister }
		}
		if = {
			limit = {
				is_character_slot = interior_minister
			}
			remove_advisor_role = { slot = interior_minister }
		}
		if = {
			limit = {
				is_character_slot = intel_minister
			}
			remove_advisor_role = { slot = intel_minister }
		}
		if = {
			limit = {
				is_character_slot = economic_minister
			}
			remove_advisor_role = { slot = economic_minister }
		}
		if = {
			limit = {
				is_character_slot = political_advisor
			}
			remove_advisor_role = { slot = political_advisor }
		}
		if = {
			limit = {
				is_character_slot = domestic_minister
			}
			remove_advisor_role = { slot = domestic_minister }
		}
		if = {
			limit = {
				is_character_slot = influence_minister
			}
			remove_advisor_role = { slot = influence_minister }
		}
		if = {
			limit = {
				is_character_slot = supreme_commander
			}
			remove_advisor_role = { slot = supreme_commander }
		}
		if = {
			limit = {
				is_character_slot = army_chief
			}
			remove_advisor_role = { slot = army_chief }
		}
		if = {
			limit = {
				is_character_slot = air_chief
			}
			remove_advisor_role = { slot = air_chief }
		}
		if = {
			limit = {
				is_character_slot = navy_chief
			}
			remove_advisor_role = { slot = navy_chief }
		}
		if = {
			limit = {
				is_character_slot = high_command
			}
			remove_advisor_role = { slot = high_command }
		}
		if = {
			limit = {
				is_character_slot = theorist
				always = no
			}
			remove_advisor_role = { slot = theorist }
		}
	}
	
}

d_print_theorist_traits = {
	set_temp_variable = { start_v = token:dictator }
	set_temp_variable = { end_v = token:pro_allies }
	
	for_loop_effect = {
		start = start_v
		end = end_v
		
		add_to_temp_array = { trait = v }
	}
	
	every_country = {
		every_character = { 
			remove_advisor_roless = yes
			remove_country_leader_role = {
				character = THIS
				ideology = moderate
			}
			remove_country_leader_role = {
				character = THIS
				ideology = classical_liberalism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = social_conservatism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = nationalistic
			}
			remove_country_leader_role = {
				character = THIS
				ideology = rep_party_us
			}
			remove_country_leader_role = {
				character = THIS
				ideology = centrism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = centerright
			}
			remove_country_leader_role = {
				character = THIS
				ideology = libertarianism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = social_liberalism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = progressivism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = dem_party_us
			}
			remove_country_leader_role = {
				character = THIS
				ideology = populism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = national_liberalism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = social_democracy
			}
			remove_country_leader_role = {
				character = THIS
				ideology = syndicalism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = kemalism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = anarcho_syndicalism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = anarcho_socialism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = radicalism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = farmers_party
			}
			remove_country_leader_role = {
				character = THIS
				ideology = peasant_party
			}
			remove_country_leader_role = {
				character = THIS
				ideology = industrial_farmers
			}
			remove_country_leader_role = {
				character = THIS
				ideology = agrarian_socialism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = pacifist
			}
			remove_country_leader_role = {
				character = THIS
				ideology = early_maoism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = late_maoism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = marxism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = leninism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = trotskyism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = stalinism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = titoism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = national_communism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = anti_revisionism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = anarchist_communism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = nazism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = strasserism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = fascism_ideology
			}
			remove_country_leader_role = {
				character = THIS
				ideology = legionnairism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = falangism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = french_fascism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = rexism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = taisei_yokusankai
			}
			remove_country_leader_role = {
				character = THIS
				ideology = legionnairism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = british_fascism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = hungarism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = gen_nazism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = provisional_government
			}
			remove_country_leader_role = {
				character = THIS
				ideology = military_dictatorship
			}
			remove_country_leader_role = {
				character = THIS
				ideology = pseudo_fascism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = vichy
			}
			remove_country_leader_role = {
				character = THIS
				ideology = pan_arabism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = despotism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = oligarchism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = moderatism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = the_peoples_tutelage
			}
			remove_country_leader_role = {
				character = THIS
				ideology = corporatism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = lon_mandate
			}
			remove_country_leader_role = {
				character = THIS
				ideology = reactionism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = absolutism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = emiratism
			}
			remove_country_leader_role = {
				character = THIS
				ideology = imperial
			}
			remove_country_leader_role = {
				character = THIS
				ideology = popular
			}
			remove_country_leader_role = {
				character = THIS
				ideology = theocracie
			}
		}
		
		every_character = {
			limit = {
				is_character_slot = theorist
			}
			
			for_each_loop = {
				array = trait
				
				if = {
					limit = {
						meta_trigger = {
							text = {
								has_trait = [X]
							}
							X = "[?v.GetTokenKey]"
						}
					}
					
					if = {
						limit = {
							NOT = { is_in_array = { advisor_traits = v } }
						}
						add_to_temp_array = { advisor_traits = v }
						add_to_temp_array = { advisor_traits@var:v = THIS }
						add_to_temp_variable = { advisor_num@var:v = 1 }
					}
					else = {
						add_to_temp_variable = { advisor_num@var:v = 1 }
						add_to_temp_array = { advisor_traits@var:v = THIS }
					
					}
				}
			}
		}
		
	}
		for_each_loop = {
			array = advisor_traits
			
			log = "[?v.GetTokenKey] | [?advisor_num@var:v]"
			for_each_loop = {
				array = advisor_traits@var:v
				value = x
				
				var:x = {
					log = "    -[?key.GetTokenKey]"
				}
			}
		}
}

d_replace_ideology_traits_with_variables = {
	every_possible_country = {
		limit = { is_dynamic_country = no }
		every_character = {
			limit = { is_advisor = yes }
			if = {
				limit = {
					has_trait = fascist
				}
				set_character_flag = fascism #need to use flags cuz variables dont work in tooltips for characters, omegalul
				set_character_flag = ideology
				
				if = {
					limit = {
						is_character_slot = head_of_state
					}
					remove_trait = {
						trait = fascist
						slot = head_of_state
					}
				}
				if = {
					limit = {
						is_character_slot = foreign_minister
					}
					remove_trait = {
						trait = fascist
						slot = foreign_minister
					}
				}
				if = {
					limit = {
						is_character_slot = intel_minister
					}
					remove_trait = {
						trait = fascist
						slot = intel_minister
					}
				}
				if = {
					limit = {
						is_character_slot = interior_minister
					}
					remove_trait = {
						trait = fascist
						slot = interior_minister
					}
				}
				if = {
					limit = {
						is_character_slot = economic_minister
					}
					remove_trait = {
						trait = fascist
						slot = economic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = domestic_minister
					}
					remove_trait = {
						trait = fascist
						slot = domestic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = political_advisor
					}
					remove_trait = {
						trait = fascist
						slot = political_advisor
					}
				}
				if = {
					limit = {
						is_character_slot = influence_minister
					}
					remove_trait = {
						trait = fascist
						slot = influence_minister
					}
				}
				if = {
					limit = {
						is_character_slot = supreme_commander
					}
					remove_trait = {
						trait = fascist
						slot = supreme_commander
					}
				}
				if = {
					limit = {
						is_character_slot = army_chief
					}
					remove_trait = {
						trait = fascist
						slot = army_chief
					}
				}
				if = {
					limit = {
						is_character_slot = air_chief
					}
					remove_trait = {
						trait = fascist
						slot = air_chief
					}
				}
				if = {
					limit = {
						is_character_slot = navy_chief
					}
					remove_trait = {
						trait = fascist
						slot = navy_chief
					}
				}
				if = {
					limit = {
						is_character_slot = high_command
					}
					remove_trait = {
						trait = fascist
						slot = high_command
					}
				}
				if = {
					limit = {
						is_character_slot = theorist
					}
					remove_trait = {
						trait = fascist
						slot = theorist
					}
				}
			}
			if = {
				limit = {
					has_trait = conservative
				}
				set_character_flag = conservatism
				set_character_flag = ideology
				
				if = {
					limit = {
						is_character_slot = head_of_state
					}
					remove_trait = {
						trait = conservative
						slot = head_of_state
					}
				}
				if = {
					limit = {
						is_character_slot = foreign_minister
					}
					remove_trait = {
						trait = conservative
						slot = foreign_minister
					}
				}
				if = {
					limit = {
						is_character_slot = intel_minister
					}
					remove_trait = {
						trait = conservative
						slot = intel_minister
					}
				}
				if = {
					limit = {
						is_character_slot = interior_minister
					}
					remove_trait = {
						trait = conservative
						slot = interior_minister
					}
				}
				if = {
					limit = {
						is_character_slot = economic_minister
					}
					remove_trait = {
						trait = conservative
						slot = economic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = domestic_minister
					}
					remove_trait = {
						trait = conservative
						slot = domestic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = political_advisor
					}
					remove_trait = {
						trait = conservative
						slot = political_advisor
					}
				}
				if = {
					limit = {
						is_character_slot = influence_minister
					}
					remove_trait = {
						trait = conservative
						slot = influence_minister
					}
				}
				if = {
					limit = {
						is_character_slot = supreme_commander
					}
					remove_trait = {
						trait = conservative
						slot = supreme_commander
					}
				}
				if = {
					limit = {
						is_character_slot = army_chief
					}
					remove_trait = {
						trait = conservative
						slot = army_chief
					}
				}
				if = {
					limit = {
						is_character_slot = air_chief
					}
					remove_trait = {
						trait = conservative
						slot = air_chief
					}
				}
				if = {
					limit = {
						is_character_slot = navy_chief
					}
					remove_trait = {
						trait = conservative
						slot = navy_chief
					}
				}
				if = {
					limit = {
						is_character_slot = high_command
					}
					remove_trait = {
						trait = conservative
						slot = high_command
					}
				}
				if = {
					limit = {
						is_character_slot = theorist
					}
					remove_trait = {
						trait = conservative
						slot = theorist
					}
				}
			}
			if = {
				limit = {
					has_trait = liberal
				}
				set_character_flag = liberalism
				set_character_flag = ideology
				
				if = {
					limit = {
						is_character_slot = head_of_state
					}
					remove_trait = {
						trait = liberal
						slot = head_of_state
					}
				}
				if = {
					limit = {
						is_character_slot = foreign_minister
					}
					remove_trait = {
						trait = liberal
						slot = foreign_minister
					}
				}
				if = {
					limit = {
						is_character_slot = intel_minister
					}
					remove_trait = {
						trait = liberal
						slot = intel_minister
					}
				}
				if = {
					limit = {
						is_character_slot = interior_minister
					}
					remove_trait = {
						trait = liberal
						slot = interior_minister
					}
				}
				if = {
					limit = {
						is_character_slot = economic_minister
					}
					remove_trait = {
						trait = liberal
						slot = economic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = domestic_minister
					}
					remove_trait = {
						trait = liberal
						slot = domestic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = political_advisor
					}
					remove_trait = {
						trait = liberal
						slot = political_advisor
					}
				}
				if = {
					limit = {
						is_character_slot = influence_minister
					}
					remove_trait = {
						trait = liberal
						slot = influence_minister
					}
				}
				if = {
					limit = {
						is_character_slot = supreme_commander
					}
					remove_trait = {
						trait = liberal
						slot = supreme_commander
					}
				}
				if = {
					limit = {
						is_character_slot = army_chief
					}
					remove_trait = {
						trait = liberal
						slot = army_chief
					}
				}
				if = {
					limit = {
						is_character_slot = air_chief
					}
					remove_trait = {
						trait = liberal
						slot = air_chief
					}
				}
				if = {
					limit = {
						is_character_slot = navy_chief
					}
					remove_trait = {
						trait = liberal
						slot = navy_chief
					}
				}
				if = {
					limit = {
						is_character_slot = high_command
					}
					remove_trait = {
						trait = liberal
						slot = high_command
					}
				}
				if = {
					limit = {
						is_character_slot = theorist
					}
					remove_trait = {
						trait = liberal
						slot = theorist
					}
				}
			}
			if = {
				limit = {
					has_trait = socialist
				}
				set_character_flag = socialism
				set_character_flag = ideology
				
				if = {
					limit = {
						is_character_slot = head_of_state
					}
					remove_trait = {
						trait = socialist
						slot = head_of_state
					}
				}
				if = {
					limit = {
						is_character_slot = foreign_minister
					}
					remove_trait = {
						trait = socialist
						slot = foreign_minister
					}
				}
				if = {
					limit = {
						is_character_slot = intel_minister
					}
					remove_trait = {
						trait = socialist
						slot = intel_minister
					}
				}
				if = {
					limit = {
						is_character_slot = interior_minister
					}
					remove_trait = {
						trait = socialist
						slot = interior_minister
					}
				}
				if = {
					limit = {
						is_character_slot = economic_minister
					}
					remove_trait = {
						trait = socialist
						slot = economic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = domestic_minister
					}
					remove_trait = {
						trait = socialist
						slot = domestic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = political_advisor
					}
					remove_trait = {
						trait = socialist
						slot = political_advisor
					}
				}
				if = {
					limit = {
						is_character_slot = influence_minister
					}
					remove_trait = {
						trait = socialist
						slot = influence_minister
					}
				}
				if = {
					limit = {
						is_character_slot = supreme_commander
					}
					remove_trait = {
						trait = socialist
						slot = supreme_commander
					}
				}
				if = {
					limit = {
						is_character_slot = army_chief
					}
					remove_trait = {
						trait = socialist
						slot = army_chief
					}
				}
				if = {
					limit = {
						is_character_slot = air_chief
					}
					remove_trait = {
						trait = socialist
						slot = air_chief
					}
				}
				if = {
					limit = {
						is_character_slot = navy_chief
					}
					remove_trait = {
						trait = socialist
						slot = navy_chief
					}
				}
				if = {
					limit = {
						is_character_slot = high_command
					}
					remove_trait = {
						trait = socialist
						slot = high_command
					}
				}
				if = {
					limit = {
						is_character_slot = theorist
					}
					remove_trait = {
						trait = socialist
						slot = theorist
					}
				}
			}
			if = {
				limit = {
					has_trait = agrarian
				}
				set_character_flag = agrarianism
				set_character_flag = ideology
				
				if = {
					limit = {
						is_character_slot = head_of_state
					}
					remove_trait = {
						trait = agrarian
						slot = head_of_state
					}
				}
				if = {
					limit = {
						is_character_slot = foreign_minister
					}
					remove_trait = {
						trait = agrarian
						slot = foreign_minister
					}
				}
				if = {
					limit = {
						is_character_slot = intel_minister
					}
					remove_trait = {
						trait = agrarian
						slot = intel_minister
					}
				}
				if = {
					limit = {
						is_character_slot = interior_minister
					}
					remove_trait = {
						trait = agrarian
						slot = interior_minister
					}
				}
				if = {
					limit = {
						is_character_slot = economic_minister
					}
					remove_trait = {
						trait = agrarian
						slot = economic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = domestic_minister
					}
					remove_trait = {
						trait = agrarian
						slot = domestic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = political_advisor
					}
					remove_trait = {
						trait = agrarian
						slot = political_advisor
					}
				}
				if = {
					limit = {
						is_character_slot = influence_minister
					}
					remove_trait = {
						trait = agrarian
						slot = influence_minister
					}
				}
				if = {
					limit = {
						is_character_slot = supreme_commander
					}
					remove_trait = {
						trait = agrarian
						slot = supreme_commander
					}
				}
				if = {
					limit = {
						is_character_slot = army_chief
					}
					remove_trait = {
						trait = agrarian
						slot = army_chief
					}
				}
				if = {
					limit = {
						is_character_slot = air_chief
					}
					remove_trait = {
						trait = agrarian
						slot = air_chief
					}
				}
				if = {
					limit = {
						is_character_slot = navy_chief
					}
					remove_trait = {
						trait = agrarian
						slot = navy_chief
					}
				}
				if = {
					limit = {
						is_character_slot = high_command
					}
					remove_trait = {
						trait = agrarian
						slot = high_command
					}
				}
				if = {
					limit = {
						is_character_slot = theorist
					}
					remove_trait = {
						trait = agrarian
						slot = theorist
					}
				}
			}
			if = {
				limit = {
					has_trait = neutral
				}
				set_character_flag = neutrality
				set_character_flag = ideology
				
				if = {
					limit = {
						is_character_slot = head_of_state
					}
					remove_trait = {
						trait = neutral
						slot = head_of_state
					}
				}
				if = {
					limit = {
						is_character_slot = foreign_minister
					}
					remove_trait = {
						trait = neutral
						slot = foreign_minister
					}
				}
				if = {
					limit = {
						is_character_slot = intel_minister
					}
					remove_trait = {
						trait = neutral
						slot = intel_minister
					}
				}
				if = {
					limit = {
						is_character_slot = interior_minister
					}
					remove_trait = {
						trait = neutral
						slot = interior_minister
					}
				}
				if = {
					limit = {
						is_character_slot = economic_minister
					}
					remove_trait = {
						trait = neutral
						slot = economic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = domestic_minister
					}
					remove_trait = {
						trait = neutral
						slot = domestic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = political_advisor
					}
					remove_trait = {
						trait = neutral
						slot = political_advisor
					}
				}
				if = {
					limit = {
						is_character_slot = influence_minister
					}
					remove_trait = {
						trait = neutral
						slot = influence_minister
					}
				}
				if = {
					limit = {
						is_character_slot = supreme_commander
					}
					remove_trait = {
						trait = neutral
						slot = supreme_commander
					}
				}
				if = {
					limit = {
						is_character_slot = army_chief
					}
					remove_trait = {
						trait = neutral
						slot = army_chief
					}
				}
				if = {
					limit = {
						is_character_slot = air_chief
					}
					remove_trait = {
						trait = neutral
						slot = air_chief
					}
				}
				if = {
					limit = {
						is_character_slot = navy_chief
					}
					remove_trait = {
						trait = neutral
						slot = navy_chief
					}
				}
				if = {
					limit = {
						is_character_slot = high_command
					}
					remove_trait = {
						trait = neutral
						slot = high_command
					}
				}
				if = {
					limit = {
						is_character_slot = theorist
					}
					remove_trait = {
						trait = neutral
						slot = theorist
					}
				}
			}
			if = {
				limit = {
					has_trait = monarchist
				}
				set_character_flag = monarchism
				set_character_flag = ideology
				
				if = {
					limit = {
						is_character_slot = head_of_state
					}
					remove_trait = {
						trait = monarchist
						slot = head_of_state
					}
				}
				if = {
					limit = {
						is_character_slot = foreign_minister
					}
					remove_trait = {
						trait = monarchist
						slot = foreign_minister
					}
				}
				if = {
					limit = {
						is_character_slot = intel_minister
					}
					remove_trait = {
						trait = monarchist
						slot = intel_minister
					}
				}
				if = {
					limit = {
						is_character_slot = interior_minister
					}
					remove_trait = {
						trait = monarchist
						slot = interior_minister
					}
				}
				if = {
					limit = {
						is_character_slot = economic_minister
					}
					remove_trait = {
						trait = monarchist
						slot = economic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = domestic_minister
					}
					remove_trait = {
						trait = monarchist
						slot = domestic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = political_advisor
					}
					remove_trait = {
						trait = monarchist
						slot = political_advisor
					}
				}
				if = {
					limit = {
						is_character_slot = influence_minister
					}
					remove_trait = {
						trait = monarchist
						slot = influence_minister
					}
				}
				if = {
					limit = {
						is_character_slot = supreme_commander
					}
					remove_trait = {
						trait = monarchist
						slot = supreme_commander
					}
				}
				if = {
					limit = {
						is_character_slot = army_chief
					}
					remove_trait = {
						trait = monarchist
						slot = army_chief
					}
				}
				if = {
					limit = {
						is_character_slot = air_chief
					}
					remove_trait = {
						trait = monarchist
						slot = air_chief
					}
				}
				if = {
					limit = {
						is_character_slot = navy_chief
					}
					remove_trait = {
						trait = monarchist
						slot = navy_chief
					}
				}
				if = {
					limit = {
						is_character_slot = high_command
					}
					remove_trait = {
						trait = monarchist
						slot = high_command
					}
				}
				if = {
					limit = {
						is_character_slot = theorist
					}
					remove_trait = {
						trait = monarchist
						slot = theorist
					}
				}
			}
			if = {
				limit = {
					has_trait = communist
				}
				set_character_flag = communism
				set_character_flag = ideology
				
				if = {
					limit = {
						is_character_slot = head_of_state
					}
					remove_trait = {
						trait = communist
						slot = head_of_state
					}
				}
				if = {
					limit = {
						is_character_slot = foreign_minister
					}
					remove_trait = {
						trait = communist
						slot = foreign_minister
					}
				}
				if = {
					limit = {
						is_character_slot = intel_minister
					}
					remove_trait = {
						trait = communist
						slot = intel_minister
					}
				}
				if = {
					limit = {
						is_character_slot = interior_minister
					}
					remove_trait = {
						trait = communist
						slot = interior_minister
					}
				}
				if = {
					limit = {
						is_character_slot = economic_minister
					}
					remove_trait = {
						trait = communist
						slot = economic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = domestic_minister
					}
					remove_trait = {
						trait = communist
						slot = domestic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = political_advisor
					}
					remove_trait = {
						trait = communist
						slot = political_advisor
					}
				}
				if = {
					limit = {
						is_character_slot = influence_minister
					}
					remove_trait = {
						trait = communist
						slot = influence_minister
					}
				}
				if = {
					limit = {
						is_character_slot = supreme_commander
					}
					remove_trait = {
						trait = communist
						slot = supreme_commander
					}
				}
				if = {
					limit = {
						is_character_slot = army_chief
					}
					remove_trait = {
						trait = communist
						slot = army_chief
					}
				}
				if = {
					limit = {
						is_character_slot = air_chief
					}
					remove_trait = {
						trait = communist
						slot = air_chief
					}
				}
				if = {
					limit = {
						is_character_slot = navy_chief
					}
					remove_trait = {
						trait = communist
						slot = navy_chief
					}
				}
				if = {
					limit = {
						is_character_slot = high_command
					}
					remove_trait = {
						trait = communist
						slot = high_command
					}
				}
				if = {
					limit = {
						is_character_slot = theorist
					}
					remove_trait = {
						trait = communist
						slot = theorist
					}
				}
			}
			if = {
				limit = {
					has_trait = apolitical
				}
				set_character_flag = apolitical
				set_character_flag = ideology
				
				if = {
					limit = {
						is_character_slot = head_of_state
					}
					remove_trait = {
						trait = apolitical
						slot = head_of_state
					}
				}
				if = {
					limit = {
						is_character_slot = foreign_minister
					}
					remove_trait = {
						trait = apolitical
						slot = foreign_minister
					}
				}
				if = {
					limit = {
						is_character_slot = intel_minister
					}
					remove_trait = {
						trait = apolitical
						slot = intel_minister
					}
				}
				if = {
					limit = {
						is_character_slot = interior_minister
					}
					remove_trait = {
						trait = apolitical
						slot = interior_minister
					}
				}
				if = {
					limit = {
						is_character_slot = economic_minister
					}
					remove_trait = {
						trait = apolitical
						slot = economic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = domestic_minister
					}
					remove_trait = {
						trait = apolitical
						slot = domestic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = political_advisor
					}
					remove_trait = {
						trait = apolitical
						slot = political_advisor
					}
				}
				if = {
					limit = {
						is_character_slot = influence_minister
					}
					remove_trait = {
						trait = apolitical
						slot = influence_minister
					}
				}
				if = {
					limit = {
						is_character_slot = supreme_commander
					}
					remove_trait = {
						trait = apolitical
						slot = supreme_commander
					}
				}
				if = {
					limit = {
						is_character_slot = army_chief
					}
					remove_trait = {
						trait = apolitical
						slot = army_chief
					}
				}
				if = {
					limit = {
						is_character_slot = air_chief
					}
					remove_trait = {
						trait = apolitical
						slot = air_chief
					}
				}
				if = {
					limit = {
						is_character_slot = navy_chief
					}
					remove_trait = {
						trait = apolitical
						slot = navy_chief
					}
				}
				if = {
					limit = {
						is_character_slot = high_command
					}
					remove_trait = {
						trait = apolitical
						slot = high_command
					}
				}
				if = {
					limit = {
						is_character_slot = theorist
					}
					remove_trait = {
						trait = apolitical
						slot = theorist
					}
				}
			}
			if = {
				limit = {
					has_trait = anti_communist
				}
				set_character_flag = anti_communist
				set_character_flag = ideology
				
				if = {
					limit = {
						is_character_slot = head_of_state
					}
					remove_trait = {
						trait = anti_communist
						slot = head_of_state
					}
				}
				if = {
					limit = {
						is_character_slot = foreign_minister
					}
					remove_trait = {
						trait = anti_communist
						slot = foreign_minister
					}
				}
				if = {
					limit = {
						is_character_slot = intel_minister
					}
					remove_trait = {
						trait = anti_communist
						slot = intel_minister
					}
				}
				if = {
					limit = {
						is_character_slot = interior_minister
					}
					remove_trait = {
						trait = anti_communist
						slot = interior_minister
					}
				}
				if = {
					limit = {
						is_character_slot = economic_minister
					}
					remove_trait = {
						trait = anti_communist
						slot = economic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = domestic_minister
					}
					remove_trait = {
						trait = anti_communist
						slot = domestic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = political_advisor
					}
					remove_trait = {
						trait = anti_communist
						slot = political_advisor
					}
				}
				if = {
					limit = {
						is_character_slot = influence_minister
					}
					remove_trait = {
						trait = anti_communist
						slot = influence_minister
					}
				}
				if = {
					limit = {
						is_character_slot = supreme_commander
					}
					remove_trait = {
						trait = anti_communist
						slot = supreme_commander
					}
				}
				if = {
					limit = {
						is_character_slot = army_chief
					}
					remove_trait = {
						trait = anti_communist
						slot = army_chief
					}
				}
				if = {
					limit = {
						is_character_slot = air_chief
					}
					remove_trait = {
						trait = anti_communist
						slot = air_chief
					}
				}
				if = {
					limit = {
						is_character_slot = navy_chief
					}
					remove_trait = {
						trait = anti_communist
						slot = navy_chief
					}
				}
				if = {
					limit = {
						is_character_slot = high_command
					}
					remove_trait = {
						trait = anti_communist
						slot = high_command
					}
				}
				if = {
					limit = {
						is_character_slot = theorist
					}
					remove_trait = {
						trait = anti_communist
						slot = theorist
					}
				}
			}
			if = {
				limit = {
					has_trait = anti_fascist
				}
				set_character_flag = anti_fascist
				set_character_flag = ideology
				
				if = {
					limit = {
						is_character_slot = head_of_state
					}
					remove_trait = {
						trait = anti_fascist
						slot = head_of_state
					}
				}
				if = {
					limit = {
						is_character_slot = foreign_minister
					}
					remove_trait = {
						trait = anti_fascist
						slot = foreign_minister
					}
				}
				if = {
					limit = {
						is_character_slot = intel_minister
					}
					remove_trait = {
						trait = anti_fascist
						slot = intel_minister
					}
				}
				if = {
					limit = {
						is_character_slot = interior_minister
					}
					remove_trait = {
						trait = anti_fascist
						slot = interior_minister
					}
				}
				if = {
					limit = {
						is_character_slot = economic_minister
					}
					remove_trait = {
						trait = anti_fascist
						slot = economic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = domestic_minister
					}
					remove_trait = {
						trait = anti_fascist
						slot = domestic_minister
					}
				}
				if = {
					limit = {
						is_character_slot = political_advisor
					}
					remove_trait = {
						trait = anti_fascist
						slot = political_advisor
					}
				}
				if = {
					limit = {
						is_character_slot = influence_minister
					}
					remove_trait = {
						trait = anti_fascist
						slot = influence_minister
					}
				}
				if = {
					limit = {
						is_character_slot = supreme_commander
					}
					remove_trait = {
						trait = anti_fascist
						slot = supreme_commander
					}
				}
				if = {
					limit = {
						is_character_slot = army_chief
					}
					remove_trait = {
						trait = anti_fascist
						slot = army_chief
					}
				}
				if = {
					limit = {
						is_character_slot = air_chief
					}
					remove_trait = {
						trait = anti_fascist
						slot = air_chief
					}
				}
				if = {
					limit = {
						is_character_slot = navy_chief
					}
					remove_trait = {
						trait = anti_fascist
						slot = navy_chief
					}
				}
				if = {
					limit = {
						is_character_slot = high_command
					}
					remove_trait = {
						trait = anti_fascist
						slot = high_command
					}
				}
				if = {
					limit = {
						is_character_slot = theorist
					}
					remove_trait = {
						trait = anti_fascist
						slot = theorist
					}
				}
			}
			
			if = {
				limit = {
					#always = no #d_print_character_ideology_name set this to yet for printing
					check_variable = { global.players^num = 1 } #this might cause a desync, only do it for singleplayer
					has_variable = key
					OR = {
						has_character_flag = conservatism
						has_character_flag = liberalism
						has_character_flag = socialism
						has_character_flag = agrarianism
						has_character_flag = neutrality
						has_character_flag = monarchism
						has_character_flag = communism
						has_character_flag = fascism
						has_character_flag = apolitical
						has_character_flag = anti_communist
						has_character_flag = anti_fascist
					}
				}
				set_temp_variable = { t = key }
				meta_effect = {
					text = {
						set_character_name = {
							character = THIS
							name = [X]_party
						}
					}
					X = "[?t.GetTokenKey]"
				}
			}
		}
	
		#since the flags dont exist at startup we run ideology check with assigned advisors here
		for_each_loop = {
			array = global.idea_slots
			value = idea_slot
			
			for_each_loop = {
				array = assigned_advisor@var:idea_slot
				
				meta_effect = {
					text = { [X] = { set_temp_variable = { t = THIS } } }
					X = "[?v.GetTokenKey]"
				}
				var:t = {
					advisor_ideology_on_add = yes
				}

			}
		}
		
		# also update drift now as well
		calculate_ruling_and_opposition_party_drift = yes
		
	}
}

d_check_double_ideology = {
	every_country = {
		every_character = {
			if = {
				limit = {
					is_advisor = yes
					OR = {
						has_trait = conservative
						has_trait = socialist
						has_trait = agrarian
						has_trait = socialist
						has_trait = neutral
						has_trait = monarchist
						has_trait = communist
						has_trait = fascist
						has_trait = apolitical
						has_trait = anti_communist
						has_trait = anti_fascist
					}
				}
				
				set_temp_variable = { num_advisor = 0 }
				if = { limit = { is_character_slot = head_of_state } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = foreign_minister } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = interior_minister } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = intel_minister } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = economic_minister } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = domestic_minister } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = political_advisor } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = influence_minister } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = supreme_commander } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = army_chief } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = air_chief } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = navy_chief } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = high_command } add_to_temp_variable = { num_advisor = 1 } }
				if = { limit = { is_character_slot = theorist } add_to_temp_variable = { num_advisor = 1 } }
				
				if = {
					limit = {
						check_variable = { num_advisor > 1 }
					}
					log = "[?key.GetTokenKey] [GetName]"
				}
				
			}
		}
	}
}

d_check_assigned_advisors = {

		for_each_loop = {
			array = global.idea_slots
			
			if = {
				limit = {
					check_variable = { assigned_advisor@var:v^num > global.idea_slots_num^i }
				}
				log = "ADVISOR_LOG TOO MANY| [This.GetTag] | [?v.GetTokenKey] | has [?assigned_advisor@var:v^num] out of [?global.idea_slots_num^i]"
			}
			
			for_each_loop = {
				array = assigned_advisor@var:v
				value = advisor
				
				if = {
					limit = {
						NOT = { is_in_array = { ROOT.advisor_errors = advisor } }
						meta_trigger = {
							text = {
								NOT = { has_idea = [X]_[Y] }
							}
							X = "[?advisor.GetTokenKey]"
							Y = "[?v.GetTokenKey]"
						}
					}
					#add_to_array = { ROOT.advisor_errors = advisor }
					log = "ADVISOR_LOG TOO LARGE ARRAY | [This.GetTag] | [?v.GetTokenKey] | has [?advisor.GetTokenKey] in array, but not assigned!"
				}
			}
		}
	
}
d_print_character_ideology_name = { #USE THIS TO PRINT CORRECT CHARACTER NAMES AND IDEOLOGY ICONS
	every_possible_country = {
		every_character = {
			limit = {
				is_advisor = yes
				has_variable = key
				OR = {
					has_character_flag = conservatism
					has_character_flag = liberalism
					has_character_flag = socialism
					has_character_flag = agrarianism
					has_character_flag = neutrality
					has_character_flag = monarchism
					has_character_flag = communism
					has_character_flag = fascism
					has_character_flag = apolitical
					has_character_flag = anti_communist
					has_character_flag = anti_fascist
				}
			}
			set_temp_variable = { t = key }
			
			set_temp_variable = { alternative_icon = 0 }
			log = "[?key.GetTokenKey]_party: XXX[GetCons][GetLib][GetSoc][GetAgr][GetNeu][GetMon][GetFac][GetCom][GetFacAnti][GetComAnti][GetApo][This.GetName]XXX"
			
			set_temp_variable = { alternative_icon = 1 }
			log = "[?key.GetTokenKey]_party_alt: XXX[GetCons][GetLib][GetSoc][GetAgr][GetNeu][GetMon][GetFac][GetCom][GetFacAnti][GetComAnti][GetApo][This.GetName]XXX"
		}
	}
}