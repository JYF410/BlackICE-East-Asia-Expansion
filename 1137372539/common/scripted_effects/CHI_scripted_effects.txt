improve_incompetent_industry = {
	if = {
		limit = {
			has_idea = incompetent_industry_real
		}
		swap_ideas = {
			add_idea = incompetent_industry_real_2
			remove_idea = incompetent_industry_real
		}
	}
	else_if = {
		limit = {
			has_idea = incompetent_industry_real_2
		}
		swap_ideas = {
			add_idea = incompetent_industry_real_3
			remove_idea = incompetent_industry_real_2
		}
	}
	else_if = {
		limit = {
			has_idea = incompetent_industry_real_3
		}
		swap_ideas = {
			add_idea = incompetent_industry_real_4
			remove_idea = incompetent_industry_real_3
		}
	}
	else_if = {
		limit = {
			has_idea = incompetent_industry_real_4
		}
		swap_ideas = {
			add_idea = incompetent_industry_real_5
			remove_idea = incompetent_industry_real_4
		}
	}	
	else_if = {
		limit = {
			has_idea = incompetent_industry_real_5
		}
		remove_ideas = incompetent_industry_real_5
	}
}
PRC_create_wargoal_for_dongbei = {
	custom_effect_tooltip = PRC_create_wargoal_for_db_tt
	hidden_effect = {
		every_country = {
			limit = {
				any_owned_state = {
					OR = {
						region = 155
						region = 143
					}
				}
				NOT = { tag = ROOT }
			}
			ROOT = {
				create_wargoal = {
					target = PREV
					type = take_state_focus
				}
			}
		}
	}
}


### anchor_1 ###
gain_central_plain_wargoal = {
	custom_effect_tooltip = MCK_reclaim_central_plain_tt
	hidden_effect = {
		every_country = {
			limit = {
				any_owned_state = {
					OR = {
						region = 143
						region = 164
						region = 165
						region = 144
						region = 200
					}
					NOT = { state = 601 }
				}
				NOT = { tag = ROOT }
			}
			ROOT = {
				create_wargoal = {
					target = PREV
					type = take_state_focus
				}
			}
		}
	}
}
### anchor_2 ###

old_frontier_get_wargoal = {
	custom_effect_tooltip = MCK_restore_frontier_tt
	hidden_effect = {
		every_country = {
			limit = {
				any_owned_state = {
					OR = {
						region = 146
						region = 145
						region = 152
						state = 601
					}
					NOT = {
						state = 323
						state = 441
					}
				}
				NOT = { tag = ROOT }
			}
			ROOT = {
				create_wargoal = {
					target = PREV
					type = take_state_focus
				}
			}
		}
	}
}
### anchor_3 ###

gain_fareast_wargoal = {
	custom_effect_tooltip = PRC_get_wargoal_for_fareast_tt
	hidden_effect = {
		every_country = {
			limit = {
				any_owned_state = {
					region = 148
				}
				NOT = { tag = ROOT }
			}
			ROOT = {
				create_wargoal = {
					target = PREV
					type = take_state_focus
				}
			}
		}
	}
}
### anchor_4 ###

KMT_north_plan_wargoal = {
	custom_effect_tooltip = KMT_north_plan_effect_tt
	hidden_effect = {
		every_country = {
			limit = {
				any_owned_state = {
					OR = {
						region = 143
						region = 155
					}
				}
				NOT = { 
					tag = ROOT 
					is_chinese_nations/FLAG = yes
				}
			}
			ROOT = {
				create_wargoal = {
					target = PREV
					type = take_state_focus
				}
			}
		}
	}
}
### anchor_5 ###

add_xian_rejected_num = {
	if = {
		limit = {
			has_country_flag = {
				flag = KMT_xian_rejected_num
				value < 2
			}
		}
		set_country_flag = {
			flag = KMT_xian_rejected_num
			value = 1
		}
		else = {
			modify_country_flag = {
				flag = KMT_xian_rejected_num
				value = 1
			}
		}
	}
}


withdraw_from_all_wars_with_puppet = {
	if = {
		limit = {
			has_government = neutrality
		}
		random_other_country = {
			limit = {
				has_government = neutrality
				has_war = no
				exists = yes
			}
			puppet = ROOT
			end_puppet = ROOT
		}
		if = {
			limit = {
				NOT = {
					any_country = {
						NOT = { tag = ROOT }
						has_government = neutrality
						has_war = no
						exists = yes
					}
				}
			}
			random_other_country = {
				limit = {
					has_war = no
				}
				puppet = ROOT
				end_puppet = ROOT
			}
		}
		add_popularity = {
			ideology = neutrality
			popularity = 0.95
		}
	}
	if = {
		limit = {
			has_government = fascism
		}
		random_other_country = {
			limit = {
				has_government = fascism
				has_war = no
				exists = yes
			}
			puppet = ROOT
			end_puppet = ROOT
		}
		if = {
			limit = {
				NOT = {
					any_country = {
						NOT = { tag = ROOT }
						has_government = fascism
						has_war = no
						exists = yes
					}
				}
			}
			random_other_country = {
				limit = {
					has_war = no
				}
				puppet = ROOT
				end_puppet = ROOT
			}
		}
		add_popularity = {
			ideology = fascism
			popularity = 0.95
		}
	}
	if = {
		limit = {
			has_government = communism
		}
		random_other_country = {
			limit = {
				has_government = communism
				has_war = no
				exists = yes
			}
			puppet = ROOT
			end_puppet = ROOT
		}
		if = {
			limit = {
				NOT = {
					any_country = {
						NOT = { tag = ROOT }
						has_government = communism
						has_war = no
						exists = yes
					}
				}
			}
			random_other_country = {
				limit = {
					has_war = no
				}
				puppet = ROOT
				end_puppet = ROOT
			}
		}
		add_popularity = {
			ideology = communism
			popularity = 0.95
		}
	}
	if = {
		limit = {
			democratic_govt = yes
		}
		random_other_country = {
			limit = {
				democratic_govt = yes
				has_war = no
				exists = yes
			}
			puppet = ROOT
			end_puppet = ROOT
		}
		if = {
			limit = {
				NOT = {
					any_country = {
						NOT = { tag = ROOT }
						democratic_govt = yes
						has_war = no
						exists = yes
					}
				}
			}
			random_other_country = {
				limit = {
					has_war = no
				}
				puppet = ROOT
				end_puppet = ROOT
			}
		}
		add_popularity = {
			ideology = conservatism
			popularity = 0.95
		}
	}
	if = {
		limit = {
			is_in_faction = yes
		}
		random_country = {
			limit = {
				is_faction_leader = yes
				is_in_faction_with = ROOT
			}
			remove_from_faction = ROOT
		}
	}
}

KMT_take_pacific_wargoal = {
	custom_effect_tooltip = KMT_take_pacific_tt
	hidden_effect = {
		if = {
			limit = {
				526 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					526 = {
						owner = { is_puppet = no }
					}
				}
				526 = {
					owner = {
						save_event_target_as = KMTtakepac_526_owner
					}
				}
				else = {
					526 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_526_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				524 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					524 = {
						owner = { is_puppet = no }
					}
				}
				524 = {
					owner = {
						save_event_target_as = KMTtakepac_524_owner
					}
				}
				else = {
					524 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_524_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				528 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					528 = {
						owner = { is_puppet = no }
					}
				}
				528 = {
					owner = {
						save_event_target_as = KMTtakepac_528_owner
					}
				}
				else = {
					528 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_528_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				529 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					529 = {
						owner = { is_puppet = no }
					}
				}
				529 = {
					owner = {
						save_event_target_as = KMTtakepac_529_owner
					}
				}
				else = {
					529 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_529_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				530 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					530 = {
						owner = { is_puppet = no }
					}
				}
				530 = {
					owner = {
						save_event_target_as = KMTtakepac_530_owner
					}
				}
				else = {
					530 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_530_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				531 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					531 = {
						owner = { is_puppet = no }
					}
				}
				531 = {
					owner = {
						save_event_target_as = KMTtakepac_531_owner
					}
				}
				else = {
					531 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_531_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				532 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					532 = {
						owner = { is_puppet = no }
					}
				}
				532 = {
					owner = {
						save_event_target_as = KMTtakepac_532_owner
					}
				}
				else = {
					532 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_532_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				282 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					282 = {
						owner = { is_puppet = no }
					}
				}
				282 = {
					owner = {
						save_event_target_as = KMTtakepac_282_owner
					}
				}
				else = {
					282 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_282_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				535 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					535 = {
						owner = { is_puppet = no }
					}
				}
				535 = {
					owner = {
						save_event_target_as = KMTtakepac_535_owner
					}
				}
				else = {
					535 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_535_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				534 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					534 = {
						owner = { is_puppet = no }
					}
				}
				534 = {
					owner = {
						save_event_target_as = KMTtakepac_534_owner
					}
				}
				else = {
					534 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_534_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				533 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					533 = {
						owner = { is_puppet = no }
					}
				}
				533 = {
					owner = {
						save_event_target_as = KMTtakepac_533_owner
					}
				}
				else = {
					533 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_533_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				536 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					536 = {
						owner = { is_puppet = no }
					}
				}
				536 = {
					owner = {
						save_event_target_as = KMTtakepac_536_owner
					}
				}
				else = {
					536 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_536_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				555 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					555 = {
						owner = { is_puppet = no }
					}
				}
				555 = {
					owner = {
						save_event_target_as = KMTtakepac_555_owner
					}
				}
				else = {
					555 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_555_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				645 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					645 = {
						owner = { is_puppet = no }
					}
				}
				645 = {
					owner = {
						save_event_target_as = KMTtakepac_645_owner
					}
				}
				else = {
					645 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_645_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				525 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					525 = {
						owner = { is_puppet = no }
					}
				}
				525 = {
					owner = {
						save_event_target_as = KMTtakepac_525_owner
					}
				}
				else = {
					525 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_525_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				527 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					527 = {
						owner = { is_puppet = no }
					}
				}
				527 = {
					owner = {
						save_event_target_as = KMTtakepac_527_owner
					}
				}
				else = {
					527 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_527_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				648 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					648 = {
						owner = { is_puppet = no }
					}
				}
				648 = {
					owner = {
						save_event_target_as = KMTtakepac_648_owner
					}
				}
				else = {
					648 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_648_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				646 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					646 = {
						owner = { is_puppet = no }
					}
				}
				646 = {
					owner = {
						save_event_target_as = KMTtakepac_646_owner
					}
				}
				else = {
					646 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_646_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				638 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					638 = {
						owner = { is_puppet = no }
					}
				}
				638 = {
					owner = {
						save_event_target_as = KMTtakepac_638_owner
					}
				}
				else = {
					638 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_638_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				647 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					647 = {
						owner = { is_puppet = no }
					}
				}
				647 = {
					owner = {
						save_event_target_as = KMTtakepac_647_owner
					}
				}
				else = {
					647 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_647_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				684 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					684 = {
						owner = { is_puppet = no }
					}
				}
				684 = {
					owner = {
						save_event_target_as = KMTtakepac_684_owner
					}
				}
				else = {
					684 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_684_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				633 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					633 = {
						owner = { is_puppet = no }
					}
				}
				633 = {
					owner = {
						save_event_target_as = KMTtakepac_633_owner
					}
				}
				else = {
					633 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_633_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				632 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					632 = {
						owner = { is_puppet = no }
					}
				}
				632 = {
					owner = {
						save_event_target_as = KMTtakepac_632_owner
					}
				}
				else = {
					632 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_632_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				725 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					725 = {
						owner = { is_puppet = no }
					}
				}
				725 = {
					owner = {
						save_event_target_as = KMTtakepac_725_owner
					}
				}
				else = {
					725 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_725_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				639 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					639 = {
						owner = { is_puppet = no }
					}
				}
				639 = {
					owner = {
						save_event_target_as = KMTtakepac_639_owner
					}
				}
				else = {
					639 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_639_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				631 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					631 = {
						owner = { is_puppet = no }
					}
				}
				631 = {
					owner = {
						save_event_target_as = KMTtakepac_631_owner
					}
				}
				else = {
					631 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_631_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				642 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					642 = {
						owner = { is_puppet = no }
					}
				}
				642 = {
					owner = {
						save_event_target_as = KMTtakepac_642_owner
					}
				}
				else = {
					642 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_642_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				727 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					727 = {
						owner = { is_puppet = no }
					}
				}
				727 = {
					owner = {
						save_event_target_as = KMTtakepac_727_owner
					}
				}
				else = {
					727 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_727_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				630 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					630 = {
						owner = { is_puppet = no }
					}
				}
				630 = {
					owner = {
						save_event_target_as = KMTtakepac_630_owner
					}
				}
				else = {
					630 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_630_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				629 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					629 = {
						owner = { is_puppet = no }
					}
				}
				629 = {
					owner = {
						save_event_target_as = KMTtakepac_629_owner
					}
				}
				else = {
					629 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_629_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				643 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					643 = {
						owner = { is_puppet = no }
					}
				}
				643 = {
					owner = {
						save_event_target_as = KMTtakepac_643_owner
					}
				}
				else = {
					643 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_643_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				726 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					726 = {
						owner = { is_puppet = no }
					}
				}
				726 = {
					owner = {
						save_event_target_as = KMTtakepac_726_owner
					}
				}
				else = {
					726 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_726_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				641 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					641 = {
						owner = { is_puppet = no }
					}
				}
				641 = {
					owner = {
						save_event_target_as = KMTtakepac_641_owner
					}
				}
				else = {
					641 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_641_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				636 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					636 = {
						owner = { is_puppet = no }
					}
				}
				636 = {
					owner = {
						save_event_target_as = KMTtakepac_636_owner
					}
				}
				else = {
					636 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_636_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				635 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					635 = {
						owner = { is_puppet = no }
					}
				}
				635 = {
					owner = {
						save_event_target_as = KMTtakepac_635_owner
					}
				}
				else = {
					635 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_635_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				737 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					737 = {
						owner = { is_puppet = no }
					}
				}
				737 = {
					owner = {
						save_event_target_as = KMTtakepac_737_owner
					}
				}
				else = {
					737 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_737_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				634 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					634 = {
						owner = { is_puppet = no }
					}
				}
				634 = {
					owner = {
						save_event_target_as = KMTtakepac_634_owner
					}
				}
				else = {
					634 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_634_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				523 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					523 = {
						owner = { is_puppet = no }
					}
				}
				523 = {
					owner = {
						save_event_target_as = KMTtakepac_523_owner
					}
				}
				else = {
					523 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_523_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				517 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					517 = {
						owner = { is_puppet = no }
					}
				}
				517 = {
					owner = {
						save_event_target_as = KMTtakepac_517_owner
					}
				}
				else = {
					517 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_517_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				285 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					285 = {
						owner = { is_puppet = no }
					}
				}
				285 = {
					owner = {
						save_event_target_as = KMTtakepac_285_owner
					}
				}
				else = {
					285 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_285_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				521 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					521 = {
						owner = { is_puppet = no }
					}
				}
				521 = {
					owner = {
						save_event_target_as = KMTtakepac_521_owner
					}
				}
				else = {
					521 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_521_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				674 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					674 = {
						owner = { is_puppet = no }
					}
				}
				674 = {
					owner = {
						save_event_target_as = KMTtakepac_674_owner
					}
				}
				else = {
					674 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_674_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				519 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					519 = {
						owner = { is_puppet = no }
					}
				}
				519 = {
					owner = {
						save_event_target_as = KMTtakepac_519_owner
					}
				}
				else = {
					519 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_519_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				522 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					522 = {
						owner = { is_puppet = no }
					}
				}
				522 = {
					owner = {
						save_event_target_as = KMTtakepac_522_owner
					}
				}
				else = {
					522 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_522_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				520 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					520 = {
						owner = { is_puppet = no }
					}
				}
				520 = {
					owner = {
						save_event_target_as = KMTtakepac_520_owner
					}
				}
				else = {
					520 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_520_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				518 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					518 = {
						owner = { is_puppet = no }
					}
				}
				518 = {
					owner = {
						save_event_target_as = KMTtakepac_518_owner
					}
				}
				else = {
					518 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_518_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				284 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					284 = {
						owner = { is_puppet = no }
					}
				}
				284 = {
					owner = {
						save_event_target_as = KMTtakepac_284_owner
					}
				}
				else = {
					284 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_284_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				723 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					723 = {
						owner = { is_puppet = no }
					}
				}
				723 = {
					owner = {
						save_event_target_as = KMTtakepac_723_owner
					}
				}
				else = {
					723 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_723_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				669 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					669 = {
						owner = { is_puppet = no }
					}
				}
				669 = {
					owner = {
						save_event_target_as = KMTtakepac_669_owner
					}
				}
				else = {
					669 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakepac_669_owner
							}
						}
					}
				}
			}
		}
	}
}

KMT_take_SEA_wargoal = {
	custom_effect_tooltip = KMT_take_SEA_tt
	hidden_effect = {
		if = {
			limit = {
				524 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					524 = {
						owner = { is_puppet = no }
					}
				}
				524 = {
					owner = {
						save_event_target_as = KMTtakeSEA_524_owner
					}
				}
				else = {
					524 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_524_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				593 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					593 = {
						owner = { is_puppet = no }
					}
				}
				593 = {
					owner = {
						save_event_target_as = KMTtakeSEA_593_owner
					}
				}
				else = {
					593 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_593_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				592 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					592 = {
						owner = { is_puppet = no }
					}
				}
				592 = {
					owner = {
						save_event_target_as = KMTtakeSEA_592_owner
					}
				}
				else = {
					592 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_592_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				591 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					591 = {
						owner = { is_puppet = no }
					}
				}
				591 = {
					owner = {
						save_event_target_as = KMTtakeSEA_591_owner
					}
				}
				else = {
					591 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_591_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				594 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					594 = {
						owner = { is_puppet = no }
					}
				}
				594 = {
					owner = {
						save_event_target_as = KMTtakeSEA_594_owner
					}
				}
				else = {
					594 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_594_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				599 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					599 = {
						owner = { is_puppet = no }
					}
				}
				599 = {
					owner = {
						save_event_target_as = KMTtakeSEA_599_owner
					}
				}
				else = {
					599 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_599_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				671 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					671 = {
						owner = { is_puppet = no }
					}
				}
				671 = {
					owner = {
						save_event_target_as = KMTtakeSEA_671_owner
					}
				}
				else = {
					671 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_671_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				286 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					286 = {
						owner = { is_puppet = no }
					}
				}
				286 = {
					owner = {
						save_event_target_as = KMTtakeSEA_286_owner
					}
				}
				else = {
					286 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_286_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				286 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					286 = {
						owner = { is_puppet = no }
					}
				}
				286 = {
					owner = {
						save_event_target_as = KMTtakeSEA_286_owner
					}
				}
				else = {
					286 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_286_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				670 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					670 = {
						owner = { is_puppet = no }
					}
				}
				670 = {
					owner = {
						save_event_target_as = KMTtakeSEA_670_owner
					}
				}
				else = {
					670 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_670_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				741 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					741 = {
						owner = { is_puppet = no }
					}
				}
				741 = {
					owner = {
						save_event_target_as = KMTtakeSEA_741_owner
					}
				}
				else = {
					741 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_741_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				833 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					833 = {
						owner = { is_puppet = no }
					}
				}
				833 = {
					owner = {
						save_event_target_as = KMTtakeSEA_741_owner
					}
				}
				else = {
					833 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_741_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				289 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					289 = {
						owner = { is_puppet = no }
					}
				}
				289 = {
					owner = {
						save_event_target_as = KMTtakeSEA_289_owner
					}
				}
				else = {
					289 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_289_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				724 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					724 = {
						owner = { is_puppet = no }
					}
				}
				724 = {
					owner = {
						save_event_target_as = KMTtakeSEA_724_owner
					}
				}
				else = {
					724 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_724_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				336 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					336 = {
						owner = { is_puppet = no }
					}
				}
				336 = {
					owner = {
						save_event_target_as = KMTtakeSEA_336_owner
					}
				}
				else = {
					336 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_336_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				672 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					672 = {
						owner = { is_puppet = no }
					}
				}
				672 = {
					owner = {
						save_event_target_as = KMTtakeSEA_672_owner
					}
				}
				else = {
					672 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_672_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				333 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					333 = {
						owner = { is_puppet = no }
					}
				}
				333 = {
					owner = {
						save_event_target_as = KMTtakeSEA_333_owner
					}
				}
				else = {
					333 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_333_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				334 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					334 = {
						owner = { is_puppet = no }
					}
				}
				334 = {
					owner = {
						save_event_target_as = KMTtakeSEA_334_owner
					}
				}
				else = {
					334 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_334_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				335 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					335 = {
						owner = { is_puppet = no }
					}
				}
				335 = {
					owner = {
						save_event_target_as = KMTtakeSEA_335_owner
					}
				}
				else = {
					335 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_335_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				626 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					626 = {
						owner = { is_puppet = no }
					}
				}
				626 = {
					owner = {
						save_event_target_as = KMTtakeSEA_626_owner
					}
				}
				else = {
					626 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_626_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				623 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					623 = {
						owner = { is_puppet = no }
					}
				}
				623 = {
					owner = {
						save_event_target_as = KMTtakeSEA_623_owner
					}
				}
				else = {
					623 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_623_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				327 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					327 = {
						owner = { is_puppet = no }
					}
				}
				327 = {
					owner = {
						save_event_target_as = KMTtakeSEA_327_owner
					}
				}
				else = {
					327 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_327_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				624 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					624 = {
						owner = { is_puppet = no }
					}
				}
				624 = {
					owner = {
						save_event_target_as = KMTtakeSEA_624_owner
					}
				}
				else = {
					624 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_624_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				628 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					628 = {
						owner = { is_puppet = no }
					}
				}
				628 = {
					owner = {
						save_event_target_as = KMTtakeSEA_628_owner
					}
				}
				else = {
					628 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_628_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				625 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					625 = {
						owner = { is_puppet = no }
					}
				}
				625 = {
					owner = {
						save_event_target_as = KMTtakeSEA_625_owner
					}
				}
				else = {
					625 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_625_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				627 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					627 = {
						owner = { is_puppet = no }
					}
				}
				627 = {
					owner = {
						save_event_target_as = KMTtakeSEA_627_owner
					}
				}
				else = {
					627 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_627_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				673 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					673 = {
						owner = { is_puppet = no }
					}
				}
				673 = {
					owner = {
						save_event_target_as = KMTtakeSEA_673_owner
					}
				}
				else = {
					673 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_673_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				668 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					668 = {
						owner = { is_puppet = no }
					}
				}
				668 = {
					owner = {
						save_event_target_as = KMTtakeSEA_668_owner
					}
				}
				else = {
					668 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_668_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				669 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					669 = {
						owner = { is_puppet = no }
					}
				}
				669 = {
					owner = {
						save_event_target_as = KMTtakeSEA_669_owner
					}
				}
				else = {
					669 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_669_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				667 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					667 = {
						owner = { is_puppet = no }
					}
				}
				667 = {
					owner = {
						save_event_target_as = KMTtakeSEA_667_owner
					}
				}
				else = {
					667 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_667_owner
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				721 = {
					owner = {
						NOT = { 
							tag = ROOT									
							is_puppet_of = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					721 = {
						owner = { is_puppet = no }
					}
				}
				721 = {
					owner = {
						save_event_target_as = KMTtakeSEA_721_owner
					}
				}
				else = {
					721 = {
						owner = { 
							overlord = { 
								save_event_target_as = KMTtakeSEA_721_owner
							}
						}
					}
				}
			}
		}
	}
}

get_usa_supplies = {
	if = {
		limit = {
			USA = {
				has_tech = infantry_weapons
				NOT = {
					has_tech = infantry_weapons1
				}
			}
		}
		add_equipment_to_stockpile = { type = infantry_equipment_0 amount = 10000 producer = USA }
	}
	else_if = {
		limit = {
			USA = {
				has_tech = infantry_weapons1
				NOT = {
					has_tech = improved_infantry_weapons
				}
			}
		}
		add_equipment_to_stockpile = { type = infantry_equipment_1 amount = 10000 producer = USA }
	}
	else_if = {
		limit = {
			USA = {
				has_tech = improved_infantry_weapons
				NOT = {
					has_tech = advanced_infantry_weapons
				}
			}
		}
		add_equipment_to_stockpile = { type = infantry_equipment_2 amount = 10000 producer = USA }
	}
	else_if = {
		limit = {
			USA = {
				has_tech = advanced_infantry_weapons
			}
		}
		add_equipment_to_stockpile = { type = infantry_equipment_3 amount = 10000 producer = USA }
	}
	if = {
		limit = {
			USA = {
				has_tech = tech_support
			}
		}
		add_equipment_to_stockpile = { type = support_equipment_1 amount = 7500 producer = USA }
	}
	if = {
		limit = {
			USA = {
				NOT = {
					has_tech = tech_curtiss_p36_equipment_1
				}
			}
		}
		add_equipment_to_stockpile = { type = curtiss_p6_equipment_2 amount = 300 producer = USA }
	}
	else_if = {
		limit = {
			USA = {
				has_tech = tech_curtiss_p36_equipment_1
				NOT = {
					has_tech = tech_curtiss_p40_equipment_2
				}
			}
		}
		add_equipment_to_stockpile = { type = curtiss_p36_equipment_1 amount = 300 producer = USA }
	}
	else_if = {
		limit = {
			USA = {
				has_tech = tech_curtiss_p40_equipment_2
				NOT = {
					has_tech = tech_northamerican_p51d_equipment_1
				}
			}
		}
		add_equipment_to_stockpile = { type = northamerican_p51d_equipment_1 amount = 300 producer = USA }
	}
	if = {
		limit = {
			USA = {
				NOT = {
					has_tech = tech_vultee_a19_equipment_1
				}
			}
		}
		add_equipment_to_stockpile = { type = vought_o2u_export_equipment_4 amount = 300 producer = USA }
	}
	else_if = {
		limit = {
			USA = {
				has_tech = tech_vultee_a19_equipment_1
				NOT = {
					has_tech = tech_douglas_a24_equipment_1
				}
			}
		}
		add_equipment_to_stockpile = { type = vultee_a19_equipment_1 amount = 300 producer = USA }
	}
	else_if = {
		limit = {
			USA = {
				has_tech = tech_douglas_a24_equipment_1
			}
		}
		add_equipment_to_stockpile = { type = douglas_a24_equipment_1 amount = 300 producer = USA }
	}
}

KMT_evacuate_industry_to_the_rear = { 
	set_temp_variable = {
		var = af_to_move
		value = arms_factory_level
	}
	if = {
		limit = {
			check_variable = { af_to_move > 5 }
		}
		multiply_variable = {
			var = af_to_move
			value = global.CHI_industrial_evacuations_amount_factor3
		}
		else = {
			if = {
				limit = {
					check_variable = { af_to_move > 4 }
				}
				multiply_variable = {
					var = af_to_move
					value = global.CHI_industrial_evacuations_amount_factor2
				}
				else = {
					if = {
						limit = {
							check_variable = { af_to_move > 3 }
						}
						multiply_variable = {
							var = af_to_move
							value = global.CHI_industrial_evacuations_amount_factor
						}
					}
				}
			}
		}
	}
	
	set_temp_variable = {
		var = ic_to_move
		value = industrial_complex_level
	}
	if = {
		limit = {
			check_variable = { ic_to_move > 5 }
		}
		multiply_variable = {
			var = ic_to_move
			value = global.CHI_industrial_evacuations_amount_factor3
		}
		else = {
			if = {
				limit = {
					check_variable = { ic_to_move > 4 }
				}
				multiply_variable = {
					var = ic_to_move
					value = global.CHI_industrial_evacuations_amount_factor2
				}
				else = {
					if = {
						limit = {
							check_variable = { ic_to_move > 3 }
						}
						multiply_variable = {
							var = ic_to_move
							value = global.CHI_industrial_evacuations_amount_factor
						}
					}
				}
			}
		}
	}
	remove_building = {
		type = arms_factory
		level = af_to_move
	}
	remove_building = {
		type = industrial_complex
		level = ic_to_move
	}

	#Move AF
	ROOT = {
		if = {
			limit = {
				605 = {
					OR = {
						AND = {
							is_fully_controlled_by = ROOT
							is_owned_by = ROOT
							any_neighbor_state = {
								is_controlled_by = ROOT
							}
						}
						AND = {
							CONTROLLER = {
								has_idea = cu_is_warlord
								has_war_together_with = ROOT
								is_subject_of = ROOT
								has_full_control_of_state = PREV
								owns_state = PREV
							}
							any_neighbor_state = {
								CONTROLLER = {
									NOT = { has_war_with = ROOT }
									NOT = { has_war_with = PREV }
								}
							}
						}
					}
					free_building_slots = {
						building = arms_factory
						size > 2
						include_locked = yes
					}
				}
			}
			605 = {
				add_extra_state_shared_building_slots = af_to_move
				add_building_construction = {
					type = arms_factory
					level = af_to_move
					instant_build = yes
				}
				CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
			}
			else = {
				if = {
					limit = {
						748 = {
							OR = {
								AND = {
									is_fully_controlled_by = ROOT
									is_owned_by = ROOT
									any_neighbor_state = {
										is_controlled_by = ROOT
									}
								}
								AND = {
									CONTROLLER = {
										has_idea = cu_is_warlord
										has_war_together_with = ROOT
										is_subject_of = ROOT
										has_full_control_of_state = PREV
										owns_state = PREV
									}
									any_neighbor_state = {
										CONTROLLER = {
											NOT = { has_war_with = ROOT }
											NOT = { has_war_with = PREV }
										}
									}
								}
							}
							free_building_slots = {
								building = arms_factory
								size > 2
								include_locked = yes
							}
						}
					}
					748 = {
						add_extra_state_shared_building_slots = af_to_move
						add_building_construction = {
							type = arms_factory
							level = af_to_move
							instant_build = yes
						}
						CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
					}
					else = {
						if = {
							limit = {
								798 = {
									OR = {
										AND = {
											is_fully_controlled_by = ROOT
											is_owned_by = ROOT
											any_neighbor_state = {
												is_controlled_by = ROOT
											}
										}
										AND = {
											CONTROLLER = {
												has_idea = cu_is_warlord
												has_war_together_with = ROOT
												is_subject_of = ROOT
												has_full_control_of_state = PREV
												owns_state = PREV
											}
											any_neighbor_state = {
												CONTROLLER = {
													NOT = { has_war_with = ROOT }
													NOT = { has_war_with = PREV }
												}
											}
										}
									}
									free_building_slots = {
										building = arms_factory
										size > 2
										include_locked = yes
									}
								}
							}
							798 = {
								add_extra_state_shared_building_slots = af_to_move
								add_building_construction = {
									type = arms_factory
									level = af_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
							}
							else = {
								random_owned_controlled_state = {
									prioritize = { 605 748 798 }
									limit = {
										OR = {
											is_fully_controlled_by = ROOT
											CONTROLLER = {
												has_idea = cu_is_warlord
												has_war_together_with = ROOT
												is_subject_of = ROOT
												has_full_control_of_state = PREV
											}
										}
										any_neighbor_state = {
											OR = {
												is_controlled_by = ROOT
												CONTROLLER = {
													has_idea = cu_is_warlord
													has_war_together_with = ROOT
													has_full_control_of_state = PREV
												}
											}
										}
										free_building_slots = {
											building = arms_factory
											size > 2
											include_locked = yes
										}
									}
									add_extra_state_shared_building_slots = af_to_move
									add_building_construction = {
										type = arms_factory
										level = af_to_move
										instant_build = yes
									}
									CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_AF }
								}
							}
						}
					}
				}
			}
		}

		#If no states are really safe or all safe are filled
		#Move to random controlled state
		if = {
			limit = {
				NOT = { has_country_flag = CHI_industrial_evacuations_moved_AF }
				NOT = {
					any_state = {
						OR = {
							AND = {
								is_fully_controlled_by = ROOT
								is_owned_by = ROOT
							}
							CONTROLLER = {
								has_idea = cu_is_warlord
								has_war_together_with = ROOT
								is_subject_of = ROOT
								has_full_control_of_state = PREV
								owns_state = PREV
							}
						}
						any_neighbor_state = {
							OR = {
								is_controlled_by = ROOT
								CONTROLLER = {
									NOT = { has_war_with = ROOT }
									NOT = { has_war_with = PREV }
								}
							}
						}
						free_building_slots = {
							building = arms_factory
							size > 2
							include_locked = yes
						}
					}
				}
			}
			random_owned_controlled_state = {
				prioritize = { 605 748 798 }
				limit = {
					OR = {
						AND = {
							is_controlled_by = ROOT
							is_owned_by = ROOT
						}
						CONTROLLER = {
							has_idea = cu_is_warlord
							has_war_together_with = ROOT
							is_subject_of = ROOT
							owns_state = PREV
						}
					}
					free_building_slots = {
						building = arms_factory
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = af_to_move
				add_building_construction = {
					type = arms_factory
					level = af_to_move
					instant_build = yes
				}
			}
		}
		clr_country_flag = CHI_industrial_evacuations_moved_AF


		#Move IC
		if = {
			limit = {
				605 = {
					OR = {
						AND = {
							is_fully_controlled_by = ROOT
							is_owned_by = ROOT
							any_neighbor_state = {
								is_controlled_by = ROOT
							}
						}
						AND = {
							CONTROLLER = {
								has_idea = cu_is_warlord
								has_war_together_with = ROOT
								is_subject_of = ROOT
								has_full_control_of_state = PREV
								owns_state = PREV
							}
							any_neighbor_state = {
								CONTROLLER = {
									NOT = { has_war_with = ROOT }
									NOT = { has_war_with = PREV }
								}
							}
						}
					}
					free_building_slots = {
						building = industrial_complex
						size > 2
						include_locked = yes
					}
				}
			}
			605 = {
				add_extra_state_shared_building_slots = ic_to_move
				add_building_construction = {
					type = industrial_complex
					level = ic_to_move
					instant_build = yes
				}
				CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
			}
			else = {
				if = {
					limit = {
						748 = {
							OR = {
								AND = {
									is_fully_controlled_by = ROOT
									is_owned_by = ROOT
									any_neighbor_state = {
										is_controlled_by = ROOT
									}
								}
								AND = {
									CONTROLLER = {
										has_idea = cu_is_warlord
										has_war_together_with = ROOT
										is_subject_of = ROOT
										has_full_control_of_state = PREV
										owns_state = PREV
									}
									any_neighbor_state = {
										CONTROLLER = {
											NOT = { has_war_with = ROOT }
											NOT = { has_war_with = PREV }
										}
									}
								}
							}
							free_building_slots = {
								building = industrial_complex
								size > 2
								include_locked = yes
							}
						}
					}
					748 = {
						add_extra_state_shared_building_slots = ic_to_move
						add_building_construction = {
							type = industrial_complex
							level = ic_to_move
							instant_build = yes
						}
						CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
					}
					else = {
						if = {
							limit = {
								798 = {
									OR = {
										AND = {
											is_fully_controlled_by = ROOT
											is_owned_by = ROOT
											any_neighbor_state = {
												is_controlled_by = ROOT
											}
										}
										AND = {
											CONTROLLER = {
												has_idea = cu_is_warlord
												has_war_together_with = ROOT
												is_subject_of = ROOT
												has_full_control_of_state = PREV
												owns_state = PREV
											}
											any_neighbor_state = {
												CONTROLLER = {
													NOT = { has_war_with = ROOT }
													NOT = { has_war_with = PREV }
												}
											}
										}
									}
									free_building_slots = {
										building = industrial_complex
										size > 2
										include_locked = yes
									}
								}
							}
							798 = {
								add_extra_state_shared_building_slots = ic_to_move
								add_building_construction = {
									type = industrial_complex
									level = ic_to_move
									instant_build = yes
								}
								CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
							}
							else = {
								random_owned_controlled_state = {
									prioritize = { 605 748 798 }
									limit = {
										OR = {
											is_fully_controlled_by = ROOT
											CONTROLLER = {
												has_idea = cu_is_warlord
												has_war_together_with = ROOT
												is_subject_of = ROOT
												has_full_control_of_state = PREV
											}
										}
										any_neighbor_state = {
											OR = {
												is_controlled_by = ROOT
												CONTROLLER = {
													has_idea = cu_is_warlord
													has_war_together_with = ROOT
													has_full_control_of_state = PREV
												}
											}
										}
										free_building_slots = {
											building = industrial_complex
											size > 2
											include_locked = yes
										}
									}
									add_extra_state_shared_building_slots = ic_to_move
									add_building_construction = {
										type = industrial_complex
										level = ic_to_move
										instant_build = yes
									}
									CONTROLLER = { set_country_flag = CHI_industrial_evacuations_moved_IC }
								}
							}
						}
					}
				}
			}
		}

		#If no states are really safe or all safe are filled
		#Move to random controlled state
		if = {
			limit = {
				NOT = { has_country_flag = CHI_industrial_evacuations_moved_IC }
				NOT = {
					any_state = {
						OR = {
							AND = {
								is_fully_controlled_by = ROOT
								is_owned_by = ROOT
							}
							CONTROLLER = {
								has_idea = cu_is_warlord
								has_war_together_with = ROOT
								is_subject_of = ROOT
								has_full_control_of_state = PREV
								owns_state = PREV
							}
						}
						any_neighbor_state = {
							OR = {
								is_controlled_by = ROOT
								CONTROLLER = {
									NOT = { has_war_with = ROOT }
									NOT = { has_war_with = PREV }
								}
							}
						}
						free_building_slots = {
							building = industrial_complex
							size > 2
							include_locked = yes
						}
					}
				}
			}
			random_owned_controlled_state = {
				prioritize = { 605 748 798 }
				limit = {
					OR = {
						AND = {
							is_controlled_by = ROOT
							is_owned_by = ROOT
						}
						CONTROLLER = {
							has_idea = cu_is_warlord
							has_war_together_with = ROOT
							is_subject_of = ROOT
							owns_state = PREV
						}
					}
					free_building_slots = {
						building = industrial_complex
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = ic_to_move
				add_building_construction = {
					type = industrial_complex
					level = ic_to_move
					instant_build = yes
				}
			}
		}
		clr_country_flag = CHI_industrial_evacuations_moved_IC
	}		
}

nine_power_exploiting_tooltip = {
	if = {
		limit = {
			check_variable = { chance_picked = 1 }
		}
		add_offsite_building = { type = arms_factory level = 1 }
	}
	else_if = {
		limit = {
			check_variable = { chance_picked = 2 }
		}
		add_offsite_building = { type = industrial_complex level = 1 }
	}
	else_if = {
		limit = {
			check_variable = { chance_picked = 3 }
		}
		add_timed_idea = { idea = CHI_wealth days = 75 }
	}
	else_if = {
		limit = {
			check_variable = { chance_picked = 4 }
		}
		add_timed_idea = { idea = CHI_mines days = 75 }
	}
	else_if = {
		limit = {
			check_variable = { chance_picked = 5 }
		}
		add_timed_idea = { idea = CHI_ideas days = 75 }
	}
	else_if = {
		limit = {
			check_variable = { chance_picked = 6 }
		}
		add_timed_idea = { idea = CHI_power days = 75 }
	}
}

get_highest_resistance_state = {
	hidden_effect = {
		set_temp_variable = { highest_resistance = 0 }
		set_temp_variable = { highest_resistance_state = -1 }

		every_controlled_state = {
			limit = {
				has_active_resistance = yes
			}
			if = {
				limit = {
					check_variable = {
						this.resistance > highest_resistance
					}
				}
				set_temp_variable = { highest_resistance = this.resistance }
				set_temp_variable = { highest_resistance_state = this }
			}
			
		}
	}
}

transfer_province_control_to_RGR = {

	CHI = {
		every_core_state = {
			limit = {
				OR = {
					is_owned_by = CHI
					is_owned_by = PRC
				}
				NOT = {
					is_fully_controlled_by = CHI
					OR = {
						state = 524 #  not taiwan, more?
						state = 591
						state = 745
						
						state = 812
						state = 714
						state = 814
						state = 813
						state = 761
						
						state = 326
					}
				}
			}
			set_state_province_controller = {
				controller = RGR
				limit = {
					NOT = { tag = RGR }
					OR = {
						tag = JAP
						is_in_faction_with = JAP
					}
				}
			}
			
		}
	}
	
}
transfer_state_owner_to_RGR = {

	RGR = {
		every_controlled_state = {
			limit = {
				NOT = { is_owned_by = RGR }
				is_fully_controlled_by = RGR
			}
			
			add_contested_owner = RGR
		}
	}
	
}