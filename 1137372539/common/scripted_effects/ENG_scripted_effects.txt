
# Increase Imperial Defense spirit
ENG_imperial_conference_defense_level_up = {
	if = {
		limit = {
			has_idea = ENG_imperial_conference_defense_4
		}
		swap_ideas = {
			remove_idea = ENG_imperial_conference_defense_4
			add_idea = ENG_imperial_conference_defense_5
		}
	}
	else_if = {
		limit = {
			has_idea = ENG_imperial_conference_defense_3
		}
		swap_ideas = {
			remove_idea = ENG_imperial_conference_defense_3
			add_idea = ENG_imperial_conference_defense_4
		}
	}
	else_if = {
		limit = {
			has_idea = ENG_imperial_conference_defense_2
		}
		swap_ideas = {
			remove_idea = ENG_imperial_conference_defense_2
			add_idea = ENG_imperial_conference_defense_3
		}
	}
	else_if = {
		limit = {
			has_idea = ENG_imperial_conference_defense_1
		}
		swap_ideas = {
			remove_idea = ENG_imperial_conference_defense_1
			add_idea = ENG_imperial_conference_defense_2
		}
	}
	else_if = {
		limit = {
			NOT = { has_idea = ENG_imperial_conference_defense_1 }
			NOT = { has_idea = ENG_imperial_conference_defense_2 }
			NOT = { has_idea = ENG_imperial_conference_defense_3 }
			NOT = { has_idea = ENG_imperial_conference_defense_4 }
			NOT = { has_idea = ENG_imperial_conference_defense_5 }
		}
		add_timed_idea = { idea = ENG_imperial_conference_defense_1 days = 365 }
	}
}

# Increase Imperial Economy spirit
ENG_imperial_conference_economy_level_up = {
	if = {
		limit = {
			has_idea = ENG_imperial_conference_economy_4
		}
		swap_ideas = {
			remove_idea = ENG_imperial_conference_economy_4
			add_idea = ENG_imperial_conference_economy_5
		}
	}
	else_if = {
		limit = {
			has_idea = ENG_imperial_conference_economy_3
		}
		swap_ideas = {
			remove_idea = ENG_imperial_conference_economy_3
			add_idea = ENG_imperial_conference_economy_4
		}
	}
	else_if = {
		limit = {
			has_idea = ENG_imperial_conference_economy_2
		}
		swap_ideas = {
			remove_idea = ENG_imperial_conference_economy_2
			add_idea = ENG_imperial_conference_economy_3
		}
	}
	else_if = {
		limit = {
			has_idea = ENG_imperial_conference_economy_1
		}
		swap_ideas = {
			remove_idea = ENG_imperial_conference_economy_1
			add_idea = ENG_imperial_conference_economy_2
		}
	}
	else_if = {
		limit = {
			NOT = { has_idea = ENG_imperial_conference_economy_1 }
			NOT = { has_idea = ENG_imperial_conference_economy_2 }
			NOT = { has_idea = ENG_imperial_conference_economy_3 }
			NOT = { has_idea = ENG_imperial_conference_economy_4 }
			NOT = { has_idea = ENG_imperial_conference_economy_5 }
		}
		add_timed_idea = { idea = ENG_imperial_conference_economy_1 days = 365 }
	}
}
ENG_loose_colony = {
	custom_effect_tooltip = modify_empire_TT
	if = {
		limit = {
			check_variable = { colonies_lost = 1 }
		}
		if = { 
			limit = {
				has_country_flag = back_on_track
			}
			add_to_variable = { british_stability = -0.01 tooltip = british_stability_tt }
			force_update_dynamic_modifier = yes
		}
		else = {
			#TODO country_event = #something about 1st colony lost in 100 years
			add_to_variable = { british_stability = -0.03 tooltip = british_stability_tt }
			force_update_dynamic_modifier = yes
		}
	}
	else_if = {
		limit = {
			check_variable = { colonies_lost = 2 }
		}
		add_to_variable = { british_stability = -0.01 tooltip = british_stability_tt }
		force_update_dynamic_modifier = yes
	}
	else_if = {
		limit = {
			check_variable = { colonies_lost = 3 }
		}
		add_to_variable = { british_stability = -0.01 tooltip = british_stability_tt }
		force_update_dynamic_modifier = yes
	}
	else_if = {
		limit = {
			check_variable = { colonies_lost = 4 }
		}
		add_to_variable = { british_stability = -0.02 tooltip = british_stability_tt }
		force_update_dynamic_modifier = yes
	}
	else_if = {
		limit = {
			check_variable = { colonies_lost = 5 }
		}
		add_to_variable = { british_stability = -0.02 tooltip = british_stability_tt }
		force_update_dynamic_modifier = yes
	}
	else_if = {
		limit = {
			check_variable = { colonies_lost = 6 }
		}
		add_to_variable = { british_stability = -0.03 tooltip = british_stability_tt }
		force_update_dynamic_modifier = yes
	}
	else_if = {
		limit = {
			check_variable = { colonies_lost > 6 }
		}
		add_to_variable = { british_stability = -0.03 tooltip = british_stability_tt }
		add_to_variable = { british_consumer_goods = 0.01 tooltip = british_consumer_goods_tt }
		force_update_dynamic_modifier = yes
	}
	
}
ENG_regain_colony = {
	subtract_from_variable = { colonies_lost = 1 }
	set_country_flag = back_on_track
	if = {
		limit = {
			check_variable = { colonies_lost = 0 }
		}
		add_to_variable = { british_stability = 0.02 tooltip = british_stability_tt }
		force_update_dynamic_modifier = yes
	}
	else_if = {
		limit = {
			check_variable = { colonies_lost = 1 }
		}
		add_to_variable = { british_stability = 0.01 tooltip = british_stability_tt }
		force_update_dynamic_modifier = yes
	}
	else_if = {
		limit = {
			check_variable = { colonies_lost = 2 }
		}
		add_to_variable = { british_stability = 0.01 tooltip = british_stability_tt }
		force_update_dynamic_modifier = yes
	}
	else_if = {
		limit = {
			check_variable = { colonies_lost = 3 }
		}
		add_to_variable = { british_stability = 0.01 tooltip = british_stability_tt }
		force_update_dynamic_modifier = yes
	}
	else_if = {
		limit = {
			check_variable = { colonies_lost = 4 }
		}
		add_to_variable = { british_stability = -0.01 tooltip = british_stability_tt }
		force_update_dynamic_modifier = yes
	}
	else_if = {
		limit = {
			check_variable = { colonies_lost = 5 }
		}
		add_to_variable = { british_stability = 0.02 tooltip = british_stability_tt }
		force_update_dynamic_modifier = yes
	}
	else_if = {
		limit = {
			check_variable = { colonies_lost > 5 }
		}
		add_to_variable = { british_stability = 0.01 tooltip = british_stability_tt }
		force_update_dynamic_modifier = yes
	}
}