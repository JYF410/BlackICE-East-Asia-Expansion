spanish_civil_war = {
	SOV_spainish_civil_war_goal = {
		is_good = no
		icon = eng_propaganda_campaigns
		cosmetic_tag = SPA
		fire_only_once = yes
		days_mission_timeout = 974
		
		priority = 1
		activation = {
			always = no
		}		
        
		available = {
			custom_trigger_tooltip = {
				tooltip = nationalist_win_scw
				has_global_flag = nationalist_victory
			}	
		}

		complete_effect = {
			set_temp_variable = { purge = days_mission_timeout@SOV_spainish_civil_war_goal }
			divide_temp_variable = { purge = 487 }
			add_to_temp_variable = { purge = 1 }
			custom_effect_tooltip = officer_purge_change_TT
			
		 	set_temp_variable = { temp = officers_purged_train }
			multiply_temp_variable = { temp = purge }
			subtract_from_temp_variable = { temp = officers_purged_train }
			add_to_variable = { officers_purged_train = temp tooltip = officers_purged_train_TT }
			
		 	set_temp_variable = { temp = officers_purged_mobilization }
			multiply_temp_variable = { temp = purge }
			subtract_from_temp_variable = { temp = officers_purged_mobilization }
			add_to_variable = { officers_purged_mobilization = temp tooltip = officers_purged_mobilization_TT }
			
		 	set_temp_variable = { temp = officers_purged_command }
			multiply_temp_variable = { temp = purge }
			subtract_from_temp_variable = { temp = officers_purged_command }
			add_to_variable = { officers_purged_command = temp tooltip = officers_purged_command_TT }
			
		 	set_temp_variable = { temp = officers_purged_experience }
			multiply_temp_variable = { temp = purge }
			subtract_from_temp_variable = { temp = officers_purged_experience }
			add_to_variable = { officers_purged_experience = temp tooltip = officers_purged_experience_TT }
			
		 	set_temp_variable = { temp = officers_purged_experience_cap }
			multiply_temp_variable = { temp = purge }
			subtract_from_temp_variable = { temp = officers_purged_experience_cap }
			add_to_variable = { officers_purged_experience_cap = temp tooltip = officers_purged_experience_cap_TT }	
			add_ideas = {
				SOV_bad_tanks
			}	            
		}
		cancel_trigger = {
			custom_trigger_tooltip = {
				tooltip = republicans_win_scw
				has_global_flag = republican_victory
			}	
		}
		
		timeout_effect = {
			set_temp_variable = { purge = days_mission_timeout@SOV_spainish_civil_war_goal }
			divide_temp_variable = { purge = 487 }
			add_to_temp_variable = { purge = 1 }
			custom_effect_tooltip = officer_purge_change_TT
			
		 	set_temp_variable = { temp = officers_purged_train }
			multiply_temp_variable = { temp = purge }
			subtract_from_temp_variable = { temp = officers_purged_train }
			add_to_variable = { officers_purged_train = temp tooltip = officers_purged_train_TT }
			
		 	set_temp_variable = { temp = officers_purged_mobilization }
			multiply_temp_variable = { temp = purge }
			subtract_from_temp_variable = { temp = officers_purged_mobilization }
			add_to_variable = { officers_purged_mobilization = temp tooltip = officers_purged_mobilization_TT }
			
		 	set_temp_variable = { temp = officers_purged_command }
			multiply_temp_variable = { temp = purge }
			subtract_from_temp_variable = { temp = officers_purged_command }
			add_to_variable = { officers_purged_command = temp tooltip = officers_purged_command_TT }
			
		 	set_temp_variable = { temp = officers_purged_experience }
			multiply_temp_variable = { temp = purge }
			subtract_from_temp_variable = { temp = officers_purged_experience }
			add_to_variable = { officers_purged_experience = temp tooltip = officers_purged_experience_TT }
			
		 	set_temp_variable = { temp = officers_purged_experience_cap }
			multiply_temp_variable = { temp = purge }
			subtract_from_temp_variable = { temp = officers_purged_experience_cap }
			add_to_variable = { officers_purged_experience_cap = temp tooltip = officers_purged_experience_cap_TT }	
			add_ideas = {
				SOV_bad_tanks
			}			
		}
	}
}
SOV_tractors = {
	SOV_build_plant = {
		icon = generic_factory
		fire_only_once = no
		days_re_enable = 15
		complete_effect = {
			custom_effect_tooltip = extra_tractor_plant_tt
			add_to_variable = { tractor_plants = 1 }
			every_owned_state = {	
				limit = {
					industrial_complex > 0
				}
				remove_building = {
					type = industrial_complex
					level = 1
				}
				random_select_amount = 2
			}
		}
		visible	= {
			not = { has_country_flag = soviet_war }
		}
	}		
	SOV_distribute_tractors = {
		icon = generic_factory
		fire_only_once = no
		custom_cost_trigger = {
			check_variable = { tractor_stockpile > farm_tractors }
		}
		custom_cost_text = tractor_cost_farm_tractors
		visible = {
			OR = {
				has_idea = SOV_pre_industry_farms
				has_idea = SOV_pre_industry_farms_II
				has_idea = SOV_pre_industry_farms_III
				has_idea = SOV_pre_industry_farms_IV
				has_idea = SOV_pre_industry_farms_V
				has_idea = SOV_pre_industry_farms_VI
				has_idea = SOV_pre_industry_farms_VII
				has_idea = SOV_pre_industry_farms_VIII
				has_idea = SOV_pre_industry_farms_IX
				has_idea = SOV_pre_industry_farms_X
			}
		}
		ai_will_do = {
			factor = 50
		}
		days_re_enable = 55
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = farm_tractors tooltip = tractor_removed_tt}
			increase_farming_industry = yes
			add_to_variable = { farm_tractors = 500 }
		}	
	}
	SOV_distribute_tractors_collective = {
		name = SOV_distribute_tractors
		icon = generic_factory
		fire_only_once = yes
		custom_cost_trigger = {
			check_variable = { tractor_stockpile > farm_tractors }
		}
		custom_cost_text = tractor_cost_farm_tractors
		visible = {			
			NOT = {
				has_idea = SOV_pre_industry_farms
				has_idea = SOV_pre_industry_farms_II
				has_idea = SOV_pre_industry_farms_III
				has_idea = SOV_pre_industry_farms_IV
				has_idea = SOV_pre_industry_farms_V
				has_idea = SOV_pre_industry_farms_VI
				has_idea = SOV_pre_industry_farms_VII
				has_idea = SOV_pre_industry_farms_VIII
				has_idea = SOV_pre_industry_farms_IX
				has_idea = SOV_pre_industry_farms_X
			}
			has_idea = SOV_collective_farms
		}
		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = farm_tractors tooltip = tractor_removed_tt}
			remove_ideas = SOV_collective_farms			
		}	
	}
	SOV_distribute_tractors_production = {
		name = SOV_distribute_tractors
		icon = generic_factory
		fire_only_once = no	
		custom_cost_trigger = {
			check_variable = { tractor_stockpile > farm_tractors }
		}
		custom_cost_text = tractor_cost_farm_tractors
		visible = {			
			NOT = {
				has_idea = SOV_pre_industry_farms
				has_idea = SOV_pre_industry_farms_II
				has_idea = SOV_pre_industry_farms_III
				has_idea = SOV_pre_industry_farms_IV
				has_idea = SOV_pre_industry_farms_V
				has_idea = SOV_pre_industry_farms_VI
				has_idea = SOV_pre_industry_farms_VII
				has_idea = SOV_pre_industry_farms_VIII
				has_idea = SOV_pre_industry_farms_IX
				has_idea = SOV_pre_industry_farms_X
				has_idea = SOV_collective_farms
			}		
		}
		ai_will_do = {
			factor = 50
		}
		days_re_enable = 50
		days_remove = 70
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = farm_tractors tooltip = tractor_removed_tt}
			add_to_variable = { farm_tractors = 50 }	
			add_offsite_building = { type = arms_factory level = 4 }
		}
		remove_effect = {
			add_offsite_building = { type = arms_factory level = -4 }
		}
	}
	SOV_divert_mon_tractors = {
		icon = faction_bul_zveno
		fire_only_once = no
		allowed = {
			has_dlc = "Together for Victory" 
			OR = {
				has_dlc = "Waking the Tiger"
				has_dlc = "La Resistance"
			}
		}
		available = {
			MON = {
				is_subject_of = SOV
			}
		}	
		cosmetic_tag = MON
		visible = { 
		}
		ai_will_do = {
			factor = 50
		}
		days_re_enable = 100
		days_remove = 60
		modifier = {

		}	
		cost = 2		
		complete_effect = {
			MON = {
				add_autonomy_ratio = {
					value = 0.025
					localization = tractors_produced
				}
				add_timed_idea = {
					idea = soviet_tractor_puppets
					days = 60
				}
			}
		}
		remove_effect = {
			custom_effect_tooltip = tractors_added_150_tt
			add_to_variable = { tractor_stockpile = 150 }
		}
	}
	SOV_divert_tan_tractors = {
		icon = faction_bul_zveno
		fire_only_once = no
		allowed = {
			has_dlc = "Together for Victory" 
			OR = {
				has_dlc = "Waking the Tiger"
				has_dlc = "La Resistance"
			}
		}
		available = {
			TAN = {
				is_subject_of = SOV
			}
		}	
		
		cosmetic_tag = TAN
		visible = { 
		
		}
		ai_will_do = {
			factor = 50
		}
		days_re_enable = 100
		days_remove = 90
		modifier = {

		}		
		cost = 2
		complete_effect = {
			TAN = {
				add_autonomy_ratio = {
					value = 0.025
					localization = tractors_produced
				}
				add_timed_idea = {
					idea = soviet_tractor_puppets
					days = 90
				}
			}
		}
		remove_effect = {
			custom_effect_tooltip = tractors_added_150_tt
			add_to_variable = { tractor_stockpile = 150 }
		}
	}
	SOV_divert_sik_tractors = {
		icon = faction_bul_zveno
		fire_only_once = no
		allowed = {
			has_dlc = "Together for Victory" 
			OR = {
				has_dlc = "Waking the Tiger"
				has_dlc = "La Resistance"
			}
		}
		available = {
			SIK = {
				is_subject_of = SOV
			}
		}	
		cosmetic_tag = SIK
		visible = { 
			has_completed_focus = SOV_soviet_china
		}
		ai_will_do = {
			factor = 50
		}
		days_re_enable = 100
		days_remove = 75
		modifier = {

		}	
		cost = 2		
		complete_effect = {
			SIK = {
				add_autonomy_ratio = {
					value = 0.025
					localization = tractors_produced
				}
				add_timed_idea = {
					idea = soviet_tractor_puppets
					days = 75
				}
			}
		}
		remove_effect = {
			custom_effect_tooltip = tractors_added_100_tt
			add_to_variable = { tractor_stockpile = 100 }
		}
	}
	SOV_aid_industry_SIK = {
		icon = generic_industry
		fire_only_once = no
		allowed = { 
			has_dlc = "Together for Victory" 
		}
		available = {
			set_temp_variable = { temp = 5000 }
			custom_trigger_tooltip = {
				tooltip = tractor_available_tt
				check_variable = { tractor_stockpile > 4999 }
			}	
			OR = {
				has_completed_focus = SOV_soviet_china
				SIK = {
					has_completed_focus = SIK_sov_economic
				}				
			}	
		}	
		visible = { 
			SIK = {
				is_subject_of = SOV
				OR = {
					has_idea = incompetent_industry_real_5
					has_idea = incompetent_industry_real_4
					has_idea = incompetent_industry_real_3
					has_idea = incompetent_industry_real_2
					has_idea = incompetent_industry_real
				}
			}
		}
		ai_will_do = {
			base = 1
			modifier = {
				add = 49
				SIK = {
					is_ai = no
				}
			}
		}
		days_re_enable = 150
		modifier = {

		}	
		cost = 10		
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = 4999 tooltip = tractor_removed_tt}
		}
		remove_effect = {
			SIK = {
				add_autonomy_ratio = {
					value = -0.025
					localization = tractor_gift
				}	
				improve_incompetent_industry = yes
			}
		}
	}
	SOV_improve_land = {
		icon = generic_construction
		fire_only_once = no
		available = {	
			set_temp_variable = { temp = 1000 }
			custom_trigger_tooltip = {
				tooltip = tractor_available_tt
				check_variable = { tractor_stockpile > 999 }
			}	
		}
		days_re_enable = 105		
		custom_cost_trigger = {
			check_variable = { tractor_stockpile > 999 }
		}
		custom_cost_text = tractor_cost_1k
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = 1000 tooltip = tractor_removed_tt}
			random_owned_controlled_state = {
				limit = {
					OR = {
						has_state_category = wasteland
						has_state_category = rural
						has_state_category = pastoral
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = farm
					level = 1
					instant_build = yes
				}				
				add_manpower = 250		
			}
			add_stability = 0.025
		}	
	}
	SOV_aid_industry_PRC = {
		icon = generic_industry
		fire_only_once = no
		available = {
			set_temp_variable = { temp = 5000 }
			custom_trigger_tooltip = {
				tooltip = tractor_available_tt
				check_variable = { tractor_stockpile > 4999 }
			}	
			OR = {
				has_completed_focus = SOV_support_mao
				PRC = {
					has_completed_focus = PRC_supply_line_from_sov
					has_completed_focus = CHI_rapprochement_with_soviet_union
				}				
			}	
		}	
		cosmetic_tag = PRC
		ai_will_do = {
			base = 5
			modifier = {
				add = 45
				PRC = {
					is_ai = no
				}
			}
		}
		visible = { 
			PRC = {
				exists = yes
				OR = {
					has_idea = incompetent_industry_real_5
					has_idea = incompetent_industry_real_4
					has_idea = incompetent_industry_real_3
					has_idea = incompetent_industry_real_2
					has_idea = incompetent_industry_real
				}
			}
			NOT = {
				has_global_flag = SOV_JAP_neutrality
			}
			check_variable = { tractor_industry_PRC < 3 }
		}
		days_re_enable = 175
		modifier = {

		}	
		cost = 10		
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = 4999 tooltip = tractor_removed_tt}
		}
		remove_effect = {
			add_to_variable =  { tractor_industry_PRC = 1 }
			PRC = {	
				improve_incompetent_industry = yes
			}
		}
	}
	SOV_aid_industry_CHI = {
		icon = generic_industry
		fire_only_once = no
		available = {
			set_temp_variable = { temp = 6000 }
			custom_trigger_tooltip = {
				tooltip = tractor_available_tt
				check_variable = { tractor_stockpile > 5999 }
			}	
			OR = {
				has_completed_focus = SOV_operation_zet
				CHI = {
					has_completed_focus = KMT_sino_soviet_non_agression_pact
				}				
			}
		}	
		cosmetic_tag = CHI
		cosmetic_ideology = neutrality
		visible = { 
			CHI = {
				exists = yes
				OR = {
					has_idea = incompetent_industry_real_5
					has_idea = incompetent_industry_real_4
					has_idea = incompetent_industry_real_3
					has_idea = incompetent_industry_real_2
					has_idea = incompetent_industry_real
				}
			}
			NOT = {
				has_global_flag = SOV_JAP_neutrality
			}
			check_variable = { tractor_industry_CHI < 3 }
		}
		ai_will_do = {
			base = 10
			modifier = {
				add = 40
				CHI = {
					is_ai = no
				}
			}
		}
		days_re_enable = 175
		modifier = {

		}	
		cost = 10		
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = 5999 tooltip = tractor_removed_tt}
		}
		remove_effect = {
			CHI = {
				improve_incompetent_industry = yes
			}
			add_to_variable =  { tractor_industry_CHI = 1 }
		}
	}
	SOV_convert_tractors = {
		icon = generic_tank
		fire_only_once = no
		
		available = {
			set_temp_variable = { temp = 2500 }
			custom_trigger_tooltip = {
				tooltip = tractor_available_tt
				check_variable = { tractor_stockpile > 2499 }
			}	
		}

		custom_cost_trigger = {
			check_variable = { tractor_stockpile >2499 }
		}
		custom_cost_text = tractor_cost_2500
		modifier = {
			country_resource_cost_steel = 10
		}
		ai_will_do = {
			base = 0
		}
		days_re_enable = 50
		days_remove = 60
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = 2500 tooltip = tractor_removed_tt}
			
		}
		remove_effect = {
			add_equipment_to_stockpile = { type = trm_light_tank_chassis_sov_t26_1  amount = 50 producer = SOV } 
			add_equipment_to_stockpile = { type = trm_tankette_tank_chassis_sov_t27_1  amount = 50 producer = SOV } 
		}		
	}
	SOV_rebuild_spain = {
		icon = generic_construction
		fire_only_once = yes
		available = {	
			set_temp_variable = { temp = 2000 }
			custom_trigger_tooltip = {
				tooltip = tractor_available_tt
				check_variable = { tractor_stockpile > 1999 }
			}
			has_equipment = {
				convoy > 19
			}
		}
		visible = {
			SPR = {
				has_government = communism
				has_civil_war = no
			}
		}
		custom_cost_trigger = {
			check_variable = { tractor_stockpile > 1999 }
		}
		custom_cost_text = tractor_cost_2k
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = 2000 tooltip = tractor_removed_tt}
			add_offsite_building = { type = industrial_complex level = 2 }
			add_equipment_to_stockpile = {
				type = convoy_1
				amount = -20
			}
			SPR = {
				add_timed_idea = {
					idea = PRC_sov_assistance_in_industry
					days = 150
				}
			}			
		}
	}
}
operations = {
	SOV_train_officers = {
		icon = hol_war_on_pacifism
		fixed_random_seed = no
		
		allowed = { 
			OR = {
				TAG = SOV 
				TAG = MON
				TAG = SIK
			}
			OR = {
				has_dlc = "Waking the Tiger"
				has_dlc = "La Resistance"
			}
		}
		
		available = {
			hidden_trigger = { 
				command_power > 9.9
				has_army_experience > army_learns
			}
			has_stability > 0.25 
		}

		visible = {
			has_dynamic_modifier = {
				modifier = officers_purged
			}
			has_country_flag = purge_over
			if = {
				limit = {
					tag = SIK
				}
				has_completed_focus = SIK_purge2
			}
		}

		fire_only_once = no
		
		days_remove = 40
		
		modifier = {
            civilian_factory_use = 2
        }
		
		remove_effect = {
			if = {
				limit = {
					check_variable = { officers_choice < 1 }
				}
				custom_effect_tooltip = officer_purge_change_TT
				add_to_variable = { officers_purged_train = -0.01 tooltip = officers_purged_train_TT }
				add_to_variable = { officers_choice = 1 }
			}
			else_if = {
				limit = {
					check_variable = { officers_choice < 2 }
				}				
				custom_effect_tooltip = officer_purge_change_TT
				add_to_variable = { officers_purged_mobilization = 0.02 tooltip = officers_purged_mobilization_TT}
				add_to_variable = { officers_choice = 1 }
			}
			else_if = {
				limit = {
					check_variable = { officers_choice < 3 }
				}
				custom_effect_tooltip = officer_purge_change_TT
				add_to_variable = { officers_purged_command = 0.04 tooltip = officers_purged_command_TT}
				add_to_variable = { officers_choice = 1 }
			}
			else_if = {
				limit = {
					check_variable = { officers_choice < 4 }
				}
				custom_effect_tooltip = officer_purge_change_TT
				add_to_variable = { officers_purged_experience = 0.01 tooltip = officers_purged_experience_TT}
				add_to_variable = { officers_choice = 1 }
			}
			else_if = {
				limit = {
					check_variable = { officers_choice < 5 }
				}	
				custom_effect_tooltip = officer_purge_change_TT
				add_to_variable = { officers_purged_experience_cap = 2 tooltip = officers_purged_experience_cap_TT}
				add_to_variable = { officers_choice = 1 }
			}
			else = {
				custom_effect_tooltip = officer_purge_change_TT
				increase_red_army_doctrines = yes
				set_variable = { officers_choice = 0 }
			}
        }
		
		ai_will_do = {
			base = 50
		}
		complete_effect = {
			hidden_effect = {
				set_temp_variable = { cost = army_learns }
				multiply_temp_variable = { cost = -1 }
				add_command_power = -10 
				army_experience = cost
				if = {
					limit = {
						has_war_with_major = no
					}
					multiply_variable = { army_learns = 1.5 }
				}
				else = {
					set_variable = { army_learns = 5 }
				}
				round_variable = army_learns
			}
		}	
		custom_cost_trigger = {
			command_power > 9.9
			has_army_experience > army_learns
		}
		custom_cost_text = cp_10_army_learns
	}

	SOV_hard_lessons_army = {
		icon = eng_blackshirt_march
		
		allowed = { 
			OR = {
				TAG = SOV 
				TAG = MON
				TAG = SIK
			}
		}
		
		available = {
			hidden_trigger = { 
				if = {
					limit = {
						is_ai = no
					}
					has_army_experience > 49.9
				}
			}
		}

		visible = {
			has_dynamic_modifier = {
				modifier = red_army_purged
			}
		}

		fire_only_once = no
		
		days_remove = 25
		
		remove_effect = {
			custom_effect_tooltip = army_purge_change_TT
			
			if = {
				limit = {
					has_war_with_major = yes 
				}
				add_to_variable = { army_purge_defence = 0.01 tooltip = army_purge_defence_TT }
				add_to_variable = { army_purge_org = 0.01 tooltip = army_purge_org_TT }
				add_to_variable = { army_purge_morale = 0.01 tooltip = army_purge_morale_TT }
				add_to_variable = { army_purge_breakthough = 0.01 tooltip = army_purge_breakthough_TT }
				add_to_variable = { army_purge_width = -0.01 tooltip = army_purge_width_TT }
				add_to_variable = { army_purge_attrition = -0.05 tooltip = army_purge_attrition_TT }
				add_to_variable = { army_purge_tank_defense = 0.01 tooltip = army_purge_tank_defense_TT }
			}
			else = {
				set_temp_variable = { army_purge_defence_scaled = 0.01 }
				set_temp_variable = { army_purge_org_scaled = 0.02 }
				set_temp_variable = { army_purge_morale_scaled = 0.01 }
				set_temp_variable = { army_purge_breakthough_scaled = 0.01 }
				set_temp_variable = { army_purge_width_scaled = -0.01 }
				set_temp_variable = { army_purge_attrition_scaled = -0.05 }
				set_temp_variable = { army_purge_tank_defense_scaled = 0.01 }
				
				SOV_add_army_purge_scaled = yes
			}
        }
		
		ai_will_do = {
			base = 50
		}
		complete_effect = {
			hidden_effect = {
				army_experience = -50 
			}
		}		
		custom_cost_trigger = {
			if = {
				limit = {
					is_ai = no
				}
				has_army_experience > 49.9
			}
		}
		custom_cost_text = army_xp_50 
	}
	SOV_hard_lessons_air = {
		icon = generic_air
		
		allowed = { 
			OR = {
				TAG = SOV 
				TAG = MON
				TAG = SIK
			}
		}
		
		available = {
			hidden_trigger = { 
				has_air_experience > 49.9
			}
			if = {
				limit = {
					tag = SOV
				}
				OR = {
					has_completed_focus = SOV_sokoly
					has_completed_focus = SOV_air_design
					hidden_trigger = {
						is_ai = yes 
						date > 1941.1.1
					}
				}
			}
		}

		visible = {
			has_dynamic_modifier = {
				modifier = red_air_purged
			}
		}

		fire_only_once = no
		
		days_remove = 25
		
		remove_effect = {
			custom_effect_tooltip = air_purge_change_TT
			add_to_variable = { air_purge_xp = 0.01 tooltip = air_purge_xp_TT }
			add_to_variable = { air_purge_xp_max = 1 tooltip = air_purge_xp_max_TT }
			add_to_variable = { air_purge_sup = 0.01 tooltip = air_purge_sup_TT }
			add_to_variable = { air_purge_cas = 0.01 tooltip = air_purge_cas_TT }
			add_to_variable = { air_purge_strat = 0.01 tooltip = air_purge_strat_TT }
			add_to_variable = { air_purge_escort = 0.01 tooltip = air_purge_escort_TT }
			add_to_variable = { air_purge_intercept = 0.01 tooltip = air_purge_intercept_TT }
			add_to_variable = { air_purge_nav = 0.01 tooltip = air_purge_nav_TT }
			add_to_variable = { air_purge_ace = 0.01 tooltip = air_purge_ace_TT }
			add_to_variable = { air_purge_accident = -0.01 tooltip = air_purge_accident_TT }
			increase_red_air_doctrines = yes
        }
		
		ai_will_do = {
			base = 50
		}
		complete_effect = {
			hidden_effect = {
				air_experience = -50 
			}
		}		
		custom_cost_trigger = {
			has_air_experience > 49.9
		}
		custom_cost_text = air_xp_50 
	}
	SOV_hard_lessons_sea = {
		icon = generic_naval
		
		allowed = { 
			TAG = SOV 

		}
		
		available = {
			hidden_trigger = { 
				has_navy_experience > 49.9
			}
		}

		visible = {
			has_dynamic_modifier = {
				modifier = red_fleet_purged
			}
		}

		fire_only_once = no
		
		days_remove = 25
		
		remove_effect = {
			custom_effect_tooltip = navy_purge_change_TT
			add_to_variable = { nav_purge_caps = 0.01 tooltip = nav_purge_caps_TT }
			add_to_variable = { nav_purge_xp = 0.01 tooltip = nav_purge_xp_TT }
			add_to_variable = { nav_purge_convoy = 0.01 tooltip = nav_purge_convoy_TT }
			add_to_variable = { nav_purge_accident = -0.01 tooltip = nav_purge_accident_TT }
			add_to_variable = { nav_purge_sub = 0.01 tooltip = nav_purge_sub_TT }
			add_to_variable = { nav_purge_sortie = 0.01 tooltip = nav_purge_sortie_TT }
			add_to_variable = { nav_purge_air = 0.01 tooltip = nav_purge_air_TT }
			add_to_variable = { nav_purge_org = 0.01 tooltip = nav_purge_org_TT }
			add_to_variable = { nav_purge_hit = 0.01 tooltip = nav_purge_hit_TT }
			add_to_variable = { nav_purge_strike = 0.01 tooltip = nav_purge_strike_TT }
			add_to_variable = { nav_purge_retreat = 0.01 tooltip = nav_purge_retreat_TT }
			add_to_variable = { nav_purge_screen = 0.01 tooltip = nav_purge_screen_TT }
			increase_red_fleet_doctrines = yes
        }
		
		ai_will_do = {
			base = 40
		}
		complete_effect = {
			hidden_effect = {
				navy_experience = -50 
			}
		}		
		custom_cost_trigger = {
			has_navy_experience > 49.9
		}
		custom_cost_text = navy_xp_50
	}
}	
#Category only allowed for SOV
SOV_2nd_year_plan = {
    SOV_2nd_year_plan = {
		is_good = no
		icon = eng_trade_unions_demand

		fire_only_once = yes
		days_mission_timeout = 724
		
		priority = 1
		
        
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_2nd_civilian_factories
				check_variable = { num_owned_civilian_factories > civ_target }
			}
			custom_trigger_tooltip = {
				tooltip = SOV_2nd_steel_refineries
				#log = "[?num_refinery@steel] > [?steel_ref_target] || [?GER.num_refinery@steel]"
				OR = {
					check_variable = {num_refinery@steel > steel_ref_target} 
					check_variable = {num_refinery@steel > GER.num_refinery@steel} 
				}
			}
			custom_trigger_tooltip = {
				tooltip = SOV_2nd_rations_stored
				check_variable = { food > food_target }
			}
			845 = { #Moscow
				set_temp_variable = { buildings = THIS.building_level@industrial_complex }
				add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
				add_to_temp_variable = { buildings = THIS.building_level@dockyard }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard }
				add_to_temp_variable = { buildings = THIS.building_level@subyard }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
				custom_trigger_tooltip = {
						tooltip = SOV_moscov_build
						check_variable = { buildings > SOV.moscov_build }
				}	
				
			}
			195 = { #leningrad
				set_temp_variable = { buildings = THIS.building_level@industrial_complex }
				add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
				add_to_temp_variable = { buildings = THIS.building_level@dockyard }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard }
				add_to_temp_variable = { buildings = THIS.building_level@subyard }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
				custom_trigger_tooltip = {
						tooltip = SOV_lenin_build
						check_variable = { buildings > SOV.leningrad_build }
				}
			}
			hidden_trigger = {
				877 = { #kiev
					set_temp_variable = { buildings = THIS.building_level@industrial_complex }
					add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
					add_to_temp_variable = { buildings = THIS.building_level@dockyard }
					add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
					add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
					add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
					add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
					add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
					add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
					add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
					add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
					add_to_temp_variable = { buildings = THIS.building_level@shipyard }
					add_to_temp_variable = { buildings = THIS.building_level@subyard }
					add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
				}
				202 = {
					set_temp_variable = { buildings1 = THIS.building_level@industrial_complex }
					add_to_temp_variable = { buildings1 = THIS.building_level@arms_factory }
					add_to_temp_variable = { buildings1 = THIS.building_level@dockyard }
					add_to_temp_variable = { buildings1 = THIS.building_level@synthetic_refinery }
					add_to_temp_variable = { buildings1 = THIS.building_level@synthetic_rubber_refinery }
					add_to_temp_variable = { buildings1 = THIS.building_level@steel_refinery }
					add_to_temp_variable = { buildings1 = THIS.building_level@aluminium_refinery }
					add_to_temp_variable = { buildings1 = THIS.building_level@tank_assembly }
					add_to_temp_variable = { buildings1 = THIS.building_level@engine_assembly }
					add_to_temp_variable = { buildings1 = THIS.building_level@artillery_assembly }
					add_to_temp_variable = { buildings1 = THIS.building_level@air_assembly }
					add_to_temp_variable = { buildings1 = THIS.building_level@shipyard }
					add_to_temp_variable = { buildings1 = THIS.building_level@subyard }
					add_to_temp_variable = { buildings1 = THIS.building_level@shipyard_capital_building }
					
				} 
			}
			
			add_to_temp_variable = { buildings = buildings1 }
			custom_trigger_tooltip = {
				tooltip = SOV_kiev_build
				check_variable = { buildings > SOV.kiev_area_build }
			}
			239 = { #Saratov
				set_temp_variable = { buildings = THIS.building_level@industrial_complex }
				add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
				add_to_temp_variable = { buildings = THIS.building_level@dockyard }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard }
				add_to_temp_variable = { buildings = THIS.building_level@subyard }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
				custom_trigger_tooltip = {
						tooltip = SOV_saratov_build
						check_variable = { buildings > SOV.saratov_build }
				}
			}
			206 = { #minsk
				set_temp_variable = { buildings = THIS.building_level@industrial_complex }
				add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
				add_to_temp_variable = { buildings = THIS.building_level@dockyard }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard }
				add_to_temp_variable = { buildings = THIS.building_level@subyard }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
				custom_trigger_tooltip = {
						tooltip = SOV_minsk_build
						check_variable = { buildings > SOV.minsk_build }
				}
			}	
			252 = { #Gorki
				set_temp_variable = { buildings = THIS.building_level@industrial_complex }
				add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
				add_to_temp_variable = { buildings = THIS.building_level@dockyard }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard }
				add_to_temp_variable = { buildings = THIS.building_level@subyard }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
				custom_trigger_tooltip = {
						tooltip = SOV_gorki_build
						check_variable = { buildings > SOV.gorki_build }
				}
			}
			224 = { #bryansk
				set_temp_variable = { buildings = THIS.building_level@industrial_complex }
				add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
				add_to_temp_variable = { buildings = THIS.building_level@dockyard }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard }
				add_to_temp_variable = { buildings = THIS.building_level@subyard }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
				custom_trigger_tooltip = {
						tooltip = SOV_bryansk_build
						check_variable = { buildings > SOV.bryansk_build }
				}
			}			
			217 = { #stalingrad
				set_temp_variable = { buildings = THIS.building_level@industrial_complex }
				add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
				add_to_temp_variable = { buildings = THIS.building_level@dockyard }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard }
				add_to_temp_variable = { buildings = THIS.building_level@subyard }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
				custom_trigger_tooltip = {
						tooltip = SOV_stalingrad_build
						check_variable = { buildings > SOV.stalingrad_build }
				}
			}			
			137 = { #crimea
				set_temp_variable = { buildings = THIS.building_level@industrial_complex }
				add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
				add_to_temp_variable = { buildings = THIS.building_level@dockyard }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard }
				add_to_temp_variable = { buildings = THIS.building_level@subyard }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
				custom_trigger_tooltip = {
						tooltip = SOV_crimea_build
						check_variable = { buildings > SOV.crimea_build }
				}
			}
			221 = { #kharkov
				set_temp_variable = { buildings = THIS.building_level@industrial_complex }
				add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
				add_to_temp_variable = { buildings = THIS.building_level@dockyard }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
				add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard }
				add_to_temp_variable = { buildings = THIS.building_level@subyard }
				add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
				custom_trigger_tooltip = {
						tooltip = SOV_kharkov_build
						check_variable = { buildings > SOV.kharkov_build }
				}
			}
			set_temp_variable = { fuel_target_in_k = fuel_target }
			divide_temp_variable = { fuel_target_in_k = 1000 }
			custom_trigger_tooltip = {
				tooltip = SOV_2nd_resource_fuel
				
				has_fuel > fuel_target
			}
			
			set_temp_variable = { num_iron = resource_produced@iron }
			add_to_temp_variable = { num_iron = export_offset@iron }
			custom_trigger_tooltip = {
				tooltip = SOV_2nd_resource_iron
				
				check_variable = { num_iron > iron_target } 
			}
			
			set_temp_variable = { num_coal = resource_produced@coal }
			add_to_temp_variable = { num_coal = export_offset@coal }
			add_to_temp_variable = { num_coal = energy_input@coal }
			custom_trigger_tooltip = {
				tooltip = SOV_2nd_resource_coal
				check_variable = { num_coal > coal_target } 
			}
			custom_trigger_tooltip = {
					tooltip = SOV_2nd_resource_oil
					check_variable = { resource_produced@oil > oil_target }
			}	
			custom_trigger_tooltip = {
					tooltip = SOV_2nd_tractors
					check_variable = { tractors_produced > tractor_target }
			}			
		}	
		activation = {
			has_idea = SOV_2nd_year_plan
		}

		complete_effect = {
            add_war_support= 0.10
			add_stability = 0.30
			add_research_slot = 1
			add_research_centre = yes
			SLOT:industry_folder = yes
			remove_ideas = SOV_2nd_year_plan
		}
		
		timeout_effect = {
			if = {
				limit = {
					check_variable = { num_owned_civilian_factories < civ_target }
				}
				add_to_variable = { wrecker_problem = 1 }
			}
			if = {
				limit = {
					check_variable = { food < food_target }
				}
				add_to_variable = { wrecker_problem = 1 }
			}
			if = {
				limit = {
					check_variable = {num_refinery@steel < steel_ref_target} 
					check_variable = {num_refinery@steel < GER.num_refinery@steel} 
				}
				add_to_variable = { wrecker_problem = 1 }
			}
			if = {
				limit = {
					845 = { #Moscow
						set_temp_variable = { buildings = THIS.building_level@industrial_complex }
						add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
						add_to_temp_variable = { buildings = THIS.building_level@dockyard }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard }
						add_to_temp_variable = { buildings = THIS.building_level@subyard }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
						check_variable = { buildings < SOV.moscov_build }					
					}
				}
				add_to_variable = { wrecker_problem = 1 }
			}
			if = {
				limit = {
					195 = { #leningrad
						set_temp_variable = { buildings = THIS.building_level@industrial_complex }
						add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
						add_to_temp_variable = { buildings = THIS.building_level@dockyard }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard }
						add_to_temp_variable = { buildings = THIS.building_level@subyard }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
						check_variable = { buildings < SOV.leningrad_build }
					}
				}
				add_to_variable = { wrecker_problem = 1 }
			}			
			if = {
				limit = {
					877 = { #kiev
						set_temp_variable = { buildings = THIS.building_level@industrial_complex }
						add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
						add_to_temp_variable = { buildings = THIS.building_level@dockyard }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard }
						add_to_temp_variable = { buildings = THIS.building_level@subyard }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
					}
					202 = {
						add_to_temp_variable = { buildings = THIS.building_level@industrial_complex }
						add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
						add_to_temp_variable = { buildings = THIS.building_level@dockyard }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard }
						add_to_temp_variable = { buildings = THIS.building_level@subyard }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
						check_variable = { buildings < SOV.kiev_area_build }
					}
				}
				add_to_variable = { wrecker_problem = 1 }
			}	
			if = {
				limit = {
					239 = { #Saratov
						set_temp_variable = { buildings = THIS.building_level@industrial_complex }
						add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
						add_to_temp_variable = { buildings = THIS.building_level@dockyard }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard }
						add_to_temp_variable = { buildings = THIS.building_level@subyard }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
						check_variable = { buildings < SOV.saratov_build }
					}
				}
				add_to_variable = { wrecker_problem = 1 }
			}	
			if = {
				limit = {		
					206 = { #minsk
						set_temp_variable = { buildings = THIS.building_level@industrial_complex }
						add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
						add_to_temp_variable = { buildings = THIS.building_level@dockyard }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard }
						add_to_temp_variable = { buildings = THIS.building_level@subyard }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
						check_variable = { buildings < SOV.minsk_build }
					}
				}
				add_to_variable = { wrecker_problem = 1 }
			}		
			if = {
				limit = {			
					252 = { #Gorki
						set_temp_variable = { buildings = THIS.building_level@industrial_complex }
						add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
						add_to_temp_variable = { buildings = THIS.building_level@dockyard }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard }
						add_to_temp_variable = { buildings = THIS.building_level@subyard }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
						check_variable = { buildings < SOV.gorki_build }
					}
				}
				add_to_variable = { wrecker_problem = 1 }
			}
			if = {
				limit = {	
					224 = { #bryansk
						set_temp_variable = { buildings = THIS.building_level@industrial_complex }
						add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
						add_to_temp_variable = { buildings = THIS.building_level@dockyard }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard }
						add_to_temp_variable = { buildings = THIS.building_level@subyard }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
						check_variable = { buildings < SOV.bryansk_build }
					}	
				}
				add_to_variable = { wrecker_problem = 1 }
			}	
			if = {
				limit = {		
					217 = { #stalingrad
						set_temp_variable = { buildings = THIS.building_level@industrial_complex }
						add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
						add_to_temp_variable = { buildings = THIS.building_level@dockyard }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard }
						add_to_temp_variable = { buildings = THIS.building_level@subyard }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
						check_variable = { buildings < SOV.stalingrad_build }
					}
				}
				add_to_variable = { wrecker_problem = 1 }
			}
			if = {
				limit = {
					137 = { #crimea
						set_temp_variable = { buildings = THIS.building_level@industrial_complex }
						add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
						add_to_temp_variable = { buildings = THIS.building_level@dockyard }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard }
						add_to_temp_variable = { buildings = THIS.building_level@subyard }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
						check_variable = { buildings < SOV.crimea_build }
					}
				}
				add_to_variable = { wrecker_problem = 1 }
			}
			if = {
				limit = {			
					221 = { #kharkov
						set_temp_variable = { buildings = THIS.building_level@industrial_complex }
						add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
						add_to_temp_variable = { buildings = THIS.building_level@dockyard }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
						add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard }
						add_to_temp_variable = { buildings = THIS.building_level@subyard }
						add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
						check_variable = { buildings < SOV.kharkov_build }
					}
				}
				add_to_variable = { wrecker_problem = 1 }
			}
			if = {
				limit = {		
					has_fuel < fuel_target
				}
				add_to_variable = { wrecker_problem = 1 }
			}
			if = {
				limit = {	
					set_temp_variable = { checker = iron_target }
					subtract_from_temp_variable = { checker = export_offset@iron  } # export offset removed
					check_variable = { resource_produced@iron < checker } 
				}
				add_to_variable = { wrecker_problem = 1 }
			}
			if = {
				limit = {	
					set_temp_variable = { checker = coal_target }
					subtract_from_temp_variable = { checker = energy_input@coal } # coal used for energy removed
					#subtract_from_temp_variable = { t = train_use@coal } # coal used for traisn removed
					subtract_from_temp_variable = { checker = export_offset@coal  } # export offset removed
					check_variable = { resource_produced@coal < checker } 
				}
				add_to_variable = { wrecker_problem = 1 }
			}
			if = {
				limit = {	
					set_temp_variable = { checker = oil_target }
					subtract_from_temp_variable = { checker = 15 } #oil is removed from the idea
					check_variable = { resource_produced@oil < checker } 
				}
				add_to_variable = { wrecker_problem = 1 }
			}	
			if = {
				limit = {	
					check_variable = { tractors_produced < tractor_target }
				}
				add_to_variable = { wrecker_problem = 1 }
			}	
		    country_event = { id = soviet.3	days = 5 }
		}   
	}
	year_blat = {

		icon = hol_exchange_intelligence_data
		

		available = {
						
		}

		cost = 15
		days_re_enable = 30
		fire_only_once = no

		ai_will_do = {
			factor = 0
		}
		
		visible = {
			has_idea = SOV_2nd_year_plan
			has_completed_focus = SOV_blat
		}
		modifier = {	
			communism_drift = -0.03
			trade_opinion_factor = -0.05
			political_power_cost = 0.05
		}		
		days_remove = 42
		
		complete_effect = {
			custom_effect_tooltip = tractor_economy_tougher
			add_to_variable = { tractor_blat = 1 }
		    multiply_variable = { part_econ_tractors_target = 1.1 }
			round_variable = part_econ_tractors_target
			multiply_variable = { war_economy_tractors_target = 1.1 }
			round_variable = war_economy_tractors_target
			multiply_variable = { farm_tractors = 1.05 }
			round_variable = farm_tractors
			multiply_variable = { fort_tractors = 1.05 }
			round_variable = fort_tractors
		}
		remove_effect = {
			custom_effect_tooltip = plan_easier_TT
			hidden_effect = {
				random_list = {
					5 = {
						subtract_from_variable = { civ_target = 1 }
						modifier = {
							factor = 0
							num_of_civilian_factories > civ_target
						}
					}				
					20 = {
						subtract_from_variable = { moscov_build = 1 }
						modifier = {
							factor = 0
							845 = { #Moscow
								set_temp_variable = { buildings = THIS.building_level@industrial_complex }
								add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
								add_to_temp_variable = { buildings = THIS.building_level@dockyard }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard }
								add_to_temp_variable = { buildings = THIS.building_level@subyard }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
								check_variable = { buildings > SOV.moscov_build }					
							}
						}
					}
					20 = {
						subtract_from_variable = { leningrad_build = 1 }
						modifier = {
							factor = 0
							195 = { #leningrad
								set_temp_variable = { buildings = THIS.building_level@industrial_complex }
								add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
								add_to_temp_variable = { buildings = THIS.building_level@dockyard }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard }
								add_to_temp_variable = { buildings = THIS.building_level@subyard }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
								check_variable = { buildings > SOV.leningrad_build }
							}
						}
					}
					20 = {
						subtract_from_variable = { kiev_area_build = 1 }
						modifier = {
							factor = 0
							877 = { #kiev
								set_temp_variable = { buildings = THIS.building_level@industrial_complex }
								add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
								add_to_temp_variable = { buildings = THIS.building_level@dockyard }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard }
								add_to_temp_variable = { buildings = THIS.building_level@subyard }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
							}
							202 = {
								add_to_temp_variable = { buildings = THIS.building_level@industrial_complex }
								add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
								add_to_temp_variable = { buildings = THIS.building_level@dockyard }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard }
								add_to_temp_variable = { buildings = THIS.building_level@subyard }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
								check_variable = { buildings > SOV.kiev_area_build }
							}
						}
					}
					20 = {
						subtract_from_variable = { saratov_build = 1 }
						modifier = {
							factor = 0
							239 = { #Saratov
								set_temp_variable = { buildings = THIS.building_level@industrial_complex }
								add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
								add_to_temp_variable = { buildings = THIS.building_level@dockyard }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard }
								add_to_temp_variable = { buildings = THIS.building_level@subyard }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
								check_variable = { buildings > SOV.saratov_build }
							}
						}
					}
					20 = {
						subtract_from_variable = { minsk_build = 1 }
						modifier = {
							factor = 0
							206 = { #minsk
								set_temp_variable = { buildings = THIS.building_level@industrial_complex }
								add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
								add_to_temp_variable = { buildings = THIS.building_level@dockyard }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard }
								add_to_temp_variable = { buildings = THIS.building_level@subyard }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
								check_variable = { buildings > SOV.minsk_build }
							}
						}
					}
					20 = {
						subtract_from_variable = { gorki_build = 1 }
						modifier = {
							factor = 0
							252 = { #Gorki
								set_temp_variable = { buildings = THIS.building_level@industrial_complex }
								add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
								add_to_temp_variable = { buildings = THIS.building_level@dockyard }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard }
								add_to_temp_variable = { buildings = THIS.building_level@subyard }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
								check_variable = { buildings > SOV.gorki_build }
							}
						}
					}
					20 = {
						subtract_from_variable = { bryansk_build = 1 }
						modifier = {
							factor = 0
							224 = { #bryansk
								set_temp_variable = { buildings = THIS.building_level@industrial_complex }
								add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
								add_to_temp_variable = { buildings = THIS.building_level@dockyard }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard }
								add_to_temp_variable = { buildings = THIS.building_level@subyard }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
								check_variable = { buildings > SOV.bryansk_build }
							}
						}
					}
					20 = {
						subtract_from_variable = { stalingrad_build = 1 }
						modifier = {
							factor = 0
							217 = { #stalingrad
								set_temp_variable = { buildings = THIS.building_level@industrial_complex }
								add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
								add_to_temp_variable = { buildings = THIS.building_level@dockyard }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard }
								add_to_temp_variable = { buildings = THIS.building_level@subyard }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
								check_variable = { buildings > SOV.stalingrad_build }
							}
						}
					}
					20 = {
						subtract_from_variable = { crimea_build = 1 }
						modifier = {
							factor = 0
							137 = { #crimea
								set_temp_variable = { buildings = THIS.building_level@industrial_complex }
								add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
								add_to_temp_variable = { buildings = THIS.building_level@dockyard }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard }
								add_to_temp_variable = { buildings = THIS.building_level@subyard }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
								check_variable = { buildings > SOV.crimea_build }
							}
						}
					}
					20 = {
						subtract_from_variable = { kharkov_build = 1 }
						modifier = {
							factor = 0
							221 = { #kharkov
								set_temp_variable = { buildings = THIS.building_level@industrial_complex }
								add_to_temp_variable = { buildings = THIS.building_level@arms_factory }
								add_to_temp_variable = { buildings = THIS.building_level@dockyard }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@synthetic_rubber_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@steel_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@aluminium_refinery }
								add_to_temp_variable = { buildings = THIS.building_level@tank_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@engine_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@artillery_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@air_assembly }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard }
								add_to_temp_variable = { buildings = THIS.building_level@subyard }
								add_to_temp_variable = { buildings = THIS.building_level@shipyard_capital_building }
								check_variable = { buildings > SOV.kharkov_build }
							}
						}
					}
					10 = {
						subtract_from_variable = { fuel_target = 180000 }
						modifier = {
							factor = 0
							has_fuel > fuel_target

						}
					}
					10 = {
						subtract_from_variable = { iron_target = 80 }
						modifier = {
							factor = 0
							set_temp_variable = { checker = iron_target }
							subtract_from_temp_variable = { checker = export_offset@iron  } # export offset removed
							check_variable = { resource_produced@iron > checker } 
						}
					}
					10 = {
						subtract_from_variable = { coal_target = 60 }
						modifier = {
							factor = 0
							set_temp_variable = { checker = coal_target }
							subtract_from_temp_variable = { checker = energy_input@coal } # coal used for energy removed
							#subtract_from_temp_variable = { checker = train_use@coal } # coal used for traisn removed
							subtract_from_temp_variable = { checker = export_offset@coal  } # export offset removed
							check_variable = { resource_produced@coal > checker } 
						}
					}
					10 = {
						subtract_from_variable = { oil_target = 10 }
						modifier = {
							factor = 0
							set_temp_variable = { checker = oil_target }
							subtract_from_temp_variable = { checker = 15 } #oil is removed from the idea
							check_variable = { resource_produced@oil > checker } 

						}
					}	
				}
			}
		}
	}
	Gosplan_heavy_industry_plan = {

		icon = generic_factory
		

		available = {
			has_idea = SOV_2nd_year_plan
			not = { 
			    has_country_flag = Gosplan_investors
			}
		}
		cost = 75
		days_re_enable = 50
		fire_only_once = no

		ai_will_do = {
			factor = 50
		}
		
		visible = {
			has_idea = SOV_2nd_year_plan
		}
		
		days_remove = 70
		
		complete_effect = {
		    set_country_flag = Gosplan_investors
			random_owned_controlled_state = {
                limit = {
					or = {
						state = 845 
						state = 195 
						state = 217 
						state = 877 
						state = 202 
						state = 239 
						state = 206 
						state = 252 
						state = 224 
						state = 137 
						state = 221
					}
				}
                add_extra_state_shared_building_slots = 4 
                add_building_construction = {
                    type = steel_refinery
                    level = 4 
                    instant_build = yes
                }
			}
		}
		remove_effect = {
			clr_country_flag = Gosplan_investors
		}
	}
	Gosplan_Energy_plan = {

		icon = generic_construction
		

		available = {
			has_idea = SOV_2nd_year_plan
			not = { 
			    has_country_flag = Gosplan_investors
			}
		}

		cost = 75
		
		fire_only_once = yes

		ai_will_do = {
			factor = 50
		}
		
		visible = {
			has_idea = SOV_2nd_year_plan
		}
		
		days_remove = 70
	
		complete_effect = {
		    set_country_flag = Gosplan_investors
			random_owned_controlled_state = {
                limit = {
					or = {
						region = 134 
						region = 135
						region = 264
						region = 268
						region = 133
						region = 251
						region = 271
					}
                }
                add_extra_state_shared_building_slots = 2 
                add_building_construction = {
                    type = fuel_silo
                    level = 1 
                    instant_build = yes
                }
            }
			random_owned_controlled_state = {
                limit = {
                  or = {
						region = 134 
						region = 135
						region = 264
						region = 268
						region = 133
						region = 251
						region = 271
					}
				}
                add_extra_state_shared_building_slots = 1 
                add_building_construction = {
                    type = fuel_silo
                    level = 1 
                    instant_build = yes
                }
            }
			random_owned_controlled_state = {
                limit = {
                  or = {
						region = 134 
						region = 135
						region = 264
						region = 268
						region = 133
						region = 251
						region = 271
					}
				}
                add_extra_state_shared_building_slots = 1
                add_building_construction = {
                    type = fuel_silo
                    level = 1 
                    instant_build = yes
                }
            }
			
		}
		remove_effect = {
			clr_country_flag = Gosplan_investors
		}
	}
	Foreign_investors = {

		icon = gre_investment_decisions
		

		available = {
			has_idea = SOV_2nd_year_plan
			not = { 
			    has_country_flag = Foreign_investment
			}
		}

		cost = 75
		
		fire_only_once = no
		
		ai_will_do = {
			factor = 50
		}
		
		visible = {
			has_idea = SOV_2nd_year_plan
		}
		
		days_remove = 125
		days_re_enable = 50

	
		complete_effect = {
		    set_country_flag = Foreign_investment
			random_owned_controlled_state = {
                limit = {
					or = {
						state = 845 
						state = 195 
						state = 217 
						state = 877 
						state = 202 
						state = 239 
						state = 206 
						state = 252 
						state = 224 
						state = 137 
						state = 221
					}
                }
                add_extra_state_shared_building_slots = 3 
                add_building_construction = {
                    type = industrial_complex
                    level = 2 
                    instant_build = yes
                }
            }
			if = {
				limit = {
					is_ai = no
				}
				add_stability = -0.05
			}
		}
		remove_effect = {
			clr_country_flag = Foreign_investment
		}
	}
    Foreign_investors2 = {

		icon = gre_investment_decisions
		

		available = {
			has_idea = SOV_2nd_year_plan
            not = { 
			    has_country_flag = Foreign_investment
			}
		}

		cost = 75
		
		fire_only_once = no

		ai_will_do = {
			factor = 50
		}
		
		visible = {
			has_idea = SOV_2nd_year_plan
		}
		
		days_remove = 120
		days_re_enable = 50

	
		complete_effect = {
		    set_country_flag = Foreign_investment
			random_owned_controlled_state = {
                limit = {
					or = {
						state = 845 
						state = 195 
						state = 217 
						state = 877 
						state = 202 
						state = 239 
						state = 206 
						state = 252 
						state = 224 
						state = 137 
						state = 221
					}
                }
                add_extra_state_shared_building_slots = 4 
                add_building_construction = {
                    type = arms_factory
                    level = 4
                    instant_build = yes
                }
            }
			if = {
				limit = {
					is_ai = no
				}
				add_stability = -0.05
				#add_popularity = {
				#	ideology = bad_ideology
				#	popularity = 0.01
				#}
			}	
		}
		remove_effect = {
			clr_country_flag = Foreign_investment
		}
	}
    Foreign_investors3 = {

		icon = logi_operation
		

		available = {
			has_idea = SOV_2nd_year_plan
		}

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > 500 }
		}
		custom_cost_text = tractor_cost_500
		
		fire_only_once = no

		ai_will_do = {
			factor = 20
		}
		
		visible = {
			has_idea = SOV_2nd_year_plan
		}
		
		days_remove = 25
		days_re_enable = 50
	
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = 500 tooltip = tractor_removed_tt}
			random_owned_controlled_state = {
				limit = {
					infrastructure < 8
					infrastructure > 4				
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			add_stability = -0.02
		}
	}
}
economy_decisions = {
	buy_USA = {
		icon = generic_research

		allowed = { 
			TAG = SOV 
		}

        fire_only_once = yes
		cost = 50
		

        available = {
			not = { has_war_with = USA }
			has_tech = construction1
        }
		cosmetic_tag = USA_48

        visible = {
			has_country_flag = league_member			
		}		
		days_remove = 125		
		modifier = {	
			civilian_factory_use = 9
		}
		complete_effect = {
			
			add_to_tech_sharing_group = comintern_industry
			USA = {
				set_country_flag = soviet_payment
				add_offsite_building = { type = industrial_complex level = 9 }
				add_to_tech_sharing_group = comintern_industry
				add_ideas = SOV_buy_tech			
			}
		}

        remove_effect = {		
			remove_from_tech_sharing_group = comintern_industry
			USA = {
				clr_country_flag = soviet_payment
				remove_from_tech_sharing_group = comintern_industry
				add_offsite_building = { type = industrial_complex level = -9 }
			}
			add_tech_bonus = {
				name = USA_aid_bonus
				bonus = 0.75
				uses = 1
				category = industry
			}	
		}
		
		ai_will_do = {
			base = 20
		}
    }
	buy_SWE = {
		icon = generic_research

		allowed = { 
			TAG = SOV 
		}

        fire_only_once = yes
		cost = 50
		

        available = {
			not = { has_war_with = SWE }
			has_tech = construction1
        }
		cosmetic_tag = SWE
		cosmetic_ideology = socialism

        visible = {
			has_country_flag = league_member
		}		
		days_remove = 125		
		modifier = {	
			civilian_factory_use = 7
		}
		complete_effect = {
			
			add_to_tech_sharing_group = comintern_industry
			SWE = {
				set_country_flag = soviet_payment
				add_offsite_building = { type = industrial_complex level = 7 }
				add_to_tech_sharing_group = comintern_industry
				add_ideas = SOV_buy_tech			
			}
		}

        remove_effect = {		
			remove_from_tech_sharing_group = comintern_industry
			SWE = {
				add_offsite_building = { type = industrial_complex level = -7 }
				clr_country_flag = soviet_payment
				remove_from_tech_sharing_group = comintern_industry
			}
			add_tech_bonus = {
				name = SWE_aid_bonus
				bonus = 0.55
				uses = 1
				category = industry
			}			
		}
		
		ai_will_do = {
			base = 20
		}
    }
	buy_GER = {
		icon = generic_research

		allowed = { 
			TAG = SOV 
		}

        fire_only_once = yes
		cost = 75
		

        available = {
			not = { has_war_with = GER }
        }
		cosmetic_tag = GER
		cosmetic_ideology = fascism

        visible = {
			has_country_flag = mr_accepted
		}		
		days_remove = 125		
		modifier = {	
			civilian_factory_use = 12
		}
		complete_effect = {
			
			add_to_tech_sharing_group = comintern_industry
			GER = {
				add_offsite_building = { type = industrial_complex level = 12 }
				add_to_tech_sharing_group = comintern_industry
				add_ideas = SOV_buy_tech			
			}
		}

        remove_effect = {			
			remove_from_tech_sharing_group = comintern_industry
			GER = {
				add_offsite_building = { type = industrial_complex level = -12 }
				remove_from_tech_sharing_group = comintern_industry
			}
			steal_random_tech_bonus = {
				folder = industry_folder
				instant = yes
				target = GER
				uses = 1
			}
			add_tech_bonus = {
				name = GER_aid_bonus
				bonus = 0.35
				uses = 1
				category = industry
			}				
		}
		
		ai_will_do = {
			base = 0
		}
    }
}	

operations = {
	
	SOV_honour_MR_pact = {

		allowed = { always = no }

		icon = ger_mefo_bills

		available = {
			FROM = {
				has_war_with = POL
				POL = {
					surrender_progress > 0.25
					has_capitulated = no
				}
			}
		}

		#cost = GER_mefo_bill_counter?10

		#selectable_mission = yes
		#days_mission_timeout = 16
		
		fire_only_once = yes

		cancel_trigger = {
			hidden_trigger = {
				has_war_with = FROM
			}
		}
		
		modifier = {
			war_support_weekly = 0.002
		}

		days_remove = 30

		complete_effect = {
			hidden_effect = {
				set_country_flag = mr_accepted
				mark_focus_tree_layout_dirty = yes
				POL = {
					leave_faction = yes
					add_ideas = no_joining_AI
				}
				TUR = {
					add_ideas = TUR_stagnated
					add_ideas = TUR_black_market
				}
				every_country = {
					limit = { NOT = { tag = POL } }
					diplomatic_relation = {
	   					country = POL
	   					relation = guarantee
	   					active = no
	  				}
					if = {
						limit = {
							is_in_faction_with = ENG
						}
						add_ideas = no_joining_AI
						set_truce = {
							target = SOV
							days = 14
						}
						#add_ai_strategy = {
						#	type = declare_war
						#	id = SOV
						#	value = -9999
						#}
						#add_ai_strategy = {
						#	type = antagonize
						#	id = SOV
						#	value = -9999
						#}
						#add_ai_strategy = {
						#	type = conquer
						#	id = SOV
						#	value = -9999
						#}
						add_ai_strategy = {
							type = dont_join_wars_with
							id = POL
							target_country = SOV
							value = 5000
						}
						#diplomatic_relation = {
						#	country = SOV
						#	relation = non_aggression_pact
						#	active = yes
						#}
					}
				}
				ENG = { add_to_faction = POL }
				#POL = { 
				#	create_faction = "Poland"
				#	set_country_flag = was_allies
				#}
			}
						
			declare_war_on = {
				target = POL
				type = take_state_focus
				generator = { 840 96 95 97 94 93 91 89 } 
			}
			effect_tooltip = {	
				add_to_war = { 
					targeted_alliance = GER 
					enemy = POL 
					hostility_reason = asked_to_join
				}
			}
			
			custom_effect_tooltip = ON_WAR_POL_TOO_WEAK
		}

		timeout_effect = {
			FROM = { 
				set_country_flag = SOV_MR_NO_ATTACK
				country_event = soviet.63 #Soviets didnt honour the MR pact
			}
			add_war_support = -0.3
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = 100 
				GER = {
					has_country_flag = {
						flag = case_white
						days > 15 
					}
				}
			}
			modifier = {
				add = 1
				POL = {
					surrender_progress > 0.4
				}
			}
			modifier = {
				add = 100 
				POL = {
					surrender_progress > 0.5
				}
			}
		}
	}

	SOV_seize_manchuria = {

		icon = generic_operation

		allowed = {
			original_tag = SOV
		}

		available = {
			MAN = { is_puppet = no }
			NOT = {
				has_war_with = MAN
			}
		}

		cost = 25
		fire_only_once = yes
		visible = {
			has_global_flag = had_yalta
			MAN = { exists = yes }
		}

		complete_effect = {
			create_wargoal = {
				target = MAN
				type = annex_everything
			}			
		}

		ai_will_do = {
			factor = 1
			modifier = {
				MAN = {
					is_ai = no
				}
				factor = 0 #we're mean but not that mean
			}
			modifier = {
				threat < 0.25
				factor = 0
			}
		}
	}
}

political_actions = {

	SOV_return_manchuria = {

		allowed = {
			original_tag = SOV
		}

		available = {
			OR = {
				AND = {
					owns_state = 610
					owns_state = 716
					owns_state = 328
					owns_state = 715
					owns_state = 714
					owns_state = 717
				}
				AND = {
					MAN = { is_puppet_of = SOV }
					owns_state = 610
					owns_state = 716
					owns_state = 328
					owns_state = 715
					owns_state = 714
					owns_state = 717
				}
			}
		}
		cost = 0
		fire_only_once = yes
		visible = {
			has_war_with = JAP
			PRC = { exists = yes }
		}

		complete_effect = {
			PRC = { 
				transfer_state = 609
				transfer_state = 610
				transfer_state = 716
				transfer_state = 715
				transfer_state = 328
				transfer_state = 717
				transfer_state = 714
				country_event = { id = wtt_japan.125 }
			}		
		}

		ai_will_do = {
			factor = 1
		}
	}	
}
prospect_for_resources = {
	develop_leningrad_aluminium_deposits = { #195
		icon = aluminium
		
		allowed = {
			original_tag = SOV
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 195
			}
		}

		available = {
			num_of_civilian_factories_available_for_projects > 1
			has_tech = excavation2
		}
		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		visible = {
			195 = { 
				NOT = { has_state_flag = leningrad_aluminium_developed } 
				is_controlled_by_ROOT_or_subject = yes
			}
		}

		fire_only_once = yes

		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 2.2
				EAI_resource_prospecting/aluminium = yes 
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
		}
		remove_effect = {
			195 = {
				add_resource = {
					type = bauxite
					amount = 32
				}
				set_state_flag = leningrad_aluminium_developed				
			}
		}
	}
	develop_kamensk_aluminium_deposits = { #653
		icon = aluminium
		
		allowed = {
			original_tag = SOV
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 653
			}
		}

		available = {
			num_of_civilian_factories_available_for_projects > 1
			has_tech = excavation2
		}

		visible = {
			653 = { 
				NOT = { has_state_flag = kamensk_aluminium_developed } 
				is_controlled_by_ROOT_or_subject = yes
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 2.2
				EAI_resource_prospecting/aluminium = yes 
			}
		}

		remove_effect = {
			653 = {
				add_resource = {
					type = bauxite
					amount = 32
				}
				set_state_flag = kamensk_aluminium_developed				
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
		}
	}
	develop_stalingrad_aluminium_deposits = { #217
		icon = aluminium
		
		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 217
			}
		}

		available = {
			num_of_civilian_factories_available_for_projects > 1
			has_tech = excavation4
		}

		visible = {
			217 = { 
				NOT = { has_state_flag = stalingrad_aluminium_developed } 
				is_controlled_by_ROOT_or_subject = yes
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 2.2
				EAI_resource_prospecting/aluminium = yes 
			}
		}

		remove_effect = {
			217 = {
				add_resource = {
					type = bauxite
					amount = 40
				}
				set_state_flag = stalingrad_aluminium_developed				
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
		}
	}
	develop_caucasus_tungsten_deposits_1 = { #233
		
		icon = tungsten

		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 233
			}
		}

		available = {
			has_tech = excavation3
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			233 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = caucasus_tungsten_developed
				}
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 1.6
				EAI_resource_prospecting/tungsten = yes 
			}
		}

		remove_effect = {
			233 = { set_state_flag = caucasus_tungsten_developed }
			233 = {
				add_resource = {
					type = tungsten
					amount = 12
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
		}
	}
	develop_caucasus_tungsten_deposits_2 = { #233
		
		icon = tungsten

		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 233
			}
		}

		available = {
			has_tech = excavation5
			num_of_civilian_factories_available_for_projects > 3
		}

		visible = {
			233 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = caucasus_tungsten_developed_2
				}
				has_state_flag = caucasus_tungsten_developed
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 90

		modifier = {
			civilian_factory_use = 6
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 2.0
				EAI_resource_prospecting/tungsten = yes 
			}
		}

		remove_effect = {
			233 = { set_state_flag = caucasus_tungsten_developed_2 }
			233 = {
				add_resource = {
					type = tungsten
					amount = 20
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
		}
	}
	develop_kyzyl_tungsten_deposits = { #404 State not found
		
		icon = tungsten

		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 404
			}
		}

		available = {
			has_tech = excavation4
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			has_tech = excavation3
			404 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = kyzla_tungsten_developed
				}
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 1.8
				EAI_resource_prospecting/tungsten = yes 
			}
		}

		remove_effect = {
			404 = { set_state_flag = kyzla_tungsten_developed }
			404 = {
				add_resource = {
					type = tungsten
					amount = 16
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
		}
	}
	develop_chelyabinsk_steel_deposits = { #572 
		
		icon = steel

		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 572
			}
		}

		available = {
			has_tech = construction4
			num_of_civilian_factories_available_for_projects > 3
		}

		visible = {
			has_tech = construction3
			572 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = { 
						flag = chelyabinsk_steel_developed 
						value = 3
					}
				}
			}
		}

		

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 90

		modifier = {
			civilian_factory_use = 6
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 3.0
				EAI_resource_prospecting/steel = yes 
			}
		}

		remove_effect = {
			572 = { 
				if = {
					limit = {
						not = {
							has_state_flag = chelyabinsk_steel_developed 
						}
					}
					set_state_flag = {
						flag = chelyabinsk_steel_developed 
						value = 1
					}
				}
				else = {
					modify_state_flag = {
						flag = chelyabinsk_steel_developed 
						value = 1
					}
				}
			}
			572 = {
				add_resource = {
					type = iron
					amount = 40
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
		}
	}
	develop_zlatoust_steel_deposits_1 = { #573
		
		icon = steel

		allowed = {
			original_tag = SOV
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 573
			}
		}

		available = {
			has_tech = construction3
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			573 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = zlatoust_steel_developed
				}
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 2.0
				EAI_resource_prospecting/steel = yes 
			}
		}

		remove_effect = {
			573 = { set_state_flag = zlatoust_steel_developed }
			573 = {
				add_resource = {
					type = iron
					amount = 10
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = steel_refinery
					level = 2
					instant_build = yes
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
		}
	}
	develop_zlatoust_steel_deposits_2 = { #573
		
		icon = steel

		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 573
			}
		}

		available = {
			has_tech = construction4
			num_of_civilian_factories_available_for_projects > 3
		}

		visible = {
			573 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = zlatoust_steel_developed_2
				}
				has_state_flag = zlatoust_steel_developed
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 90

		modifier = {
			civilian_factory_use = 6
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 3.0
				EAI_resource_prospecting/steel = yes 
			}
		}

		remove_effect = {
			573 = { set_state_flag = zlatoust_steel_developed_2 }
			573 = {
				add_resource = {
					type = iron
					amount = 30
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = steel_refinery
					level = 2
					instant_build = yes
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
		}
	}
	develop_kursk_steel_deposits = { #220
		
		icon = steel

		allowed = {
			original_tag = SOV
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 220
			}
		}

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 7
		}

		visible = {
			220 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = { 
						flag = kursk_steel_developed 
						value = 5
					}
				}
			}
		}

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = SOV_kursk_steel_duration_temp

		modifier = {
			civilian_factory_use = 10
		}

		ai_will_do = {
			factor = 0
		}

		remove_effect = {
			add_to_variable = { var = SOV_kursk_steel_duration value = 30 }
			220 = {
				if = {
					limit = {
						NOT = {
							has_state_flag = kursk_steel_developed
						}
					}
					set_state_flag = {
						flag = kursk_steel_developed
						value = 1
					}
				}
				else = {
					modify_state_flag = {
						flag = kursk_steel_developed
						value = 1
					}
				}
				if = { limit = { has_state_flag = { flag = kursk_steel_developed value = 5 } }
					clear_variable = Root.SOV_kursk_steel_duration
				}
			}
			220 = {
				add_resource = {
					type = iron
					amount = 24
				}
			}
			custom_effect_tooltip = resource_prospecting_5_times_TT
			clear_variable = Root.SOV_kursk_steel_duration_temp
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
		}

		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
			if = {
				limit = {
					check_variable = { var = SOV_kursk_steel_duration value = 30 compare = less_than }
				}
				set_variable = { var = SOV_kursk_steel_duration value = 30 }
			}
			set_temp_variable = { SOV_kursk_steel_duration_temp = SOV_kursk_steel_duration }
			if = { limit = { check_variable = { SOV_kursk_steel_duration_temp = 0 } }
				set_temp_variable = { SOV_kursk_steel_duration_temp = 30 }
			}
			set_variable = { SOV_kursk_steel_duration_temp = SOV_kursk_steel_duration }
		}
	}
	develop_kursk_steel_deposits_2 = { #220
		
		icon = steel

		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 220
			}
		}

		available = {
			has_tech = excavation3
			num_of_civilian_factories_available_for_projects > 10
		}

		visible = {
			220 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = { 
						flag = kursk_steel_developed_2 
						value = 5
					}
				}
				has_state_flag = { 
					flag = kursk_steel_developed
					value = 5
				}
			}
		}

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = SOV_kursk_steel_duration_2_temp

		modifier = {
			civilian_factory_use = 15
		}

		ai_will_do = {
			factor = 0
		}

		remove_effect = {
			add_to_variable = { var = SOV_kursk_steel_duration_2 value = 30 }
			220 = {
				if = {
					limit = {
						NOT = {
							has_state_flag = kursk_steel_developed_2
						}
					}
					set_state_flag = {
						flag = kursk_steel_developed_2
						value = 1
					}
				}
				else = {
					modify_state_flag = {
						flag = kursk_steel_developed_2
						value = 1
					}
				}
				if = { limit = { has_state_flag = { flag = kursk_steel_developed_2 value = 5 } }
					clear_variable = Root.SOV_kursk_steel_duration_2
				}
			}
			220 = {
				add_resource = {
					type = iron
					amount = 24
				}
			}
			custom_effect_tooltip = resource_prospecting_5_times_TT
			clear_variable = Root.SOV_kursk_steel_duration_2_temp
			
		}

		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
			if = {
				limit = {
					check_variable = { var = SOV_kursk_steel_duration_2 value = 30 compare = less_than }
				}
				set_variable = { var = SOV_kursk_steel_duration_2 value = 30 }
			}
			set_temp_variable = { SOV_kursk_steel_duration_2_temp = SOV_kursk_steel_duration_2 }
			if = { limit = { check_variable = { SOV_kursk_steel_duration_2_temp = 0 } }
				set_temp_variable = { SOV_kursk_steel_duration_2_temp = 30 }
			}
			set_variable = { SOV_kursk_steel_duration_2_temp = SOV_kursk_steel_duration_2 }
		}
	}
	develop_kursk_steel_deposits_3 = { #220
		
		icon = steel

		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 220
			}
		}

		available = {
			has_tech = excavation4
			num_of_civilian_factories_available_for_projects > 13
		}

		visible = {
			220 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = { 
						flag = kursk_steel_developed_3 
						value = 5
					}
				}
				has_state_flag = { 
					flag = kursk_steel_developed_2
					value = 5
				}
			}
		}

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = SOV_kursk_steel_duration_3_temp

		modifier = {
			civilian_factory_use = 16
		}

		ai_will_do = {
			factor = 0
		}

		remove_effect = {
			add_to_variable = { var = SOV_kursk_steel_duration_3 value = 30 }
			220 = {
				if = {
					limit = {
						NOT = {
							has_state_flag = kursk_steel_developed_3
						}
					}
					set_state_flag = {
						flag = kursk_steel_developed_3
						value = 1
					}
				}
				else = {
					modify_state_flag = {
						flag = kursk_steel_developed_3
						value = 1
					}
				}
				if = { limit = { has_state_flag = { flag = kursk_steel_developed_3 value = 5 } }
					clear_variable = Root.SOV_kursk_steel_duration_3
				}
			}
			220 = {
				add_resource = {
					type = iron
					amount = 24
				}
			}
			custom_effect_tooltip = resource_prospecting_5_times_TT
			clear_variable = Root.SOV_kursk_steel_duration_3_temp	
		}

		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }
			round_variable = resource_tractors
			if = {
				limit = {
					check_variable = { var = SOV_kursk_steel_duration_3 value = 30 compare = less_than }
				}
				set_variable = { var = SOV_kursk_steel_duration_3 value = 30 }
			}
			set_temp_variable = { SOV_kursk_steel_duration_3_temp = SOV_kursk_steel_duration_3 }
			if = { limit = { check_variable = { SOV_kursk_steel_duration_3_temp = 0 } }
				set_temp_variable = { SOV_kursk_steel_duration_3_temp = 30 }
			}
			set_variable = { SOV_kursk_steel_duration_3_temp = SOV_kursk_steel_duration_3 }
		}
	}
	develop_Belgorod_steel_deposits = { #240
		
		icon = steel

		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 240
			}
		}

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 7
		}

		visible = {
			240 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = { 
						flag = Belgorod_steel_developed 
						value = 5
					}
				}
			}
		}

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = SOV_Belgorod_steel_duration_temp

		modifier = {
			civilian_factory_use = 10
		}

		ai_will_do = {
			factor = 0
		}

		remove_effect = {
			add_to_variable = { var = SOV_Belgorod_steel_duration value = 30 }
			240 = {
				if = {
					limit = {
						NOT = {
							has_state_flag = Belgorod_steel_developed
						}
					}
					set_state_flag = {
						flag = Belgorod_steel_developed
						value = 1
					}
				}
				else = {
					modify_state_flag = {
						flag = Belgorod_steel_developed
						value = 1
					}
				}
				if = { limit = { has_state_flag = { flag = Belgorod_steel_developed value = 5 } }
					clear_variable = Root.SOV_Belgorod_steel_duration
				}
			}
			240 = {
				add_resource = {
					type = iron
					amount = 24
				}
			}
			custom_effect_tooltip = resource_prospecting_5_times_TT
			clear_variable = Root.SOV_Belgorod_steel_duration_temp
		}

		complete_effect = {
			if = {
				limit = {
					check_variable = { var = SOV_Belgorod_steel_duration value = 30 compare = less_than }
				}
				set_variable = { var = SOV_Belgorod_steel_duration value = 30 }
			}
			set_temp_variable = { SOV_Belgorod_steel_duration_temp = SOV_Belgorod_steel_duration }
			if = { limit = { check_variable = { SOV_Belgorod_steel_duration_temp = 0 } }
				set_temp_variable = { SOV_Belgorod_steel_duration_temp = 30 }
			}
			set_variable = { SOV_Belgorod_steel_duration_temp = SOV_Belgorod_steel_duration }
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }		
			round_variable = resource_tractors
		}
	}
	develop_Belgorod_steel_deposits_2 = { #240
		
		icon = steel

		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 240
			}
		}

		available = {
			has_tech = excavation3
			num_of_civilian_factories_available_for_projects > 10
		}

		visible = {
			240 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = { 
						flag = Belgorod_steel_developed_2 
						value = 5
					}
				}
				has_state_flag = { 
					flag = Belgorod_steel_developed
					value = 5
				}
			}
		}

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = SOV_Belgorod_steel_duration_2_temp

		modifier = {
			civilian_factory_use = 14
		}

		ai_will_do = {
			factor = 0
		}

		remove_effect = {
			add_to_variable = { var = SOV_Belgorod_steel_duration_2 value = 30 }
			240 = {
				if = {
					limit = {
						NOT = {
							has_state_flag = Belgorod_steel_developed_2
						}
					}
					set_state_flag = {
						flag = Belgorod_steel_developed_2
						value = 1
					}
				}
				else = {
					modify_state_flag = {
						flag = Belgorod_steel_developed_2
						value = 1
					}
				}
				if = { limit = { has_state_flag = { flag = Belgorod_steel_developed_2 value = 5 } }
					clear_variable = Root.SOV_Belgorod_steel_duration_2
				}
			}
			240 = {
				add_resource = {
					type = iron
					amount = 24
				}
			}
			custom_effect_tooltip = resource_prospecting_5_times_TT
			clear_variable = Root.SOV_Belgorod_steel_duration_2_temp
		}

		complete_effect = {
			if = {
				limit = {
					check_variable = { var = SOV_Belgorod_steel_duration_2 value = 30 compare = less_than }
				}
				set_variable = { var = SOV_Belgorod_steel_duration_2 value = 30 }
			}
			set_temp_variable = { SOV_Belgorod_steel_duration_2_temp = SOV_Belgorod_steel_duration_2 }
			if = { limit = { check_variable = { SOV_Belgorod_steel_duration_2_temp = 0 } }
				set_temp_variable = { SOV_Belgorod_steel_duration_2_temp = 30 }
			}
			set_variable = { SOV_Belgorod_steel_duration_2_temp = SOV_Belgorod_steel_duration_2 }
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }		
			round_variable = resource_tractors
		}
	}
	develop_Belgorod_steel_deposits_3 = { #240
		
		icon = steel

		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 240
			}
		}

		available = {
			has_tech = excavation4
			num_of_civilian_factories_available_for_projects > 13
		}

		visible = {
			240 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = { 
						flag = Belgorod_steel_developed_3 
						value = 5
					}
				}
				has_state_flag = { 
					flag = Belgorod_steel_developed_2
					value = 5
				}
			}
		}

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = SOV_Belgorod_steel_duration_3_temp

		modifier = {
			civilian_factory_use = 15
		}

		ai_will_do = {
			factor = 0
		}

		remove_effect = {
			add_to_variable = { var = SOV_Belgorod_steel_duration_3 value = 30 }
			240 = {
				if = {
					limit = {
						NOT = {
							has_state_flag = Belgorod_steel_developed_3
						}
					}
					set_state_flag = {
						flag = Belgorod_steel_developed_3
						value = 1
					}
				}
				else = {
					modify_state_flag = {
						flag = Belgorod_steel_developed_3
						value = 1
					}
				}
				if = { limit = { has_state_flag = { flag = Belgorod_steel_developed_3 value = 5 } }
					clear_variable = Root.SOV_Belgorod_steel_duration_3
				}
			}
			240 = {
				add_resource = {
					type = iron
					amount = 24
				}
			}
			custom_effect_tooltip = resource_prospecting_5_times_TT
			clear_variable = Root.SOV_Belgorod_steel_duration_3_temp
		}

		complete_effect = {
			if = {
				limit = {
					check_variable = { var = SOV_Belgorod_steel_duration_3 value = 30 compare = less_than }
				}
				set_variable = { var = SOV_Belgorod_steel_duration_3 value = 30 }
			}
			set_temp_variable = { SOV_Belgorod_steel_duration_3_temp = SOV_Belgorod_steel_duration_3 }
			if = { limit = { check_variable = { SOV_Belgorod_steel_duration_3_temp = 0 } }
				set_temp_variable = { SOV_Belgorod_steel_duration_3_temp = 30 }
			}
			set_variable = { SOV_Belgorod_steel_duration_3_temp = SOV_Belgorod_steel_duration_3 }
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }		
			round_variable = resource_tractors
		}
	}
	develop_uralsk_chromium_deposits_1 = { #407
		
		icon = chromium

		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 407
			}
		}

		available = {
			has_tech = excavation3
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			407 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = uralsk_chromium_developed
				}
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 60

		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 2.0
				EAI_resource_prospecting/chromium = yes 
			}
		}

		remove_effect = {
			407 = { set_state_flag = uralsk_chromium_developed }
			407 = {
				add_resource = {
					type = chromium
					amount = 20
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }		
			round_variable = resource_tractors
		}
	}
	develop_uralsk_chromium_deposits_2 = { #407
		
		icon = chromium

		allowed = {
			original_tag = SOV 
		}
		highlight_states = { 
			highlight_state_targets = {
				state = 407
			}
		}

		available = {
			has_tech = excavation5
			num_of_civilian_factories_available_for_projects > 3
		}

		visible = {
			407 = {
				is_controlled_by_ROOT_or_subject = yes
				NOT = {
					has_state_flag = uralsk_chromium_developed_2
				}
				has_state_flag = uralsk_chromium_developed
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 90

		modifier = {
			civilian_factory_use = 6
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = 2.5
				EAI_resource_prospecting/chromium = yes 
			}
		}

		remove_effect = {
			407 = { set_state_flag = uralsk_chromium_developed_2 }
			407 = {
				add_resource = {
					type = chromium
					amount = 30
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }		
			round_variable = resource_tractors
		}
	}	
	develop_kashgar_fields = { #619
		
		icon = aluminium
		
		allowed = {
			tag = SOV
		}

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 0
			SIK = {
				#owns_state = 619
				controls_state = 619
				has_completed_focus = SIK_sov_mines
			}
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 619
			}
		}

		visible = {
			SIK = {
				#owns_state = 619
				controls_state = 619
				662 = {
					NOT = {
						has_state_flag = sov_al_developed
					}
				}
				has_completed_focus = SIK_sov_mines
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 60

		modifier = {
			civilian_factory_use = 1
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = 2.5
				EAI_resource_prospecting/aluminium = yes 
			}
		}

		remove_effect = {
			619 = {
				set_state_flag = sov_al_developed
				add_resource = {
					type = bauxite
					amount = 30
				}
			}
			SIK = {
				add_autonomy_ratio = {
					value = -0.05
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }		
			round_variable = resource_tractors
		}
	}
	develop_kashgar_crome = { #619
		
		icon = chromium
		
		allowed = {
			tag = SOV
		}

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 0
			SIK = {
				#owns_state = 619
				controls_state = 619
				has_completed_focus = SIK_sov_mines
			}
		}

		visible = {
			SIK = {
				#owns_state = 619
				has_completed_focus = SIK_sov_mines
				controls_state = 619
				619 = {
					NOT = {
						has_state_flag = sov_cr_developed
					}
				}
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 50

		modifier = {
			civilian_factory_use = 1
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = 2.2
				EAI_resource_prospecting/chromium = yes 
			}
		}

		remove_effect = {
			619 = {
				set_state_flag = sov_cr_developed
				add_resource = {
					type = chromium
					amount = 24
				}
			}
			SIK = {
				add_autonomy_ratio = {
					value = -0.05
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }		
			round_variable = resource_tractors
		}
	}
	develop_aksu_steel = { #754
		
		icon = steel
		
		allowed = {
			tag = SOV
		}

		available = {
			has_tech = excavation1
			num_of_civilian_factories_available_for_projects > 0
			SIK = {
				#owns_state = 754
				controls_state = 754
				has_completed_focus = SIK_sov_mines
			}
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 754
			}
		}

		visible = {
			SIK = {
				#owns_state = 754
				controls_state = 754
				754 = {
					NOT = {
						has_state_flag = sov_steel_developed
					}
				}
				has_completed_focus = SIK_sov_mines
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 75

		modifier = {
			civilian_factory_use = 1
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = 2.8
				EAI_resource_prospecting/steel = yes 
			}
		}

		remove_effect = {
			754 = {
				set_state_flag = sov_steel_developed
				add_resource = {
					type = iron
					amount = 36
				}
			}
			SIK = {
				add_autonomy_ratio = {
					value = -0.05
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }		
			round_variable = resource_tractors
		}
	}
	develop_ili_oil = { #618
		
		icon = oil
		
		allowed = {
			tag = SOV
		}

		available = {
			has_tech = excavation3
			num_of_civilian_factories_available_for_projects > 1
			SIK = {
				#owns_state = 618
				controls_state = 618
				has_completed_focus = SIK_sov_mines
			}
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 618
			}
		}

		visible = {
			SIK = {
				#owns_state = 618
				controls_state = 618
				618 = {
					NOT = {
						has_state_flag = sov_oil_developed
					}
				}
				has_completed_focus = SIK_sov_mines
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 75

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 10
			modifier = {
				add = 2.6
				EAI_resource_prospecting/oil = yes 
			}
		}

		remove_effect = {
			618 = {
				set_state_flag = sov_oil_developed
				add_resource = {
					type = oil
					amount = 24
				}
			}
			SIK = {
				add_autonomy_ratio = {
					value = -0.075
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }		
			round_variable = resource_tractors
		}
	}
	develop_kumul_coal = { #760
		
		icon = coal
		
		allowed = {
			tag = SOV
		}

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 1
			SIK = {
				controls_state = 760
				has_completed_focus = SIK_sov_mines
			}
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 760
			}
		}

		visible = {
			SIK = {
				controls_state = 760
				760 = {
					NOT = {
						has_state_flag = sov_coal_developed
					}
				}
				has_completed_focus = SIK_sov_mines
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 75

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = score
				set_temp_variable = { score = 6 }
				ai_resource_prospecting/coal = yes 
				divide_temp_variable = { score = 12 }
				add_to_temp_variable = { score = 1 }
			}
		}

		remove_effect = {
			760 = {
				set_state_flag = sov_coal_developed
				add_resource = {
					type = coal
					amount = 41
				}
			}
			SIK = {
				add_autonomy_ratio = {
					value = -0.075
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }		
			round_variable = resource_tractors
		}
	}
	develop_dihua_coal = { #617
		
		icon = coal
		
		allowed = {
			tag = SOV
		}

		available = {
			has_tech = excavation2
			num_of_civilian_factories_available_for_projects > 1
			SIK = {
				controls_state = 617
				has_completed_focus = SIK_sov_mines
			}
		}

		highlight_states = { 
			highlight_state_targets = {
				state = 617
			}
		}

		visible = {
			SIK = {
				controls_state = 617
				617 = {
					NOT = {
						has_state_flag = sov_coal_developed
					}
				}
				has_completed_focus = SIK_sov_mines
			}
		}

		fire_only_once = yes

		custom_cost_trigger = {
			check_variable = { tractor_stockpile > resource_tractors }
		}
		custom_cost_text = tractor_cost_resource_tractors
		days_remove = 75

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 0
			modifier = {
				add = score
				set_temp_variable = { score = 6 }
				ai_resource_prospecting/coal = yes 
				divide_temp_variable = { score = 12 }
				add_to_temp_variable = { score = 1 }
			}
		}

		remove_effect = {
			760 = {
				set_state_flag = sov_coal_developed
				add_resource = {
					type = coal
					amount = 35
				}
			}
			SIK = {
				add_autonomy_ratio = {
					value = -0.075
				}
			}
		}
		complete_effect = {
			subtract_from_variable = { tractor_stockpile = resource_tractors tooltip = tractor_removed_tt}
			multiply_variable = { resource_tractors = 1.1 }		
			round_variable = resource_tractors
		}
	}
}