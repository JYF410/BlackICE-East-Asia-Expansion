###
last_date = "1942.6.1" # increase as needed, i was only testing until 42/

# test name should include fail condition
# add basic ai balance & historical accuracy tests here


tests = {

    SCW_end_early= {
		acceptable_fail_rate = 0.1

		success = {
			date > 1938.6.1
		}
		fail = {
			has_global_flag = scw_over
		}
	}

    SCW_no_end = {
		acceptable_fail_rate = 0.1

		success = {
			has_global_flag = scw_over
		}
		fail = {
			GER = {has_war = yes}
		}
	}

    SCW_SOV_win = {
		acceptable_fail_rate = 0.35

		success = {
			has_global_flag = nationalist_victory
		}
		fail = {
			has_global_flag = republican_victory
		}
	}

	GER_early_war = {
		acceptable_fail_rate = 0.0

		success = {
			date > 1938.8.1
		}
		fail = {
			GER = {has_war = yes}
		}
	}
    
    GER_fail_norway = {
		acceptable_fail_rate = 0.2

		success = {
			NOR = { has_capitulated = yes }
		}
        fail = {
            date > 1941.1.1
        }
	}

	GER_no_france= {
		acceptable_fail_rate = 0.0

		success = {
			FRA = { has_capitulated = yes }
		}
		fail = {
			date > 1941.1.1
		}
	}

	GER_early_casualties = {
		acceptable_fail_rate = 0.2

		success = {
			FRA = { has_capitulated = yes }
		}
		fail = {
			GER = {casualties > 240000}
		}
	}
    
    GER_no_barb = {
        acceptable_fail_rate = 0.0

		success = {
			GER = { 
				has_war_with = SOV
			}
		}
        fail = {
            date > 1942.1.1
        }

        loggers = {
			log_equipment_in_field = {
                country = GER
                value = trm_medium_tank_chassis
            }
            log_equipment_in_field = {
                country = SOV
                value = trm_medium_tank_chassis
            }
        }
    }

    GER_horrible_barb = {
        acceptable_fail_rate = 0.0

		success = {
            877 = {CONTROLLER = { is_in_faction_with = GER }}
            206 = {CONTROLLER = { is_in_faction_with = GER }}
		}
        fail = {
            date > 1942.1.1
        }
    }

    GER_barb_barb = {
        acceptable_fail_rate = 0.15

		success = {
            221 = {CONTROLLER = { is_in_faction_with = GER }}
            224 = {CONTROLLER = { is_in_faction_with = GER }}
            242 = {CONTROLLER = { is_in_faction_with = GER }}
            209 = {CONTROLLER = { is_in_faction_with = GER }}
		}
        fail = {
            date > 1942.1.1
        }
    }

	GER_capitulates_44 = {
        acceptable_fail_rate = 0.1

		success = {
			date > 1945.1.1
		}
		fail = {
			GER = { has_capitulated = yes }
		}
	}

	SOV_lose_LMS = {
        acceptable_fail_rate = 0.2

		fail = {
			SOV = {
				NOT = { controls_state = 195 }
				NOT = { controls_state = 845 }
				NOT = { controls_state = 217 }
			}
		}
	}
	
	SOV_capitulate = {
        acceptable_fail_rate = 0.0

		fail = {
			SOV = {has_capitulated = yes}
		}
	}

    FIN_early_capitulate = {
        acceptable_fail_rate = 0.4

		success = {
			date > 1944.1
		}
		fail = {
            GER = {has_war_with = SOV}
			FIN = {has_capitulated = yes} 
		}
	}

    JAP_defeat_CHI = {
        acceptable_fail_rate = 0.25

        fail = {
			CHI = {has_capitulated = yes}
		}
	}

    ITA_holds_tripoli = {
        acceptable_fail_rate = 0.6

        success = {
            ITA = { NOT = controls_state = 448 }
        }
		fail = {
			date > 1944.1.1
		}
	}

    UK_loses_alexandria = {
        acceptable_fail_rate = 0.4

        fail = {
           NOT = {447 = {CONTROLLER = { is_in_faction_with = ENG }}}
        }
	}

    RAJ_capitulates = {
        acceptable_fail_rate = 0.4

        fail = {
            RAJ = { has_capitulated = yes}
        }
    }
	
    BEL_congo_uprising = {
        acceptable_fail_rate = 0.1

        fail = {
            538 = {
				resistance > 80
			}
        }
    }
    
}
	
	